/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/messages/page";
exports.ids = ["app/messages/page"];
exports.modules = {

/***/ "./action-async-storage.external":
/*!****************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external" ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external":
/*!***************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external" ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fmessages%2Fpage&page=%2Fmessages%2Fpage&appPaths=%2Fmessages%2Fpage&pagePath=private-next-app-dir%2Fmessages%2Fpage.tsx&appDir=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fmessages%2Fpage&page=%2Fmessages%2Fpage&appPaths=%2Fmessages%2Fpage&pagePath=private-next-app-dir%2Fmessages%2Fpage.tsx&appDir=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/module.compiled.js?9d97\");\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/client/components/error-boundary */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"originalPathname\",\"__next_app__\",\"routeModule\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\"TURBOPACK { transition: next-ssr }\";\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        'messages',\n        {\n        children: ['__PAGE__', {}, {\n          page: [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/messages/page.tsx */ \"(rsc)/./src/app/messages/page.tsx\")), \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\"],\n          \n        }]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/layout.tsx */ \"(rsc)/./src/app/layout.tsx\")), \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/layout.tsx\"],\n'not-found': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/not-found-error */ \"(rsc)/./node_modules/next/dist/client/components/not-found-error.js\", 23)), \"next/dist/client/components/not-found-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\"];\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst originalPathname = \"/messages/page\";\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/messages/page\",\n        pathname: \"/messages\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\",\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZtZXNzYWdlcyUyRnBhZ2UmcGFnZT0lMkZtZXNzYWdlcyUyRnBhZ2UmYXBwUGF0aHM9JTJGbWVzc2FnZXMlMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGbWVzc2FnZXMlMkZwYWdlLnRzeCZhcHBEaXI9JTJGVXNlcnMlMkZ5b2dlc2glMkZEb3dubG9hZHMlMkZqZWNyY19kYXRpbmclMkZmcm9udGVuZCUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ5b2dlc2glMkZEb3dubG9hZHMlMkZqZWNyY19kYXRpbmclMkZmcm9udGVuZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1leHBvcnQmcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGFBQWEsc0JBQXNCO0FBQ2lFO0FBQ3JDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyx1QkFBdUIsa0tBQTRHO0FBQ25JO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EseUJBQXlCLG9KQUFxRztBQUM5SCxvQkFBb0IsME5BQWdGO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUN1QjtBQUM2RDtBQUNwRiw2QkFBNkIsbUJBQW1CO0FBQ2hEO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUN1RDtBQUN2RDtBQUNPLHdCQUF3Qiw4R0FBa0I7QUFDakQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamVjcmMtZGF0aW5nLWZyb250ZW5kLz8wM2NmIl0sInNvdXJjZXNDb250ZW50IjpbIlwiVFVSQk9QQUNLIHsgdHJhbnNpdGlvbjogbmV4dC1zc3IgfVwiO1xuaW1wb3J0IHsgQXBwUGFnZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXBhZ2UvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuLy8gV2UgaW5qZWN0IHRoZSB0cmVlIGFuZCBwYWdlcyBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgdHJlZSA9IHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJycsXG4gICAgICAgIHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJ21lc3NhZ2VzJyxcbiAgICAgICAge1xuICAgICAgICBjaGlsZHJlbjogWydfX1BBR0VfXycsIHt9LCB7XG4gICAgICAgICAgcGFnZTogWygpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL3lvZ2VzaC9Eb3dubG9hZHMvamVjcmNfZGF0aW5nL2Zyb250ZW5kL3NyYy9hcHAvbWVzc2FnZXMvcGFnZS50c3hcIiksIFwiL1VzZXJzL3lvZ2VzaC9Eb3dubG9hZHMvamVjcmNfZGF0aW5nL2Zyb250ZW5kL3NyYy9hcHAvbWVzc2FnZXMvcGFnZS50c3hcIl0sXG4gICAgICAgICAgXG4gICAgICAgIH1dXG4gICAgICB9LFxuICAgICAgICB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgIH1cbiAgICAgIF1cbiAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgJ2xheW91dCc6IFsoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy95b2dlc2gvRG93bmxvYWRzL2plY3JjX2RhdGluZy9mcm9udGVuZC9zcmMvYXBwL2xheW91dC50c3hcIiksIFwiL1VzZXJzL3lvZ2VzaC9Eb3dubG9hZHMvamVjcmNfZGF0aW5nL2Zyb250ZW5kL3NyYy9hcHAvbGF5b3V0LnRzeFwiXSxcbidub3QtZm91bmQnOiBbKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWVycm9yXCIpLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9ub3QtZm91bmQtZXJyb3JcIl0sXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfS5jaGlsZHJlbjtcbmNvbnN0IHBhZ2VzID0gW1wiL1VzZXJzL3lvZ2VzaC9Eb3dubG9hZHMvamVjcmNfZGF0aW5nL2Zyb250ZW5kL3NyYy9hcHAvbWVzc2FnZXMvcGFnZS50c3hcIl07XG5leHBvcnQgeyB0cmVlLCBwYWdlcyB9O1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBHbG9iYWxFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvZXJyb3ItYm91bmRhcnlcIjtcbmNvbnN0IF9fbmV4dF9hcHBfcmVxdWlyZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfX1xuY29uc3QgX19uZXh0X2FwcF9sb2FkX2NodW5rX18gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKVxuZXhwb3J0IGNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9tZXNzYWdlcy9wYWdlXCI7XG5leHBvcnQgY29uc3QgX19uZXh0X2FwcF9fID0ge1xuICAgIHJlcXVpcmU6IF9fbmV4dF9hcHBfcmVxdWlyZV9fLFxuICAgIGxvYWRDaHVuazogX19uZXh0X2FwcF9sb2FkX2NodW5rX19cbn07XG5leHBvcnQgKiBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2VudHJ5LWJhc2VcIjtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFBhZ2VSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1BBR0UsXG4gICAgICAgIHBhZ2U6IFwiL21lc3NhZ2VzL3BhZ2VcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL21lc3NhZ2VzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCIsXG4gICAgICAgIGFwcFBhdGhzOiBbXVxuICAgIH0sXG4gICAgdXNlcmxhbmQ6IHtcbiAgICAgICAgbG9hZGVyVHJlZTogdHJlZVxuICAgIH1cbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcGFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fmessages%2Fpage&page=%2Fmessages%2Fpage&appPaths=%2Fmessages%2Fpage&pagePath=private-next-app-dir%2Fmessages%2Fpage.tsx&appDir=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fstatic-generation-searchparams-bailout-provider.js&server=true!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fstatic-generation-searchparams-bailout-provider.js&server=true! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/app-router.js */ \"(ssr)/./node_modules/next/dist/client/components/app-router.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/not-found-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/not-found-boundary.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js */ \"(ssr)/./node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js\", 23))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTJGVXNlcnMlMkZ5b2dlc2glMkZEb3dubG9hZHMlMkZqZWNyY19kYXRpbmclMkZmcm9udGVuZCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmFwcC1yb3V0ZXIuanMmbW9kdWxlcz0lMkZVc2VycyUyRnlvZ2VzaCUyRkRvd25sb2FkcyUyRmplY3JjX2RhdGluZyUyRmZyb250ZW5kJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGZXJyb3ItYm91bmRhcnkuanMmbW9kdWxlcz0lMkZVc2VycyUyRnlvZ2VzaCUyRkRvd25sb2FkcyUyRmplY3JjX2RhdGluZyUyRmZyb250ZW5kJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGbGF5b3V0LXJvdXRlci5qcyZtb2R1bGVzPSUyRlVzZXJzJTJGeW9nZXNoJTJGRG93bmxvYWRzJTJGamVjcmNfZGF0aW5nJTJGZnJvbnRlbmQlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZub3QtZm91bmQtYm91bmRhcnkuanMmbW9kdWxlcz0lMkZVc2VycyUyRnlvZ2VzaCUyRkRvd25sb2FkcyUyRmplY3JjX2RhdGluZyUyRmZyb250ZW5kJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGcmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qcyZtb2R1bGVzPSUyRlVzZXJzJTJGeW9nZXNoJTJGRG93bmxvYWRzJTJGamVjcmNfZGF0aW5nJTJGZnJvbnRlbmQlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZzdGF0aWMtZ2VuZXJhdGlvbi1zZWFyY2hwYXJhbXMtYmFpbG91dC1wcm92aWRlci5qcyZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsa09BQXlJO0FBQ3pJLDBPQUE2STtBQUM3SSx3T0FBNEk7QUFDNUksa1BBQWlKO0FBQ2pKLHNRQUEySjtBQUMzSiIsInNvdXJjZXMiOlsid2VicGFjazovL2plY3JjLWRhdGluZy1mcm9udGVuZC8/YjY2OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy95b2dlc2gvRG93bmxvYWRzL2plY3JjX2RhdGluZy9mcm9udGVuZC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2FwcC1yb3V0ZXIuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy95b2dlc2gvRG93bmxvYWRzL2plY3JjX2RhdGluZy9mcm9udGVuZC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJ5LmpzXCIpO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMveW9nZXNoL0Rvd25sb2Fkcy9qZWNyY19kYXRpbmcvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9sYXlvdXQtcm91dGVyLmpzXCIpO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMveW9nZXNoL0Rvd25sb2Fkcy9qZWNyY19kYXRpbmcvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9ub3QtZm91bmQtYm91bmRhcnkuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy95b2dlc2gvRG93bmxvYWRzL2plY3JjX2RhdGluZy9mcm9udGVuZC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy95b2dlc2gvRG93bmxvYWRzL2plY3JjX2RhdGluZy9mcm9udGVuZC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3N0YXRpYy1nZW5lcmF0aW9uLXNlYXJjaHBhcmFtcy1iYWlsb3V0LXByb3ZpZGVyLmpzXCIpIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fstatic-generation-searchparams-bailout-provider.js&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Ffont%2Fgoogle%2Ftarget.css%3F%7B%22path%22%3A%22src%2Fapp%2Flayout.tsx%22%2C%22import%22%3A%22Inter%22%2C%22arguments%22%3A%5B%7B%22subsets%22%3A%5B%22latin%22%5D%7D%5D%2C%22variableName%22%3A%22inter%22%7D&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp%2Fglobals.css&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fcomponents%2FTokenRefreshProvider.tsx&server=true!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Ffont%2Fgoogle%2Ftarget.css%3F%7B%22path%22%3A%22src%2Fapp%2Flayout.tsx%22%2C%22import%22%3A%22Inter%22%2C%22arguments%22%3A%5B%7B%22subsets%22%3A%5B%22latin%22%5D%7D%5D%2C%22variableName%22%3A%22inter%22%7D&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp%2Fglobals.css&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fcomponents%2FTokenRefreshProvider.tsx&server=true! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/components/TokenRefreshProvider.tsx */ \"(ssr)/./src/components/TokenRefreshProvider.tsx\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTJGVXNlcnMlMkZ5b2dlc2glMkZEb3dubG9hZHMlMkZqZWNyY19kYXRpbmclMkZmcm9udGVuZCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZmb250JTJGZ29vZ2xlJTJGdGFyZ2V0LmNzcyUzRiU3QiUyMnBhdGglMjIlM0ElMjJzcmMlMkZhcHAlMkZsYXlvdXQudHN4JTIyJTJDJTIyaW1wb3J0JTIyJTNBJTIySW50ZXIlMjIlMkMlMjJhcmd1bWVudHMlMjIlM0ElNUIlN0IlMjJzdWJzZXRzJTIyJTNBJTVCJTIybGF0aW4lMjIlNUQlN0QlNUQlMkMlMjJ2YXJpYWJsZU5hbWUlMjIlM0ElMjJpbnRlciUyMiU3RCZtb2R1bGVzPSUyRlVzZXJzJTJGeW9nZXNoJTJGRG93bmxvYWRzJTJGamVjcmNfZGF0aW5nJTJGZnJvbnRlbmQlMkZzcmMlMkZhcHAlMkZnbG9iYWxzLmNzcyZtb2R1bGVzPSUyRlVzZXJzJTJGeW9nZXNoJTJGRG93bmxvYWRzJTJGamVjcmNfZGF0aW5nJTJGZnJvbnRlbmQlMkZzcmMlMkZjb21wb25lbnRzJTJGVG9rZW5SZWZyZXNoUHJvdmlkZXIudHN4JnNlcnZlcj10cnVlISIsIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2plY3JjLWRhdGluZy1mcm9udGVuZC8/ZmQyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy95b2dlc2gvRG93bmxvYWRzL2plY3JjX2RhdGluZy9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9Ub2tlblJlZnJlc2hQcm92aWRlci50c3hcIikiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fnode_modules%2Fnext%2Ffont%2Fgoogle%2Ftarget.css%3F%7B%22path%22%3A%22src%2Fapp%2Flayout.tsx%22%2C%22import%22%3A%22Inter%22%2C%22arguments%22%3A%5B%7B%22subsets%22%3A%5B%22latin%22%5D%7D%5D%2C%22variableName%22%3A%22inter%22%7D&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp%2Fglobals.css&modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fcomponents%2FTokenRefreshProvider.tsx&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp%2Fmessages%2Fpage.tsx&server=true!":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp%2Fmessages%2Fpage.tsx&server=true! ***!
  \********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/messages/page.tsx */ \"(ssr)/./src/app/messages/page.tsx\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTJGVXNlcnMlMkZ5b2dlc2glMkZEb3dubG9hZHMlMkZqZWNyY19kYXRpbmclMkZmcm9udGVuZCUyRnNyYyUyRmFwcCUyRm1lc3NhZ2VzJTJGcGFnZS50c3gmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamVjcmMtZGF0aW5nLWZyb250ZW5kLz82MjdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL3lvZ2VzaC9Eb3dubG9hZHMvamVjcmNfZGF0aW5nL2Zyb250ZW5kL3NyYy9hcHAvbWVzc2FnZXMvcGFnZS50c3hcIikiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp%2Fmessages%2Fpage.tsx&server=true!\n");

/***/ }),

/***/ "(ssr)/./src/app/messages/page.tsx":
/*!***********************************!*\
  !*** ./src/app/messages/page.tsx ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MessagesPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(ssr)/./node_modules/next/navigation.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_navigation__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_messaging_ChatList__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/messaging/ChatList */ \"(ssr)/./src/components/messaging/ChatList.tsx\");\n/* harmony import */ var _components_messaging_ChatWindow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/messaging/ChatWindow */ \"(ssr)/./src/components/messaging/ChatWindow.tsx\");\n/* harmony import */ var _contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/contexts/MessagingContext */ \"(ssr)/./src/contexts/MessagingContext.tsx\");\n/* harmony import */ var _utils_tokenManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/utils/tokenManager */ \"(ssr)/./src/utils/tokenManager.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\nconst MessagesPageContent = ()=>{\n    const [selectedMatchId, setSelectedMatchId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [selectedUser, setSelectedUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentUserId, setCurrentUserId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Check authentication\n        const token = localStorage.getItem(\"accessToken\");\n        if (!token) {\n            router.push(\"/login\");\n            return;\n        }\n        // Get current user ID from token (decode JWT)\n        const payload = (0,_utils_tokenManager__WEBPACK_IMPORTED_MODULE_6__.parseJWT)(token);\n        if (payload) {\n            setCurrentUserId(payload.id);\n        } else {\n            console.error(\"Error decoding token: Invalid payload\");\n            router.push(\"/login\");\n        }\n    }, [\n        router\n    ]);\n    const handleSelectChat = (matchId, user)=>{\n        setSelectedMatchId(matchId);\n        setSelectedUser(user);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 flex bg-gray-100\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"w-full md:w-96 flex-shrink-0 h-full\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_messaging_ChatList__WEBPACK_IMPORTED_MODULE_3__.ChatList, {\n                    onSelectChat: handleSelectChat,\n                    selectedMatchId: selectedMatchId\n                }, void 0, false, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                    lineNumber: 51,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                lineNumber: 50,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 hidden md:flex h-full\",\n                children: selectedMatchId && selectedUser ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_messaging_ChatWindow__WEBPACK_IMPORTED_MODULE_4__.ChatWindow, {\n                    matchId: selectedMatchId,\n                    user: selectedUser,\n                    currentUserId: currentUserId || undefined\n                }, void 0, false, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                    lineNumber: 60,\n                    columnNumber: 11\n                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col items-center justify-center w-full bg-gray-50\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center max-w-md px-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-32 h-32 mx-auto mb-6 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-6xl\",\n                                children: \"\\uD83D\\uDCAC\"\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                                lineNumber: 68,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"text-2xl font-bold text-gray-900 mb-2\",\n                                children: \"Select a conversation\"\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                                lineNumber: 71,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-gray-500\",\n                                children: \"Choose a match from the list to start chatting\"\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                                lineNumber: 74,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                        lineNumber: 67,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                    lineNumber: 66,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                lineNumber: 58,\n                columnNumber: 7\n            }, undefined),\n            selectedMatchId && selectedUser && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 z-50 bg-white md:hidden\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center p-4 border-b bg-white\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    setSelectedMatchId(null);\n                                    setSelectedUser(null);\n                                },\n                                className: \"mr-3 text-gray-600 hover:text-gray-900\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"w-6 h-6\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: 2,\n                                        d: \"M15 19l-7-7 7-7\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                                        lineNumber: 94,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                                    lineNumber: 93,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                                lineNumber: 86,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-lg font-semibold\",\n                                children: \"Back to conversations\"\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                                lineNumber: 97,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                        lineNumber: 85,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"h-[calc(100vh-64px)]\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_messaging_ChatWindow__WEBPACK_IMPORTED_MODULE_4__.ChatWindow, {\n                            matchId: selectedMatchId,\n                            user: selectedUser,\n                            currentUserId: currentUserId || undefined\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                            lineNumber: 100,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                        lineNumber: 99,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n                lineNumber: 84,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n        lineNumber: 48,\n        columnNumber: 5\n    }, undefined);\n};\nfunction MessagesPage() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_5__.MessagingProvider, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MessagesPageContent, {}, void 0, false, {\n            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n            lineNumber: 115,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx\",\n        lineNumber: 114,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL21lc3NhZ2VzL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUVtRDtBQUNQO0FBQ2U7QUFDSTtBQUNDO0FBQ2hCO0FBVWhELE1BQU1RLHNCQUFnQztJQUNwQyxNQUFNLENBQUNDLGlCQUFpQkMsbUJBQW1CLEdBQUdULCtDQUFRQSxDQUFnQjtJQUN0RSxNQUFNLENBQUNVLGNBQWNDLGdCQUFnQixHQUFHWCwrQ0FBUUEsQ0FBYztJQUM5RCxNQUFNLENBQUNZLGVBQWVDLGlCQUFpQixHQUFHYiwrQ0FBUUEsQ0FBZ0I7SUFDbEUsTUFBTWMsU0FBU1osMERBQVNBO0lBRXhCRCxnREFBU0EsQ0FBQztRQUNSLHVCQUF1QjtRQUN2QixNQUFNYyxRQUFRQyxhQUFhQyxPQUFPLENBQUM7UUFDbkMsSUFBSSxDQUFDRixPQUFPO1lBQ1ZELE9BQU9JLElBQUksQ0FBQztZQUNaO1FBQ0Y7UUFFQSw4Q0FBOEM7UUFDOUMsTUFBTUMsVUFBVWIsNkRBQVFBLENBQUNTO1FBQ3pCLElBQUlJLFNBQVM7WUFDWE4saUJBQWlCTSxRQUFRQyxFQUFFO1FBQzdCLE9BQU87WUFDTEMsUUFBUUMsS0FBSyxDQUFDO1lBQ2RSLE9BQU9JLElBQUksQ0FBQztRQUNkO0lBQ0YsR0FBRztRQUFDSjtLQUFPO0lBRVgsTUFBTVMsbUJBQW1CLENBQUNDLFNBQWlCQztRQUN6Q2hCLG1CQUFtQmU7UUFDbkJiLGdCQUFnQmM7SUFDbEI7SUFFQSxxQkFDRSw4REFBQ0M7UUFBSUMsV0FBVTs7MEJBRWIsOERBQUNEO2dCQUFJQyxXQUFVOzBCQUNiLDRFQUFDeEIsb0VBQVFBO29CQUNQeUIsY0FBY0w7b0JBQ2RmLGlCQUFpQkE7Ozs7Ozs7Ozs7OzBCQUtyQiw4REFBQ2tCO2dCQUFJQyxXQUFVOzBCQUNabkIsbUJBQW1CRSw2QkFDbEIsOERBQUNOLHdFQUFVQTtvQkFDVG9CLFNBQVNoQjtvQkFDVGlCLE1BQU1mO29CQUNORSxlQUFlQSxpQkFBaUJpQjs7Ozs7OENBR2xDLDhEQUFDSDtvQkFBSUMsV0FBVTs4QkFDYiw0RUFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRDtnQ0FBSUMsV0FBVTswQ0FBeUk7Ozs7OzswQ0FHeEosOERBQUNHO2dDQUFHSCxXQUFVOzBDQUF3Qzs7Ozs7OzBDQUd0RCw4REFBQ0k7Z0NBQUVKLFdBQVU7MENBQWdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBU3BDbkIsbUJBQW1CRSw4QkFDbEIsOERBQUNnQjtnQkFBSUMsV0FBVTs7a0NBQ2IsOERBQUNEO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ0s7Z0NBQ0NDLFNBQVM7b0NBQ1B4QixtQkFBbUI7b0NBQ25CRSxnQkFBZ0I7Z0NBQ2xCO2dDQUNBZ0IsV0FBVTswQ0FFViw0RUFBQ087b0NBQUlQLFdBQVU7b0NBQVVRLE1BQUs7b0NBQU9DLFFBQU87b0NBQWVDLFNBQVE7OENBQ2pFLDRFQUFDQzt3Q0FBS0MsZUFBYzt3Q0FBUUMsZ0JBQWU7d0NBQVFDLGFBQWE7d0NBQUdDLEdBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7MENBR3pFLDhEQUFDQztnQ0FBR2hCLFdBQVU7MENBQXdCOzs7Ozs7Ozs7Ozs7a0NBRXhDLDhEQUFDRDt3QkFBSUMsV0FBVTtrQ0FDYiw0RUFBQ3ZCLHdFQUFVQTs0QkFDVG9CLFNBQVNoQjs0QkFDVGlCLE1BQU1mOzRCQUNORSxlQUFlQSxpQkFBaUJpQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPOUM7QUFFZSxTQUFTZTtJQUN0QixxQkFDRSw4REFBQ3ZDLHlFQUFpQkE7a0JBQ2hCLDRFQUFDRTs7Ozs7Ozs7OztBQUdQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamVjcmMtZGF0aW5nLWZyb250ZW5kLy4vc3JjL2FwcC9tZXNzYWdlcy9wYWdlLnRzeD9hMDI2Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgQ2hhdExpc3QgfSBmcm9tICdAL2NvbXBvbmVudHMvbWVzc2FnaW5nL0NoYXRMaXN0JztcbmltcG9ydCB7IENoYXRXaW5kb3cgfSBmcm9tICdAL2NvbXBvbmVudHMvbWVzc2FnaW5nL0NoYXRXaW5kb3cnO1xuaW1wb3J0IHsgTWVzc2FnaW5nUHJvdmlkZXIgfSBmcm9tICdAL2NvbnRleHRzL01lc3NhZ2luZ0NvbnRleHQnO1xuaW1wb3J0IHsgcGFyc2VKV1QgfSBmcm9tICdAL3V0aWxzL3Rva2VuTWFuYWdlcic7XG5cbmludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgZGVwYXJ0bWVudDogc3RyaW5nIHwgbnVsbDtcbiAgeWVhcjogbnVtYmVyIHwgbnVsbDtcbiAgcHJvZmlsZUltYWdlOiBzdHJpbmcgfCBudWxsO1xufVxuXG5jb25zdCBNZXNzYWdlc1BhZ2VDb250ZW50OiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgY29uc3QgW3NlbGVjdGVkTWF0Y2hJZCwgc2V0U2VsZWN0ZWRNYXRjaElkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2VsZWN0ZWRVc2VyLCBzZXRTZWxlY3RlZFVzZXJdID0gdXNlU3RhdGU8VXNlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY3VycmVudFVzZXJJZCwgc2V0Q3VycmVudFVzZXJJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBhdXRoZW50aWNhdGlvblxuICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEdldCBjdXJyZW50IHVzZXIgSUQgZnJvbSB0b2tlbiAoZGVjb2RlIEpXVClcbiAgICBjb25zdCBwYXlsb2FkID0gcGFyc2VKV1QodG9rZW4pO1xuICAgIGlmIChwYXlsb2FkKSB7XG4gICAgICBzZXRDdXJyZW50VXNlcklkKHBheWxvYWQuaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWNvZGluZyB0b2tlbjogSW52YWxpZCBwYXlsb2FkJyk7XG4gICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7XG4gICAgfVxuICB9LCBbcm91dGVyXSk7XG5cbiAgY29uc3QgaGFuZGxlU2VsZWN0Q2hhdCA9IChtYXRjaElkOiBzdHJpbmcsIHVzZXI6IFVzZXIpID0+IHtcbiAgICBzZXRTZWxlY3RlZE1hdGNoSWQobWF0Y2hJZCk7XG4gICAgc2V0U2VsZWN0ZWRVc2VyKHVzZXIpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGZsZXggYmctZ3JheS0xMDBcIj5cbiAgICAgIHsvKiBTaWRlYmFyIC0gQ2hhdCBMaXN0ICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWQ6dy05NiBmbGV4LXNocmluay0wIGgtZnVsbFwiPlxuICAgICAgICA8Q2hhdExpc3RcbiAgICAgICAgICBvblNlbGVjdENoYXQ9e2hhbmRsZVNlbGVjdENoYXR9XG4gICAgICAgICAgc2VsZWN0ZWRNYXRjaElkPXtzZWxlY3RlZE1hdGNoSWR9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIE1haW4gQ29udGVudCAtIENoYXQgV2luZG93ICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgaGlkZGVuIG1kOmZsZXggaC1mdWxsXCI+XG4gICAgICAgIHtzZWxlY3RlZE1hdGNoSWQgJiYgc2VsZWN0ZWRVc2VyID8gKFxuICAgICAgICAgIDxDaGF0V2luZG93XG4gICAgICAgICAgICBtYXRjaElkPXtzZWxlY3RlZE1hdGNoSWR9XG4gICAgICAgICAgICB1c2VyPXtzZWxlY3RlZFVzZXJ9XG4gICAgICAgICAgICBjdXJyZW50VXNlcklkPXtjdXJyZW50VXNlcklkIHx8IHVuZGVmaW5lZH1cbiAgICAgICAgICAvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdy1mdWxsIGJnLWdyYXktNTBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgbWF4LXctbWQgcHgtNFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMzIgaC0zMiBteC1hdXRvIG1iLTYgcm91bmRlZC1mdWxsIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tcGluay00MDAgdG8tcHVycGxlLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIHRleHQtNnhsXCI+XG4gICAgICAgICAgICAgICAg8J+SrFxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTJcIj5cbiAgICAgICAgICAgICAgICBTZWxlY3QgYSBjb252ZXJzYXRpb25cbiAgICAgICAgICAgICAgPC9oMj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgIENob29zZSBhIG1hdGNoIGZyb20gdGhlIGxpc3QgdG8gc3RhcnQgY2hhdHRpbmdcbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIE1vYmlsZTogU2hvdyBjaGF0IHdpbmRvdyB3aGVuIHNlbGVjdGVkICovfVxuICAgICAge3NlbGVjdGVkTWF0Y2hJZCAmJiBzZWxlY3RlZFVzZXIgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgei01MCBiZy13aGl0ZSBtZDpoaWRkZW5cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHAtNCBib3JkZXItYiBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRNYXRjaElkKG51bGwpO1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkVXNlcihudWxsKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXItMyB0ZXh0LWdyYXktNjAwIGhvdmVyOnRleHQtZ3JheS05MDBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNiBoLTZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNMTUgMTlsLTctNyA3LTdcIiAvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZFwiPkJhY2sgdG8gY29udmVyc2F0aW9uczwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLVtjYWxjKDEwMHZoLTY0cHgpXVwiPlxuICAgICAgICAgICAgPENoYXRXaW5kb3dcbiAgICAgICAgICAgICAgbWF0Y2hJZD17c2VsZWN0ZWRNYXRjaElkfVxuICAgICAgICAgICAgICB1c2VyPXtzZWxlY3RlZFVzZXJ9XG4gICAgICAgICAgICAgIGN1cnJlbnRVc2VySWQ9e2N1cnJlbnRVc2VySWQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWVzc2FnZXNQYWdlKCkge1xuICByZXR1cm4gKFxuICAgIDxNZXNzYWdpbmdQcm92aWRlcj5cbiAgICAgIDxNZXNzYWdlc1BhZ2VDb250ZW50IC8+XG4gICAgPC9NZXNzYWdpbmdQcm92aWRlcj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUm91dGVyIiwiQ2hhdExpc3QiLCJDaGF0V2luZG93IiwiTWVzc2FnaW5nUHJvdmlkZXIiLCJwYXJzZUpXVCIsIk1lc3NhZ2VzUGFnZUNvbnRlbnQiLCJzZWxlY3RlZE1hdGNoSWQiLCJzZXRTZWxlY3RlZE1hdGNoSWQiLCJzZWxlY3RlZFVzZXIiLCJzZXRTZWxlY3RlZFVzZXIiLCJjdXJyZW50VXNlcklkIiwic2V0Q3VycmVudFVzZXJJZCIsInJvdXRlciIsInRva2VuIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInB1c2giLCJwYXlsb2FkIiwiaWQiLCJjb25zb2xlIiwiZXJyb3IiLCJoYW5kbGVTZWxlY3RDaGF0IiwibWF0Y2hJZCIsInVzZXIiLCJkaXYiLCJjbGFzc05hbWUiLCJvblNlbGVjdENoYXQiLCJ1bmRlZmluZWQiLCJoMiIsInAiLCJidXR0b24iLCJvbkNsaWNrIiwic3ZnIiwiZmlsbCIsInN0cm9rZSIsInZpZXdCb3giLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiaDEiLCJNZXNzYWdlc1BhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/messages/page.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/TokenRefreshProvider.tsx":
/*!*************************************************!*\
  !*** ./src/components/TokenRefreshProvider.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TokenRefreshProvider: () => (/* binding */ TokenRefreshProvider)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_tokenManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/tokenManager */ \"(ssr)/./src/utils/tokenManager.ts\");\n/* harmony import */ var _utils_crossTabSync__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/crossTabSync */ \"(ssr)/./src/utils/crossTabSync.ts\");\n/* harmony import */ var _utils_backgroundTabOptimization__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/backgroundTabOptimization */ \"(ssr)/./src/utils/backgroundTabOptimization.ts\");\n/* __next_internal_client_entry_do_not_use__ TokenRefreshProvider auto */ \n\n\n\n\nconst TokenRefreshProvider = ({ children })=>{\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Initialize Token Manager on mount\n        (0,_utils_tokenManager__WEBPACK_IMPORTED_MODULE_2__.initialize)();\n        // Start proactive refresh scheduling\n        (0,_utils_tokenManager__WEBPACK_IMPORTED_MODULE_2__.scheduleProactiveRefresh)();\n        // Initialize cross-tab synchronization\n        (0,_utils_crossTabSync__WEBPACK_IMPORTED_MODULE_3__.initializeCrossTabSync)();\n        // Initialize background tab optimization\n        (0,_utils_backgroundTabOptimization__WEBPACK_IMPORTED_MODULE_4__.initializeBackgroundOptimization)();\n        // Cleanup on unmount\n        return ()=>{\n            (0,_utils_crossTabSync__WEBPACK_IMPORTED_MODULE_3__.cleanupCrossTabSync)();\n            (0,_utils_backgroundTabOptimization__WEBPACK_IMPORTED_MODULE_4__.cleanupBackgroundOptimization)();\n        };\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: children\n    }, void 0, false);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9Ub2tlblJlZnJlc2hQcm92aWRlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBRWtDO0FBQzBDO0FBQ087QUFDaUM7QUFFN0csTUFBTU8sdUJBQWdFLENBQUMsRUFBRUMsUUFBUSxFQUFFO0lBQ3hGUixnREFBU0EsQ0FBQztRQUNSLG9DQUFvQztRQUNwQ0MsK0RBQVVBO1FBRVYscUNBQXFDO1FBQ3JDQyw2RUFBd0JBO1FBRXhCLHVDQUF1QztRQUN2Q0MsMkVBQXNCQTtRQUV0Qix5Q0FBeUM7UUFDekNFLGtHQUFnQ0E7UUFFaEMscUJBQXFCO1FBQ3JCLE9BQU87WUFDTEQsd0VBQW1CQTtZQUNuQkUsK0ZBQTZCQTtRQUMvQjtJQUNGLEdBQUcsRUFBRTtJQUVMLHFCQUFPO2tCQUFHRTs7QUFDWixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamVjcmMtZGF0aW5nLWZyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvVG9rZW5SZWZyZXNoUHJvdmlkZXIudHN4PzRkZWYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpbml0aWFsaXplLCBzY2hlZHVsZVByb2FjdGl2ZVJlZnJlc2ggfSBmcm9tICdAL3V0aWxzL3Rva2VuTWFuYWdlcic7XG5pbXBvcnQgeyBpbml0aWFsaXplQ3Jvc3NUYWJTeW5jLCBjbGVhbnVwQ3Jvc3NUYWJTeW5jIH0gZnJvbSAnQC91dGlscy9jcm9zc1RhYlN5bmMnO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZUJhY2tncm91bmRPcHRpbWl6YXRpb24sIGNsZWFudXBCYWNrZ3JvdW5kT3B0aW1pemF0aW9uIH0gZnJvbSAnQC91dGlscy9iYWNrZ3JvdW5kVGFiT3B0aW1pemF0aW9uJztcblxuZXhwb3J0IGNvbnN0IFRva2VuUmVmcmVzaFByb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSW5pdGlhbGl6ZSBUb2tlbiBNYW5hZ2VyIG9uIG1vdW50XG4gICAgaW5pdGlhbGl6ZSgpO1xuXG4gICAgLy8gU3RhcnQgcHJvYWN0aXZlIHJlZnJlc2ggc2NoZWR1bGluZ1xuICAgIHNjaGVkdWxlUHJvYWN0aXZlUmVmcmVzaCgpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBjcm9zcy10YWIgc3luY2hyb25pemF0aW9uXG4gICAgaW5pdGlhbGl6ZUNyb3NzVGFiU3luYygpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBiYWNrZ3JvdW5kIHRhYiBvcHRpbWl6YXRpb25cbiAgICBpbml0aWFsaXplQmFja2dyb3VuZE9wdGltaXphdGlvbigpO1xuXG4gICAgLy8gQ2xlYW51cCBvbiB1bm1vdW50XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFudXBDcm9zc1RhYlN5bmMoKTtcbiAgICAgIGNsZWFudXBCYWNrZ3JvdW5kT3B0aW1pemF0aW9uKCk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiA8PntjaGlsZHJlbn08Lz47XG59O1xuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsImluaXRpYWxpemUiLCJzY2hlZHVsZVByb2FjdGl2ZVJlZnJlc2giLCJpbml0aWFsaXplQ3Jvc3NUYWJTeW5jIiwiY2xlYW51cENyb3NzVGFiU3luYyIsImluaXRpYWxpemVCYWNrZ3JvdW5kT3B0aW1pemF0aW9uIiwiY2xlYW51cEJhY2tncm91bmRPcHRpbWl6YXRpb24iLCJUb2tlblJlZnJlc2hQcm92aWRlciIsImNoaWxkcmVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/TokenRefreshProvider.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/messaging/ChatList.tsx":
/*!***********************************************!*\
  !*** ./src/components/messaging/ChatList.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatList: () => (/* binding */ ChatList)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/MessagingContext */ \"(ssr)/./src/contexts/MessagingContext.tsx\");\n/* harmony import */ var _utils_tokenManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/tokenManager */ \"(ssr)/./src/utils/tokenManager.ts\");\n/* __next_internal_client_entry_do_not_use__ ChatList auto */ \n\n\n\nconst ChatList = ({ onSelectChat, selectedMatchId })=>{\n    const [matches, setMatches] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentUserId, setCurrentUserId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const { connectionStatus, onlineStatus, addMessageListener, addReadReceiptListener } = (0,_contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_2__.useMessaging)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Get current user ID from token\n        const token = localStorage.getItem(\"accessToken\");\n        if (token) {\n            const payload = (0,_utils_tokenManager__WEBPACK_IMPORTED_MODULE_3__.parseJWT)(token);\n            if (payload) {\n                setCurrentUserId(payload.id);\n            } else {\n                console.error(\"Error decoding token in ChatList\");\n            }\n        }\n        fetchMatches();\n    }, []);\n    // Listen for new messages to update last message\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const unsubscribe = addMessageListener((message)=>{\n            setMatches((prev)=>prev.map((match)=>{\n                    if (match.matchId === message.matchId) {\n                        // Only increment unread if message is from the other user AND chat is not selected\n                        const shouldIncrementUnread = message.senderId === match.user.id && selectedMatchId !== match.matchId;\n                        return {\n                            ...match,\n                            lastMessage: {\n                                id: message.id,\n                                content: message.content,\n                                senderId: message.senderId,\n                                createdAt: message.createdAt,\n                                sender: {\n                                    displayName: message.sender?.displayName || message.sender?.name || \"User\"\n                                }\n                            },\n                            unreadCount: shouldIncrementUnread ? match.unreadCount + 1 : match.unreadCount\n                        };\n                    }\n                    return match;\n                }));\n        });\n        return unsubscribe;\n    }, [\n        addMessageListener,\n        selectedMatchId\n    ]);\n    const fetchMatches = async ()=>{\n        try {\n            setLoading(true);\n            const token = localStorage.getItem(\"accessToken\");\n            const isLocalHost =  false && 0;\n            const apiBase = isLocalHost ? \"http://localhost:4000\" : \"http://localhost:4000\" || 0;\n            const authHeader = token?.startsWith(\"Bearer \") ? token : `Bearer ${token}`;\n            const response = await fetch(`${apiBase}/api/messages/matches`, {\n                headers: {\n                    Authorization: authHeader\n                }\n            });\n            const data = await response.json();\n            if (data.success) {\n                setMatches(data.matches);\n            } else {\n                setError(data.error || \"Failed to fetch matches\");\n            }\n        } catch (err) {\n            console.error(\"Error fetching matches:\", err);\n            setError(\"Failed to load conversations\");\n        } finally{\n            setLoading(false);\n        }\n    };\n    const formatLastMessageTime = (timestamp)=>{\n        const date = new Date(timestamp);\n        const now = new Date();\n        const diffMs = now.getTime() - date.getTime();\n        const diffMins = Math.floor(diffMs / 60000);\n        const diffHours = Math.floor(diffMs / 3600000);\n        const diffDays = Math.floor(diffMs / 86400000);\n        if (diffMins < 1) return \"Just now\";\n        if (diffMins < 60) return `${diffMins}m`;\n        if (diffHours < 24) return `${diffHours}h`;\n        if (diffDays < 7) return `${diffDays}d`;\n        return date.toLocaleDateString();\n    };\n    const truncateMessage = (text, maxLength = 50)=>{\n        if (text.length <= maxLength) return text;\n        return text.substring(0, maxLength) + \"...\";\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full bg-white border-r\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 border-b\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-xl font-bold\",\n                            children: \"Messages\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                            lineNumber: 147,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-xs mt-1 text-gray-500\",\n                            children: [\n                                connectionStatus === \"connected\" && \"\\uD83D\\uDFE2 Connected\",\n                                connectionStatus === \"connecting\" && \"\\uD83D\\uDFE1 Connecting...\",\n                                connectionStatus === \"reconnecting\" && \"\\uD83D\\uDFE0 Reconnecting...\",\n                                connectionStatus === \"disconnected\" && \"\\uD83D\\uDD34 Disconnected\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                            lineNumber: 148,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                    lineNumber: 146,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-center flex-1\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                        lineNumber: 156,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                    lineNumber: 155,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n            lineNumber: 145,\n            columnNumber: 7\n        }, undefined);\n    }\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full bg-white border-r\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 border-b\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-bold\",\n                        children: \"Messages\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                        lineNumber: 166,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                    lineNumber: 165,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col items-center justify-center flex-1 p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-red-500 text-center\",\n                            children: error\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                            lineNumber: 169,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: fetchMatches,\n                            className: \"mt-4 px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600\",\n                            children: \"Retry\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                            lineNumber: 170,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                    lineNumber: 168,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n            lineNumber: 164,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-full bg-white border-r\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-4 border-b\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-bold\",\n                        children: \"Messages\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                        lineNumber: 185,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xs mt-1 text-gray-500\",\n                        children: [\n                            connectionStatus === \"connected\" && \"\\uD83D\\uDFE2 Connected\",\n                            connectionStatus === \"connecting\" && \"\\uD83D\\uDFE1 Connecting...\",\n                            connectionStatus === \"reconnecting\" && \"\\uD83D\\uDFE0 Reconnecting...\",\n                            connectionStatus === \"disconnected\" && \"\\uD83D\\uDD34 Disconnected\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                        lineNumber: 186,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                lineNumber: 184,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-y-auto\",\n                children: matches.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col items-center justify-center h-full p-4 text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-500\",\n                            children: \"No matches yet\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                            lineNumber: 198,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-gray-400 mt-2\",\n                            children: \"Start swiping to find your match!\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                            lineNumber: 199,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                    lineNumber: 197,\n                    columnNumber: 11\n                }, undefined) : matches.map((match)=>{\n                    const isOnline = onlineStatus[match.user.id] || false;\n                    const isSelected = selectedMatchId === match.matchId;\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        onClick: ()=>{\n                            onSelectChat(match.matchId, match.user);\n                            // Clear unread count when chat is selected\n                            if (match.unreadCount > 0) {\n                                setMatches((prev)=>prev.map((m)=>m.matchId === match.matchId ? {\n                                            ...m,\n                                            unreadCount: 0\n                                        } : m));\n                            }\n                        },\n                        className: `p-4 border-b cursor-pointer transition-colors ${isSelected ? \"bg-pink-50\" : \"hover:bg-gray-50\"}`,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-start gap-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative flex-shrink-0\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"w-14 h-14 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold text-xl overflow-hidden\",\n                                            children: match.user.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: match.user.profileImage,\n                                                alt: match.user.displayName,\n                                                className: \"w-full h-full object-cover\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                                lineNumber: 230,\n                                                columnNumber: 25\n                                            }, undefined) : match.user.displayName.charAt(0).toUpperCase()\n                                        }, void 0, false, {\n                                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                            lineNumber: 228,\n                                            columnNumber: 21\n                                        }, undefined),\n                                        isOnline && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                            lineNumber: 241,\n                                            columnNumber: 23\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                    lineNumber: 227,\n                                    columnNumber: 19\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 min-w-0\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center justify-between\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                    className: \"font-semibold text-gray-900 truncate\",\n                                                    children: match.user.displayName\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                                    lineNumber: 248,\n                                                    columnNumber: 23\n                                                }, undefined),\n                                                match.lastMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-xs text-gray-500 flex-shrink-0 ml-2\",\n                                                    children: formatLastMessageTime(match.lastMessage.createdAt)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                                    lineNumber: 252,\n                                                    columnNumber: 25\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                            lineNumber: 247,\n                                            columnNumber: 21\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-xs text-gray-500 mt-0.5\",\n                                            children: match.user.department && match.user.year && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                children: [\n                                                    match.user.department,\n                                                    \"  Year \",\n                                                    match.user.year\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                                lineNumber: 260,\n                                                columnNumber: 25\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                            lineNumber: 258,\n                                            columnNumber: 21\n                                        }, undefined),\n                                        match.lastMessage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center justify-between mt-1\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm text-gray-600 truncate\",\n                                                    children: truncateMessage(match.lastMessage.content)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                                    lineNumber: 268,\n                                                    columnNumber: 25\n                                                }, undefined),\n                                                match.unreadCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"flex-shrink-0 ml-2 bg-pink-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center\",\n                                                    children: match.unreadCount > 9 ? \"9+\" : match.unreadCount\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                                    lineNumber: 272,\n                                                    columnNumber: 27\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                            lineNumber: 267,\n                                            columnNumber: 23\n                                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-sm text-gray-400 italic mt-1\",\n                                            children: \"Start a conversation...\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                            lineNumber: 278,\n                                            columnNumber: 23\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                                    lineNumber: 246,\n                                    columnNumber: 19\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                            lineNumber: 225,\n                            columnNumber: 17\n                        }, undefined)\n                    }, match.matchId, false, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                        lineNumber: 209,\n                        columnNumber: 15\n                    }, undefined);\n                })\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n                lineNumber: 195,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatList.tsx\",\n        lineNumber: 182,\n        columnNumber: 5\n    }, undefined);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9tZXNzYWdpbmcvQ2hhdExpc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBRW1EO0FBQ1E7QUFDWDtBQTZCekMsTUFBTUssV0FBb0MsQ0FBQyxFQUFFQyxZQUFZLEVBQUVDLGVBQWUsRUFBRTtJQUNqRixNQUFNLENBQUNDLFNBQVNDLFdBQVcsR0FBR1AsK0NBQVFBLENBQVUsRUFBRTtJQUNsRCxNQUFNLENBQUNRLFNBQVNDLFdBQVcsR0FBR1QsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDVSxPQUFPQyxTQUFTLEdBQUdYLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUNZLGVBQWVDLGlCQUFpQixHQUFHYiwrQ0FBUUEsQ0FBZ0I7SUFDbEUsTUFBTSxFQUFFYyxnQkFBZ0IsRUFBRUMsWUFBWSxFQUFFQyxrQkFBa0IsRUFBRUMsc0JBQXNCLEVBQUUsR0FBR2hCLHdFQUFZQTtJQUVuR0YsZ0RBQVNBLENBQUM7UUFDUixpQ0FBaUM7UUFDakMsTUFBTW1CLFFBQVFDLGFBQWFDLE9BQU8sQ0FBQztRQUNuQyxJQUFJRixPQUFPO1lBQ1QsTUFBTUcsVUFBVW5CLDZEQUFRQSxDQUFDZ0I7WUFDekIsSUFBSUcsU0FBUztnQkFDWFIsaUJBQWlCUSxRQUFRQyxFQUFFO1lBQzdCLE9BQU87Z0JBQ0xDLFFBQVFiLEtBQUssQ0FBQztZQUNoQjtRQUNGO1FBQ0FjO0lBQ0YsR0FBRyxFQUFFO0lBRUwsaURBQWlEO0lBQ2pEekIsZ0RBQVNBLENBQUM7UUFDUixNQUFNMEIsY0FBY1QsbUJBQW1CLENBQUNVO1lBQ3RDbkIsV0FBVyxDQUFDb0IsT0FDVkEsS0FBS0MsR0FBRyxDQUFDLENBQUNDO29CQUNSLElBQUlBLE1BQU1DLE9BQU8sS0FBS0osUUFBUUksT0FBTyxFQUFFO3dCQUNyQyxtRkFBbUY7d0JBQ25GLE1BQU1DLHdCQUNKTCxRQUFRTSxRQUFRLEtBQUtILE1BQU1JLElBQUksQ0FBQ1gsRUFBRSxJQUNsQ2pCLG9CQUFvQndC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SUFBSTs7Ozs7Ozs7Ozs7O3dDQUtwRG5FLE1BQU1LLFdBQVcsaUJBQ2hCLDhEQUFDNEM7NENBQUlDLFdBQVU7OzhEQUNiLDhEQUFDRTtvREFBRUYsV0FBVTs4REFDVk4sZ0JBQWdCNUMsTUFBTUssV0FBVyxDQUFDQyxPQUFPOzs7Ozs7Z0RBRTNDTixNQUFNVyxXQUFXLEdBQUcsbUJBQ25CLDhEQUFDc0Q7b0RBQUtmLFdBQVU7OERBQ2JsRCxNQUFNVyxXQUFXLEdBQUcsSUFBSSxPQUFPWCxNQUFNVyxXQUFXOzs7Ozs7Ozs7OztzRUFLdkQsOERBQUN5Qzs0Q0FBRUYsV0FBVTtzREFBb0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt1QkFwRWxEbEQsTUFBTUMsT0FBTzs7Ozs7Z0JBNEV4Qjs7Ozs7Ozs7Ozs7O0FBS1YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2plY3JjLWRhdGluZy1mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL21lc3NhZ2luZy9DaGF0TGlzdC50c3g/ZTUxZiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlTWVzc2FnaW5nIH0gZnJvbSAnQC9jb250ZXh0cy9NZXNzYWdpbmdDb250ZXh0JztcbmltcG9ydCB7IHBhcnNlSldUIH0gZnJvbSAnQC91dGlscy90b2tlbk1hbmFnZXInO1xuXG5pbnRlcmZhY2UgTWF0Y2gge1xuICBtYXRjaElkOiBzdHJpbmc7XG4gIHVzZXI6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gICAgZGVwYXJ0bWVudDogc3RyaW5nIHwgbnVsbDtcbiAgICB5ZWFyOiBudW1iZXIgfCBudWxsO1xuICAgIHByb2ZpbGVJbWFnZTogc3RyaW5nIHwgbnVsbDtcbiAgfTtcbiAgbGFzdE1lc3NhZ2U6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBzZW5kZXJJZDogc3RyaW5nO1xuICAgIGNyZWF0ZWRBdDogc3RyaW5nO1xuICAgIHNlbmRlcjoge1xuICAgICAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgICB9O1xuICB9IHwgbnVsbDtcbiAgdW5yZWFkQ291bnQ6IG51bWJlcjtcbiAgbWF0Y2hlZEF0OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBDaGF0TGlzdFByb3BzIHtcbiAgb25TZWxlY3RDaGF0OiAobWF0Y2hJZDogc3RyaW5nLCB1c2VyOiBNYXRjaFsndXNlciddKSA9PiB2b2lkO1xuICBzZWxlY3RlZE1hdGNoSWQ6IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBjb25zdCBDaGF0TGlzdDogUmVhY3QuRkM8Q2hhdExpc3RQcm9wcz4gPSAoeyBvblNlbGVjdENoYXQsIHNlbGVjdGVkTWF0Y2hJZCB9KSA9PiB7XG4gIGNvbnN0IFttYXRjaGVzLCBzZXRNYXRjaGVzXSA9IHVzZVN0YXRlPE1hdGNoW10+KFtdKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtjdXJyZW50VXNlcklkLCBzZXRDdXJyZW50VXNlcklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCB7IGNvbm5lY3Rpb25TdGF0dXMsIG9ubGluZVN0YXR1cywgYWRkTWVzc2FnZUxpc3RlbmVyLCBhZGRSZWFkUmVjZWlwdExpc3RlbmVyIH0gPSB1c2VNZXNzYWdpbmcoKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEdldCBjdXJyZW50IHVzZXIgSUQgZnJvbSB0b2tlblxuICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBjb25zdCBwYXlsb2FkID0gcGFyc2VKV1QodG9rZW4pO1xuICAgICAgaWYgKHBheWxvYWQpIHtcbiAgICAgICAgc2V0Q3VycmVudFVzZXJJZChwYXlsb2FkLmlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlY29kaW5nIHRva2VuIGluIENoYXRMaXN0Jyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZldGNoTWF0Y2hlcygpO1xuICB9LCBbXSk7XG5cbiAgLy8gTGlzdGVuIGZvciBuZXcgbWVzc2FnZXMgdG8gdXBkYXRlIGxhc3QgbWVzc2FnZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gYWRkTWVzc2FnZUxpc3RlbmVyKChtZXNzYWdlKSA9PiB7XG4gICAgICBzZXRNYXRjaGVzKChwcmV2KSA9PlxuICAgICAgICBwcmV2Lm1hcCgobWF0Y2gpID0+IHtcbiAgICAgICAgICBpZiAobWF0Y2gubWF0Y2hJZCA9PT0gbWVzc2FnZS5tYXRjaElkKSB7XG4gICAgICAgICAgICAvLyBPbmx5IGluY3JlbWVudCB1bnJlYWQgaWYgbWVzc2FnZSBpcyBmcm9tIHRoZSBvdGhlciB1c2VyIEFORCBjaGF0IGlzIG5vdCBzZWxlY3RlZFxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkSW5jcmVtZW50VW5yZWFkID1cbiAgICAgICAgICAgICAgbWVzc2FnZS5zZW5kZXJJZCA9PT0gbWF0Y2gudXNlci5pZCAmJlxuICAgICAgICAgICAgICBzZWxlY3RlZE1hdGNoSWQgIT09IG1hdGNoLm1hdGNoSWQ7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLm1hdGNoLFxuICAgICAgICAgICAgICBsYXN0TWVzc2FnZToge1xuICAgICAgICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICAgICAgICBzZW5kZXJJZDogbWVzc2FnZS5zZW5kZXJJZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG1lc3NhZ2UuY3JlYXRlZEF0LFxuICAgICAgICAgICAgICAgIHNlbmRlcjoge1xuICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IChtZXNzYWdlIGFzIGFueSkuc2VuZGVyPy5kaXNwbGF5TmFtZSB8fCAobWVzc2FnZSBhcyBhbnkpLnNlbmRlcj8ubmFtZSB8fCAnVXNlcicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdW5yZWFkQ291bnQ6IHNob3VsZEluY3JlbWVudFVucmVhZCA/IG1hdGNoLnVucmVhZENvdW50ICsgMSA6IG1hdGNoLnVucmVhZENvdW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSwgW2FkZE1lc3NhZ2VMaXN0ZW5lciwgc2VsZWN0ZWRNYXRjaElkXSk7XG5cbiAgY29uc3QgZmV0Y2hNYXRjaGVzID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKTtcbiAgICAgIGNvbnN0IGlzTG9jYWxIb3N0ID0gKFxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBbJ2xvY2FsaG9zdCcsICcxMjcuMC4wLjEnLCAnWzo6MV0nLCAnMC4wLjAuMCddLmluY2x1ZGVzKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSlcbiAgICAgICk7XG4gICAgICBjb25zdCBhcGlCYXNlID0gaXNMb2NhbEhvc3RcbiAgICAgICAgPyAnaHR0cDovL2xvY2FsaG9zdDo0MDAwJ1xuICAgICAgICA6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHBzOi8vamVjcmMtZGF0aW5nLWJhY2tlbmQub25yZW5kZXIuY29tJztcbiAgICAgIGNvbnN0IGF1dGhIZWFkZXIgPSB0b2tlbj8uc3RhcnRzV2l0aCgnQmVhcmVyICcpXG4gICAgICAgID8gdG9rZW5cbiAgICAgICAgOiBgQmVhcmVyICR7dG9rZW59YDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZX0vYXBpL21lc3NhZ2VzL21hdGNoZXNgLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBhdXRoSGVhZGVyLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgc2V0TWF0Y2hlcyhkYXRhLm1hdGNoZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RXJyb3IoZGF0YS5lcnJvciB8fCAnRmFpbGVkIHRvIGZldGNoIG1hdGNoZXMnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG1hdGNoZXM6JywgZXJyKTtcbiAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gbG9hZCBjb252ZXJzYXRpb25zJyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBmb3JtYXRMYXN0TWVzc2FnZVRpbWUgPSAodGltZXN0YW1wOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGRpZmZNcyA9IG5vdy5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWUoKTtcbiAgICBjb25zdCBkaWZmTWlucyA9IE1hdGguZmxvb3IoZGlmZk1zIC8gNjAwMDApO1xuICAgIGNvbnN0IGRpZmZIb3VycyA9IE1hdGguZmxvb3IoZGlmZk1zIC8gMzYwMDAwMCk7XG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKGRpZmZNcyAvIDg2NDAwMDAwKTtcblxuICAgIGlmIChkaWZmTWlucyA8IDEpIHJldHVybiAnSnVzdCBub3cnO1xuICAgIGlmIChkaWZmTWlucyA8IDYwKSByZXR1cm4gYCR7ZGlmZk1pbnN9bWA7XG4gICAgaWYgKGRpZmZIb3VycyA8IDI0KSByZXR1cm4gYCR7ZGlmZkhvdXJzfWhgO1xuICAgIGlmIChkaWZmRGF5cyA8IDcpIHJldHVybiBgJHtkaWZmRGF5c31kYDtcbiAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgfTtcblxuICBjb25zdCB0cnVuY2F0ZU1lc3NhZ2UgPSAodGV4dDogc3RyaW5nLCBtYXhMZW5ndGg6IG51bWJlciA9IDUwKSA9PiB7XG4gICAgaWYgKHRleHQubGVuZ3RoIDw9IG1heExlbmd0aCkgcmV0dXJuIHRleHQ7XG4gICAgcmV0dXJuIHRleHQuc3Vic3RyaW5nKDAsIG1heExlbmd0aCkgKyAnLi4uJztcbiAgfTtcblxuICBpZiAobG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIGJnLXdoaXRlIGJvcmRlci1yXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci1iXCI+XG4gICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkXCI+TWVzc2FnZXM8L2gyPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBtdC0xIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgIHtjb25uZWN0aW9uU3RhdHVzID09PSAnY29ubmVjdGVkJyAmJiAn8J+foiBDb25uZWN0ZWQnfVxuICAgICAgICAgICAge2Nvbm5lY3Rpb25TdGF0dXMgPT09ICdjb25uZWN0aW5nJyAmJiAn8J+foSBDb25uZWN0aW5nLi4uJ31cbiAgICAgICAgICAgIHtjb25uZWN0aW9uU3RhdHVzID09PSAncmVjb25uZWN0aW5nJyAmJiAn8J+foCBSZWNvbm5lY3RpbmcuLi4nfVxuICAgICAgICAgICAge2Nvbm5lY3Rpb25TdGF0dXMgPT09ICdkaXNjb25uZWN0ZWQnICYmICfwn5S0IERpc2Nvbm5lY3RlZCd9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGZsZXgtMVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLXBpbmstNTAwXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIGJnLXdoaXRlIGJvcmRlci1yXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci1iXCI+XG4gICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkXCI+TWVzc2FnZXM8L2gyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBmbGV4LTEgcC00XCI+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNTAwIHRleHQtY2VudGVyXCI+e2Vycm9yfTwvcD5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtmZXRjaE1hdGNoZXN9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtdC00IHB4LTQgcHktMiBiZy1waW5rLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgaG92ZXI6YmctcGluay02MDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIFJldHJ5XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCBiZy13aGl0ZSBib3JkZXItclwiPlxuICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci1iXCI+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZFwiPk1lc3NhZ2VzPC9oMj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIG10LTEgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgIHtjb25uZWN0aW9uU3RhdHVzID09PSAnY29ubmVjdGVkJyAmJiAn8J+foiBDb25uZWN0ZWQnfVxuICAgICAgICAgIHtjb25uZWN0aW9uU3RhdHVzID09PSAnY29ubmVjdGluZycgJiYgJ/Cfn6EgQ29ubmVjdGluZy4uLid9XG4gICAgICAgICAge2Nvbm5lY3Rpb25TdGF0dXMgPT09ICdyZWNvbm5lY3RpbmcnICYmICfwn5+gIFJlY29ubmVjdGluZy4uLid9XG4gICAgICAgICAge2Nvbm5lY3Rpb25TdGF0dXMgPT09ICdkaXNjb25uZWN0ZWQnICYmICfwn5S0IERpc2Nvbm5lY3RlZCd9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBNYXRjaCBMaXN0ICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICAgIHttYXRjaGVzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGgtZnVsbCBwLTQgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDBcIj5ObyBtYXRjaGVzIHlldDwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTQwMCBtdC0yXCI+XG4gICAgICAgICAgICAgIFN0YXJ0IHN3aXBpbmcgdG8gZmluZCB5b3VyIG1hdGNoIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIG1hdGNoZXMubWFwKChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNPbmxpbmUgPSBvbmxpbmVTdGF0dXNbbWF0Y2gudXNlci5pZF0gfHwgZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gc2VsZWN0ZWRNYXRjaElkID09PSBtYXRjaC5tYXRjaElkO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXttYXRjaC5tYXRjaElkfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIG9uU2VsZWN0Q2hhdChtYXRjaC5tYXRjaElkLCBtYXRjaC51c2VyKTtcbiAgICAgICAgICAgICAgICAgIC8vIENsZWFyIHVucmVhZCBjb3VudCB3aGVuIGNoYXQgaXMgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgIGlmIChtYXRjaC51bnJlYWRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWF0Y2hlcygocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICBwcmV2Lm1hcCgobSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIG0ubWF0Y2hJZCA9PT0gbWF0Y2gubWF0Y2hJZCA/IHsgLi4ubSwgdW5yZWFkQ291bnQ6IDAgfSA6IG1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BwLTQgYm9yZGVyLWIgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMgJHtpc1NlbGVjdGVkID8gJ2JnLXBpbmstNTAnIDogJ2hvdmVyOmJnLWdyYXktNTAnXG4gICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1zdGFydCBnYXAtM1wiPlxuICAgICAgICAgICAgICAgICAgey8qIFByb2ZpbGUgSW1hZ2UgKi99XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTE0IGgtMTQgcm91bmRlZC1mdWxsIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tcGluay00MDAgdG8tcHVycGxlLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtYm9sZCB0ZXh0LXhsIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgIHttYXRjaC51c2VyLnByb2ZpbGVJbWFnZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXttYXRjaC51c2VyLnByb2ZpbGVJbWFnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXttYXRjaC51c2VyLmRpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaC51c2VyLmRpc3BsYXlOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHsvKiBPbmxpbmUgaW5kaWNhdG9yICovfVxuICAgICAgICAgICAgICAgICAgICB7aXNPbmxpbmUgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTQgaC00IGJnLWdyZWVuLTUwMCBib3JkZXItMiBib3JkZXItd2hpdGUgcm91bmRlZC1mdWxsXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgey8qIE1hdGNoIEluZm8gKi99XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCB0cnVuY2F0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge21hdGNoLnVzZXIuZGlzcGxheU5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICB7bWF0Y2gubGFzdE1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIGZsZXgtc2hyaW5rLTAgbWwtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0TGFzdE1lc3NhZ2VUaW1lKG1hdGNoLmxhc3RNZXNzYWdlLmNyZWF0ZWRBdCl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMC41XCI+XG4gICAgICAgICAgICAgICAgICAgICAge21hdGNoLnVzZXIuZGVwYXJ0bWVudCAmJiBtYXRjaC51c2VyLnllYXIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHttYXRjaC51c2VyLmRlcGFydG1lbnR9IOKAoiBZZWFyIHttYXRjaC51c2VyLnllYXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAge21hdGNoLmxhc3RNZXNzYWdlID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG10LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMCB0cnVuY2F0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7dHJ1bmNhdGVNZXNzYWdlKG1hdGNoLmxhc3RNZXNzYWdlLmNvbnRlbnQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAge21hdGNoLnVucmVhZENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgbWwtMiBiZy1waW5rLTUwMCB0ZXh0LXdoaXRlIHRleHQteHMgZm9udC1ib2xkIHJvdW5kZWQtZnVsbCB3LTUgaC01IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge21hdGNoLnVucmVhZENvdW50ID4gOSA/ICc5KycgOiBtYXRjaC51bnJlYWRDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS00MDAgaXRhbGljIG10LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0IGEgY29udmVyc2F0aW9uLi4uXG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KVxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VNZXNzYWdpbmciLCJwYXJzZUpXVCIsIkNoYXRMaXN0Iiwib25TZWxlY3RDaGF0Iiwic2VsZWN0ZWRNYXRjaElkIiwibWF0Y2hlcyIsInNldE1hdGNoZXMiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJjdXJyZW50VXNlcklkIiwic2V0Q3VycmVudFVzZXJJZCIsImNvbm5lY3Rpb25TdGF0dXMiLCJvbmxpbmVTdGF0dXMiLCJhZGRNZXNzYWdlTGlzdGVuZXIiLCJhZGRSZWFkUmVjZWlwdExpc3RlbmVyIiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGF5bG9hZCIsImlkIiwiY29uc29sZSIsImZldGNoTWF0Y2hlcyIsInVuc3Vic2NyaWJlIiwibWVzc2FnZSIsInByZXYiLCJtYXAiLCJtYXRjaCIsIm1hdGNoSWQiLCJzaG91bGRJbmNyZW1lbnRVbnJlYWQiLCJzZW5kZXJJZCIsInVzZXIiLCJsYXN0TWVzc2FnZSIsImNvbnRlbnQiLCJjcmVhdGVkQXQiLCJzZW5kZXIiLCJkaXNwbGF5TmFtZSIsIm5hbWUiLCJ1bnJlYWRDb3VudCIsImlzTG9jYWxIb3N0IiwiaW5jbHVkZXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwiYXBpQmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwiYXV0aEhlYWRlciIsInN0YXJ0c1dpdGgiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJkYXRhIiwianNvbiIsInN1Y2Nlc3MiLCJlcnIiLCJmb3JtYXRMYXN0TWVzc2FnZVRpbWUiLCJ0aW1lc3RhbXAiLCJkYXRlIiwiRGF0ZSIsIm5vdyIsImRpZmZNcyIsImdldFRpbWUiLCJkaWZmTWlucyIsIk1hdGgiLCJmbG9vciIsImRpZmZIb3VycyIsImRpZmZEYXlzIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwidHJ1bmNhdGVNZXNzYWdlIiwidGV4dCIsIm1heExlbmd0aCIsImxlbmd0aCIsInN1YnN0cmluZyIsImRpdiIsImNsYXNzTmFtZSIsImgyIiwicCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJpc09ubGluZSIsImlzU2VsZWN0ZWQiLCJtIiwicHJvZmlsZUltYWdlIiwiaW1nIiwic3JjIiwiYWx0IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJoMyIsInNwYW4iLCJkZXBhcnRtZW50IiwieWVhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/messaging/ChatList.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/messaging/ChatWindow.tsx":
/*!*************************************************!*\
  !*** ./src/components/messaging/ChatWindow.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatWindow: () => (/* binding */ ChatWindow)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/MessagingContext */ \"(ssr)/./src/contexts/MessagingContext.tsx\");\n/* harmony import */ var _MessageInput__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MessageInput */ \"(ssr)/./src/components/messaging/MessageInput.tsx\");\n/* harmony import */ var _MessageStatus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MessageStatus */ \"(ssr)/./src/components/messaging/MessageStatus.tsx\");\n/* __next_internal_client_entry_do_not_use__ ChatWindow auto */ \n\n\n\n\nconst ChatWindow = ({ matchId, user, currentUserId })=>{\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasMore, setHasMore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { sendMessage, markAsDelivered, markAsRead, addMessageListener, addTypingListener, typingUsers, onlineStatus } = (0,_contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_2__.useMessaging)();\n    // Fetch initial messages\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        fetchMessages();\n        markAsDelivered(matchId);\n        markAsRead(matchId);\n    }, [\n        matchId\n    ]);\n    // Listen for new messages\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const unsubscribe = addMessageListener((message)=>{\n            if (message.matchId === matchId) {\n                setMessages((prev)=>{\n                    // Avoid duplicates\n                    if (prev.find((m)=>m.id === message.id)) return prev;\n                    // Use the user prop for the other user's profile image\n                    const senderProfileImage = message.senderId === user.id ? user.profileImage : message.sender?.profileImage ?? null;\n                    return [\n                        ...prev,\n                        {\n                            id: message.id,\n                            matchId: message.matchId,\n                            senderId: message.senderId,\n                            content: message.content,\n                            deliveredAt: message.deliveredAt,\n                            readAt: message.readAt,\n                            createdAt: message.createdAt,\n                            sender: {\n                                id: message.sender?.id || message.senderId,\n                                displayName: message.sender?.displayName || message.sender?.name || user.displayName,\n                                profileImage: senderProfileImage\n                            }\n                        }\n                    ];\n                });\n                // Only mark as read if message is from the other user (not from current user)\n                if (message.senderId === user.id) {\n                    setTimeout(()=>markAsRead(matchId), 100);\n                }\n            }\n        });\n        return unsubscribe;\n    }, [\n        matchId,\n        addMessageListener,\n        markAsRead,\n        user,\n        currentUserId\n    ]);\n    const fetchMessages = async ()=>{\n        try {\n            setLoading(true);\n            setError(null);\n            const token = localStorage.getItem(\"accessToken\");\n            const isLocalHost =  false && 0;\n            const apiBase = isLocalHost ? \"http://localhost:4000\" : \"http://localhost:4000\" || 0;\n            const authHeader = token?.startsWith(\"Bearer \") ? token : `Bearer ${token}`;\n            const response = await fetch(`${apiBase}/api/messages/${matchId}`, {\n                headers: {\n                    Authorization: authHeader\n                }\n            });\n            const data = await response.json();\n            if (data.success) {\n                const mapped = data.messages.map((m)=>({\n                        id: m.id,\n                        matchId: m.matchId,\n                        senderId: m.senderId,\n                        content: m.content,\n                        deliveredAt: m.deliveredAt,\n                        readAt: m.readAt,\n                        createdAt: m.createdAt,\n                        sender: {\n                            id: m.sender.id,\n                            displayName: m.sender.displayName,\n                            profileImage: m.sender.profileImage ?? null\n                        }\n                    }));\n                setMessages(mapped);\n                setHasMore(data.hasMore);\n            } else {\n                setError(data.error || \"Failed to fetch messages\");\n            }\n        } catch (err) {\n            console.error(\"Error fetching messages:\", err);\n            setError(\"Failed to load messages\");\n        } finally{\n            setLoading(false);\n        }\n    };\n    const scrollToBottom = ()=>{\n        messagesEndRef.current?.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    const handleSendMessage = (content)=>{\n        sendMessage(matchId, content);\n    };\n    const formatMessageTime = (timestamp)=>{\n        const date = new Date(timestamp);\n        const now = new Date();\n        const diffDays = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60 * 24));\n        if (diffDays === 0) {\n            return date.toLocaleTimeString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\"\n            });\n        } else if (diffDays === 1) {\n            return \"Yesterday \" + date.toLocaleTimeString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\"\n            });\n        } else if (diffDays < 7) {\n            return date.toLocaleDateString([], {\n                weekday: \"short\"\n            }) + \" \" + date.toLocaleTimeString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\"\n            });\n        } else {\n            return date.toLocaleDateString([], {\n                month: \"short\",\n                day: \"numeric\"\n            }) + \" \" + date.toLocaleTimeString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\"\n            });\n        }\n    };\n    const isOnline = onlineStatus[user.id] || false;\n    const isTyping = typingUsers.some((t)=>t.matchId === matchId && t.userId === user.id);\n    // Scroll to bottom on new messages or typing indicator\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        scrollToBottom();\n    }, [\n        messages,\n        isTyping\n    ]);\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full w-full bg-gray-50\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white border-b p-4 flex items-center gap-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold overflow-hidden\",\n                                children: user.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: user.profileImage,\n                                    alt: user.displayName,\n                                    className: \"w-full h-full object-cover\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 201,\n                                    columnNumber: 17\n                                }, undefined) : user.displayName.charAt(0).toUpperCase()\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 199,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 198,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                    className: \"font-semibold text-gray-900\",\n                                    children: user.displayName\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 208,\n                                    columnNumber: 13\n                                }, undefined),\n                                user.department && user.year && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-sm text-gray-500\",\n                                    children: [\n                                        user.department,\n                                        \"  Year \",\n                                        user.year\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 210,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 207,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 197,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 flex items-center justify-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                        lineNumber: 219,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 218,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n            lineNumber: 195,\n            columnNumber: 7\n        }, undefined);\n    }\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full w-full bg-gray-50\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white border-b p-4 flex items-center gap-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold overflow-hidden\",\n                                children: user.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: user.profileImage,\n                                    alt: user.displayName,\n                                    className: \"w-full h-full object-cover\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 233,\n                                    columnNumber: 17\n                                }, undefined) : user.displayName.charAt(0).toUpperCase()\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 231,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 230,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"font-semibold text-gray-900\",\n                                children: user.displayName\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 240,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 239,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 229,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 flex flex-col items-center justify-center p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-red-500 text-center\",\n                            children: error\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 246,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: fetchMessages,\n                            className: \"mt-4 px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600\",\n                            children: \"Retry\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 247,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 245,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n            lineNumber: 227,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-full w-full bg-gray-50\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white border-b p-4 flex items-center gap-3\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"relative\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold overflow-hidden\",\n                                children: user.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: user.profileImage,\n                                    alt: user.displayName,\n                                    className: \"w-full h-full object-cover\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 265,\n                                    columnNumber: 15\n                                }, undefined) : user.displayName.charAt(0).toUpperCase()\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 263,\n                                columnNumber: 11\n                            }, undefined),\n                            isOnline && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full\"\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 271,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                        lineNumber: 262,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"font-semibold text-gray-900\",\n                                children: user.displayName\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 275,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-2 text-sm text-gray-500\",\n                                children: [\n                                    isOnline ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-green-600\",\n                                        children: \"Online\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 278,\n                                        columnNumber: 15\n                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"Offline\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 280,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    user.department && user.year && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                children: \"\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 284,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                children: [\n                                                    user.department,\n                                                    \"  Year \",\n                                                    user.year\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 285,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 276,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                        lineNumber: 274,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                lineNumber: 261,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: messagesContainerRef,\n                className: \"flex-1 overflow-y-auto p-4 space-y-1\",\n                children: messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col items-center justify-center h-full text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-20 h-20 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-3xl mb-4\",\n                            children: \"\\uD83D\\uDCAC\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 299,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-500 font-medium\",\n                            children: \"No messages yet\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 302,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-gray-400 mt-2\",\n                            children: [\n                                \"Say hi to \",\n                                user.displayName,\n                                \" to start the conversation!\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 303,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 298,\n                    columnNumber: 11\n                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        messages.map((message, index)=>{\n                            const isOwnMessage = message.senderId === currentUserId;\n                            const showAvatar = index === 0 || messages[index - 1].senderId !== message.senderId;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: `flex ${isOwnMessage ? \"justify-end\" : \"justify-start\"} gap-2 ${showAvatar ? \"mt-3\" : \"mt-0.5\"}`,\n                                children: [\n                                    !isOwnMessage && showAvatar && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-8 h-8 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-sm font-bold overflow-hidden flex-shrink-0\",\n                                        children: message.sender.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: message.sender.profileImage,\n                                            alt: message.sender.displayName,\n                                            className: \"w-full h-full object-cover\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                            lineNumber: 322,\n                                            columnNumber: 25\n                                        }, undefined) : message.sender.displayName.charAt(0).toUpperCase()\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 320,\n                                        columnNumber: 21\n                                    }, undefined),\n                                    !isOwnMessage && !showAvatar && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-8\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 332,\n                                        columnNumber: 52\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: `max-w-[70%] ${isOwnMessage ? \"items-end\" : \"items-start\"}`,\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: `rounded-2xl px-4 py-2 ${isOwnMessage ? \"bg-gradient-to-br from-pink-500 to-purple-500 text-white\" : \"bg-white text-gray-900\"}`,\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm whitespace-pre-wrap break-words\",\n                                                    children: message.content\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                    lineNumber: 341,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 335,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2 mt-1 px-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-gray-500\",\n                                                        children: formatMessageTime(message.createdAt)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                        lineNumber: 346,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    isOwnMessage && message.deliveredAt && !message.readAt && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-gray-400\",\n                                                        title: `Delivered at ${formatMessageTime(message.deliveredAt)}`,\n                                                        children: \" Delivered\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                        lineNumber: 350,\n                                                        columnNumber: 25\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MessageStatus__WEBPACK_IMPORTED_MODULE_4__.MessageStatus, {\n                                                        isOwnMessage: isOwnMessage,\n                                                        deliveredAt: message.deliveredAt,\n                                                        readAt: message.readAt,\n                                                        createdAt: message.createdAt\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                        lineNumber: 354,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 345,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 334,\n                                        columnNumber: 19\n                                    }, undefined)\n                                ]\n                            }, message.id, true, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 315,\n                                columnNumber: 17\n                            }, undefined);\n                        }),\n                        isTyping && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-start gap-2 mt-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-8 h-8 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-sm font-bold overflow-hidden flex-shrink-0\",\n                                    children: user.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: user.profileImage,\n                                        alt: user.displayName,\n                                        className: \"w-full h-full object-cover\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 371,\n                                        columnNumber: 21\n                                    }, undefined) : user.displayName.charAt(0).toUpperCase()\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 369,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"bg-white rounded-2xl px-4 py-2\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex gap-1\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 378,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                style: {\n                                                    animationDelay: \"0.1s\"\n                                                }\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 379,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                style: {\n                                                    animationDelay: \"0.2s\"\n                                                }\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 380,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 377,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 376,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 368,\n                            columnNumber: 15\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            ref: messagesEndRef\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 386,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true)\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                lineNumber: 293,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MessageInput__WEBPACK_IMPORTED_MODULE_3__.MessageInput, {\n                onSendMessage: handleSendMessage,\n                matchId: matchId\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                lineNumber: 392,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n        lineNumber: 259,\n        columnNumber: 5\n    }, undefined);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9tZXNzYWdpbmcvQ2hhdFdpbmRvdy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBRTJEO0FBQ0E7QUFDYjtBQUNFO0FBK0J6QyxNQUFNTyxhQUF3QyxDQUFDLEVBQUVDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxhQUFhLEVBQUU7SUFDcEYsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdWLCtDQUFRQSxDQUFnQixFQUFFO0lBQzFELE1BQU0sQ0FBQ1csU0FBU0MsV0FBVyxHQUFHWiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUNhLE9BQU9DLFNBQVMsR0FBR2QsK0NBQVFBLENBQWdCO0lBQ2xELE1BQU0sQ0FBQ2UsU0FBU0MsV0FBVyxHQUFHaEIsK0NBQVFBLENBQUM7SUFDdkMsTUFBTWlCLGlCQUFpQmhCLDZDQUFNQSxDQUFpQjtJQUM5QyxNQUFNaUIsdUJBQXVCakIsNkNBQU1BLENBQWlCO0lBRXBELE1BQU0sRUFDSmtCLFdBQVcsRUFDWEMsZUFBZSxFQUNmQyxVQUFVLEVBQ1ZDLGtCQUFrQixFQUNsQkMsaUJBQWlCLEVBQ2pCQyxXQUFXLEVBQ1hDLFlBQVksRUFDYixHQUFHdkIsd0VBQVlBO0lBRWhCLHlCQUF5QjtJQUN6QkgsZ0RBQVNBLENBQUM7UUFDUjJCO1FBQ0FOLGdCQUFnQmQ7UUFDaEJlLFdBQVdmO0lBQ2IsR0FBRztRQUFDQTtLQUFRO0lBRVosMEJBQTBCO0lBQzFCUCxnREFBU0EsQ0FBQztRQUNSLE1BQU00QixjQUFjTCxtQkFBbUIsQ0FBQ007WUFDdEMsSUFBSUEsUUFBUXRCLE9BQU8sS0FBS0EsU0FBUztnQkFDL0JJLFlBQVksQ0FBQ21CO29CQUNYLG1CQUFtQjtvQkFDbkIsSUFBSUEsS0FBS0MsSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLEVBQUUsS0FBS0osUUFBUUksRUFBRSxHQUFHLE9BQU9IO29CQUVsRCx1REFBdUQ7b0JBQ3ZELE1BQU1JLHFCQUFxQkwsUUFBUU0sUUFBUSxLQUFL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Olsid2VicGFjazovL2plY3JjLWRhdGluZy1mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL21lc3NhZ2luZy9DaGF0V2luZG93LnRzeD81NmY3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZU1lc3NhZ2luZyB9IGZyb20gJ0AvY29udGV4dHMvTWVzc2FnaW5nQ29udGV4dCc7XG5pbXBvcnQgeyBNZXNzYWdlSW5wdXQgfSBmcm9tICcuL01lc3NhZ2VJbnB1dCc7XG5pbXBvcnQgeyBNZXNzYWdlU3RhdHVzIH0gZnJvbSAnLi9NZXNzYWdlU3RhdHVzJztcblxuaW50ZXJmYWNlIENoYXRNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgbWF0Y2hJZDogc3RyaW5nO1xuICBzZW5kZXJJZDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGRlbGl2ZXJlZEF0OiBzdHJpbmcgfCBudWxsO1xuICByZWFkQXQ6IHN0cmluZyB8IG51bGw7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICBzZW5kZXI6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gICAgcHJvZmlsZUltYWdlOiBzdHJpbmcgfCBudWxsO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBzdHJpbmc7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIGRlcGFydG1lbnQ6IHN0cmluZyB8IG51bGw7XG4gIHllYXI6IG51bWJlciB8IG51bGw7XG4gIHByb2ZpbGVJbWFnZTogc3RyaW5nIHwgbnVsbDtcbn1cblxuaW50ZXJmYWNlIENoYXRXaW5kb3dQcm9wcyB7XG4gIG1hdGNoSWQ6IHN0cmluZztcbiAgdXNlcjogVXNlcjtcbiAgY3VycmVudFVzZXJJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IENoYXRXaW5kb3c6IFJlYWN0LkZDPENoYXRXaW5kb3dQcm9wcz4gPSAoeyBtYXRjaElkLCB1c2VyLCBjdXJyZW50VXNlcklkIH0pID0+IHtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxDaGF0TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaGFzTW9yZSwgc2V0SGFzTW9yZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgbWVzc2FnZXNDb250YWluZXJSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuXG4gIGNvbnN0IHtcbiAgICBzZW5kTWVzc2FnZSxcbiAgICBtYXJrQXNEZWxpdmVyZWQsXG4gICAgbWFya0FzUmVhZCxcbiAgICBhZGRNZXNzYWdlTGlzdGVuZXIsXG4gICAgYWRkVHlwaW5nTGlzdGVuZXIsXG4gICAgdHlwaW5nVXNlcnMsXG4gICAgb25saW5lU3RhdHVzXG4gIH0gPSB1c2VNZXNzYWdpbmcoKTtcblxuICAvLyBGZXRjaCBpbml0aWFsIG1lc3NhZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2hNZXNzYWdlcygpO1xuICAgIG1hcmtBc0RlbGl2ZXJlZChtYXRjaElkKTtcbiAgICBtYXJrQXNSZWFkKG1hdGNoSWQpO1xuICB9LCBbbWF0Y2hJZF0pO1xuXG4gIC8vIExpc3RlbiBmb3IgbmV3IG1lc3NhZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBhZGRNZXNzYWdlTGlzdGVuZXIoKG1lc3NhZ2UpID0+IHtcbiAgICAgIGlmIChtZXNzYWdlLm1hdGNoSWQgPT09IG1hdGNoSWQpIHtcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpOiBDaGF0TWVzc2FnZVtdID0+IHtcbiAgICAgICAgICAvLyBBdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgaWYgKHByZXYuZmluZCgobSkgPT4gbS5pZCA9PT0gbWVzc2FnZS5pZCkpIHJldHVybiBwcmV2O1xuXG4gICAgICAgICAgLy8gVXNlIHRoZSB1c2VyIHByb3AgZm9yIHRoZSBvdGhlciB1c2VyJ3MgcHJvZmlsZSBpbWFnZVxuICAgICAgICAgIGNvbnN0IHNlbmRlclByb2ZpbGVJbWFnZSA9IG1lc3NhZ2Uuc2VuZGVySWQgPT09IHVzZXIuaWRcbiAgICAgICAgICAgID8gdXNlci5wcm9maWxlSW1hZ2VcbiAgICAgICAgICAgIDogbWVzc2FnZS5zZW5kZXI/LnByb2ZpbGVJbWFnZSA/PyBudWxsO1xuXG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgICAgICBtYXRjaElkOiBtZXNzYWdlLm1hdGNoSWQsXG4gICAgICAgICAgICAgIHNlbmRlcklkOiBtZXNzYWdlLnNlbmRlcklkLFxuICAgICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICAgIGRlbGl2ZXJlZEF0OiBtZXNzYWdlLmRlbGl2ZXJlZEF0LFxuICAgICAgICAgICAgICByZWFkQXQ6IG1lc3NhZ2UucmVhZEF0LFxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG1lc3NhZ2UuY3JlYXRlZEF0LFxuICAgICAgICAgICAgICBzZW5kZXI6IHtcbiAgICAgICAgICAgICAgICBpZDogbWVzc2FnZS5zZW5kZXI/LmlkIHx8IG1lc3NhZ2Uuc2VuZGVySWQsXG4gICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IChtZXNzYWdlIGFzIGFueSkuc2VuZGVyPy5kaXNwbGF5TmFtZSB8fCAobWVzc2FnZSBhcyBhbnkpLnNlbmRlcj8ubmFtZSB8fCB1c2VyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgIHByb2ZpbGVJbWFnZTogc2VuZGVyUHJvZmlsZUltYWdlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBPbmx5IG1hcmsgYXMgcmVhZCBpZiBtZXNzYWdlIGlzIGZyb20gdGhlIG90aGVyIHVzZXIgKG5vdCBmcm9tIGN1cnJlbnQgdXNlcilcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VuZGVySWQgPT09IHVzZXIuaWQpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG1hcmtBc1JlYWQobWF0Y2hJZCksIDEwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSwgW21hdGNoSWQsIGFkZE1lc3NhZ2VMaXN0ZW5lciwgbWFya0FzUmVhZCwgdXNlciwgY3VycmVudFVzZXJJZF0pO1xuXG4gIGNvbnN0IGZldGNoTWVzc2FnZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICBzZXRFcnJvcihudWxsKTtcblxuICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKTtcbiAgICAgIGNvbnN0IGlzTG9jYWxIb3N0ID0gKFxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBbJ2xvY2FsaG9zdCcsICcxMjcuMC4wLjEnLCAnWzo6MV0nLCAnMC4wLjAuMCddLmluY2x1ZGVzKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSlcbiAgICAgICk7XG4gICAgICBjb25zdCBhcGlCYXNlID0gaXNMb2NhbEhvc3RcbiAgICAgICAgPyAnaHR0cDovL2xvY2FsaG9zdDo0MDAwJ1xuICAgICAgICA6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHBzOi8vamVjcmMtZGF0aW5nLWJhY2tlbmQub25yZW5kZXIuY29tJztcbiAgICAgIGNvbnN0IGF1dGhIZWFkZXIgPSB0b2tlbj8uc3RhcnRzV2l0aCgnQmVhcmVyICcpXG4gICAgICAgID8gdG9rZW5cbiAgICAgICAgOiBgQmVhcmVyICR7dG9rZW59YDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZX0vYXBpL21lc3NhZ2VzLyR7bWF0Y2hJZH1gLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBhdXRoSGVhZGVyLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgbWFwcGVkOiBDaGF0TWVzc2FnZVtdID0gZGF0YS5tZXNzYWdlcy5tYXAoKG06IGFueSkgPT4gKHtcbiAgICAgICAgICBpZDogbS5pZCxcbiAgICAgICAgICBtYXRjaElkOiBtLm1hdGNoSWQsXG4gICAgICAgICAgc2VuZGVySWQ6IG0uc2VuZGVySWQsXG4gICAgICAgICAgY29udGVudDogbS5jb250ZW50LFxuICAgICAgICAgIGRlbGl2ZXJlZEF0OiBtLmRlbGl2ZXJlZEF0LFxuICAgICAgICAgIHJlYWRBdDogbS5yZWFkQXQsXG4gICAgICAgICAgY3JlYXRlZEF0OiBtLmNyZWF0ZWRBdCxcbiAgICAgICAgICBzZW5kZXI6IHtcbiAgICAgICAgICAgIGlkOiBtLnNlbmRlci5pZCxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBtLnNlbmRlci5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHByb2ZpbGVJbWFnZTogbS5zZW5kZXIucHJvZmlsZUltYWdlID8/IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHNldE1lc3NhZ2VzKG1hcHBlZCk7XG4gICAgICAgIHNldEhhc01vcmUoZGF0YS5oYXNNb3JlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEVycm9yKGRhdGEuZXJyb3IgfHwgJ0ZhaWxlZCB0byBmZXRjaCBtZXNzYWdlcycpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbWVzc2FnZXM6JywgZXJyKTtcbiAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gbG9hZCBtZXNzYWdlcycpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7XG4gICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2VuZE1lc3NhZ2UgPSAoY29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgc2VuZE1lc3NhZ2UobWF0Y2hJZCwgY29udGVudCk7XG4gIH07XG5cbiAgY29uc3QgZm9ybWF0TWVzc2FnZVRpbWUgPSAodGltZXN0YW1wOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5mbG9vcihcbiAgICAgIChub3cuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpXG4gICAgKTtcblxuICAgIGlmIChkaWZmRGF5cyA9PT0gMCkge1xuICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSk7XG4gICAgfSBlbHNlIGlmIChkaWZmRGF5cyA9PT0gMSkge1xuICAgICAgcmV0dXJuICdZZXN0ZXJkYXkgJyArIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSk7XG4gICAgfSBlbHNlIGlmIChkaWZmRGF5cyA8IDcpIHtcbiAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhbXSwgeyB3ZWVrZGF5OiAnc2hvcnQnIH0pICsgJyAnICtcbiAgICAgICAgZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKFtdLCB7IG1vbnRoOiAnc2hvcnQnLCBkYXk6ICdudW1lcmljJyB9KSArICcgJyArXG4gICAgICAgIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGlzT25saW5lID0gb25saW5lU3RhdHVzW3VzZXIuaWRdIHx8IGZhbHNlO1xuICBjb25zdCBpc1R5cGluZyA9IHR5cGluZ1VzZXJzLnNvbWUoKHQpID0+IHQubWF0Y2hJZCA9PT0gbWF0Y2hJZCAmJiB0LnVzZXJJZCA9PT0gdXNlci5pZCk7XG5cbiAgLy8gU2Nyb2xsIHRvIGJvdHRvbSBvbiBuZXcgbWVzc2FnZXMgb3IgdHlwaW5nIGluZGljYXRvclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjcm9sbFRvQm90dG9tKCk7XG4gIH0sIFttZXNzYWdlcywgaXNUeXBpbmddKTtcblxuICBpZiAobG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIHctZnVsbCBiZy1ncmF5LTUwXCI+XG4gICAgICAgIHsvKiBIZWFkZXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgYm9yZGVyLWIgcC00IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEyIGgtMTIgcm91bmRlZC1mdWxsIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tcGluay00MDAgdG8tcHVycGxlLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAge3VzZXIucHJvZmlsZUltYWdlID8gKFxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPXt1c2VyLnByb2ZpbGVJbWFnZX0gYWx0PXt1c2VyLmRpc3BsYXlOYW1lfSBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgdXNlci5kaXNwbGF5TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTFcIj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj57dXNlci5kaXNwbGF5TmFtZX08L2gyPlxuICAgICAgICAgICAge3VzZXIuZGVwYXJ0bWVudCAmJiB1c2VyLnllYXIgJiYgKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICB7dXNlci5kZXBhcnRtZW50fSDigKIgWWVhciB7dXNlci55ZWFyfVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogTG9hZGluZyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC04IHctOCBib3JkZXItYi0yIGJvcmRlci1waW5rLTUwMFwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCB3LWZ1bGwgYmctZ3JheS01MFwiPlxuICAgICAgICB7LyogSGVhZGVyICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGJvcmRlci1iIHAtNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMiBoLTEyIHJvdW5kZWQtZnVsbCBiZy1ncmFkaWVudC10by1iciBmcm9tLXBpbmstNDAwIHRvLXB1cnBsZS01MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSBmb250LWJvbGQgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgIHt1c2VyLnByb2ZpbGVJbWFnZSA/IChcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz17dXNlci5wcm9maWxlSW1hZ2V9IGFsdD17dXNlci5kaXNwbGF5TmFtZX0gY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIiAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIHVzZXIuZGlzcGxheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xXCI+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+e3VzZXIuZGlzcGxheU5hbWV9PC9oMj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEVycm9yICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTRcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXJlZC01MDAgdGV4dC1jZW50ZXJcIj57ZXJyb3J9PC9wPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e2ZldGNoTWVzc2FnZXN9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtdC00IHB4LTQgcHktMiBiZy1waW5rLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgaG92ZXI6YmctcGluay02MDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIFJldHJ5XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCB3LWZ1bGwgYmctZ3JheS01MFwiPlxuICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgYm9yZGVyLWIgcC00IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTIgaC0xMiByb3VuZGVkLWZ1bGwgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1waW5rLTQwMCB0by1wdXJwbGUtNTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgZm9udC1ib2xkIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAge3VzZXIucHJvZmlsZUltYWdlID8gKFxuICAgICAgICAgICAgICA8aW1nIHNyYz17dXNlci5wcm9maWxlSW1hZ2V9IGFsdD17dXNlci5kaXNwbGF5TmFtZX0gY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIiAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgdXNlci5kaXNwbGF5TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7aXNPbmxpbmUgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBib3R0b20tMCByaWdodC0wIHctMyBoLTMgYmctZ3JlZW4tNTAwIGJvcmRlci0yIGJvcmRlci13aGl0ZSByb3VuZGVkLWZ1bGxcIj48L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTFcIj5cbiAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+e3VzZXIuZGlzcGxheU5hbWV9PC9oMj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAge2lzT25saW5lID8gKFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyZWVuLTYwMFwiPk9ubGluZTwvc3Bhbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxzcGFuPk9mZmxpbmU8L3NwYW4+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge3VzZXIuZGVwYXJ0bWVudCAmJiB1c2VyLnllYXIgJiYgKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxzcGFuPuKAojwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3Bhbj57dXNlci5kZXBhcnRtZW50fSDigKIgWWVhciB7dXNlci55ZWFyfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogTWVzc2FnZXMgKi99XG4gICAgICA8ZGl2XG4gICAgICAgIHJlZj17bWVzc2FnZXNDb250YWluZXJSZWZ9XG4gICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcC00IHNwYWNlLXktMVwiXG4gICAgICA+XG4gICAgICAgIHttZXNzYWdlcy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLWZ1bGwgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yMCBoLTIwIHJvdW5kZWQtZnVsbCBiZy1ncmFkaWVudC10by1iciBmcm9tLXBpbmstNDAwIHRvLXB1cnBsZS01MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSB0ZXh0LTN4bCBtYi00XCI+XG4gICAgICAgICAgICAgIPCfkqxcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCBmb250LW1lZGl1bVwiPk5vIG1lc3NhZ2VzIHlldDwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTQwMCBtdC0yXCI+XG4gICAgICAgICAgICAgIFNheSBoaSB0byB7dXNlci5kaXNwbGF5TmFtZX0gdG8gc3RhcnQgdGhlIGNvbnZlcnNhdGlvbiFcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAge21lc3NhZ2VzLm1hcCgobWVzc2FnZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaXNPd25NZXNzYWdlID0gbWVzc2FnZS5zZW5kZXJJZCA9PT0gY3VycmVudFVzZXJJZDtcbiAgICAgICAgICAgICAgY29uc3Qgc2hvd0F2YXRhciA9IGluZGV4ID09PSAwIHx8XG4gICAgICAgICAgICAgICAgbWVzc2FnZXNbaW5kZXggLSAxXS5zZW5kZXJJZCAhPT0gbWVzc2FnZS5zZW5kZXJJZDtcblxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGtleT17bWVzc2FnZS5pZH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggJHtpc093bk1lc3NhZ2UgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnfSBnYXAtMiAke3Nob3dBdmF0YXIgPyAnbXQtMycgOiAnbXQtMC41J31gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHshaXNPd25NZXNzYWdlICYmIHNob3dBdmF0YXIgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctOCBoLTggcm91bmRlZC1mdWxsIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tcGluay00MDAgdG8tcHVycGxlLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIHRleHQtc20gZm9udC1ib2xkIG92ZXJmbG93LWhpZGRlbiBmbGV4LXNocmluay0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyLnByb2ZpbGVJbWFnZSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXttZXNzYWdlLnNlbmRlci5wcm9maWxlSW1hZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17bWVzc2FnZS5zZW5kZXIuZGlzcGxheU5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VuZGVyLmRpc3BsYXlOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgeyFpc093bk1lc3NhZ2UgJiYgIXNob3dBdmF0YXIgJiYgPGRpdiBjbGFzc05hbWU9XCJ3LThcIiAvPn1cblxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BtYXgtdy1bNzAlXSAke2lzT3duTWVzc2FnZSA/ICdpdGVtcy1lbmQnIDogJ2l0ZW1zLXN0YXJ0J31gfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHJvdW5kZWQtMnhsIHB4LTQgcHktMiAke2lzT3duTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1waW5rLTUwMCB0by1wdXJwbGUtNTAwIHRleHQtd2hpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdiZy13aGl0ZSB0ZXh0LWdyYXktOTAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHdoaXRlc3BhY2UtcHJlLXdyYXAgYnJlYWstd29yZHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtdC0xIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRNZXNzYWdlVGltZShtZXNzYWdlLmNyZWF0ZWRBdCl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIHtpc093bk1lc3NhZ2UgJiYgbWVzc2FnZS5kZWxpdmVyZWRBdCAmJiAhbWVzc2FnZS5yZWFkQXQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNDAwXCIgdGl0bGU9e2BEZWxpdmVyZWQgYXQgJHtmb3JtYXRNZXNzYWdlVGltZShtZXNzYWdlLmRlbGl2ZXJlZEF0KX1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAg4oCiIERlbGl2ZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPE1lc3NhZ2VTdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzT3duTWVzc2FnZT17aXNPd25NZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsaXZlcmVkQXQ9e21lc3NhZ2UuZGVsaXZlcmVkQXR9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkQXQ9e21lc3NhZ2UucmVhZEF0fVxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0PXttZXNzYWdlLmNyZWF0ZWRBdH1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG5cbiAgICAgICAgICAgIHsvKiBUeXBpbmcgaW5kaWNhdG9yICovfVxuICAgICAgICAgICAge2lzVHlwaW5nICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktc3RhcnQgZ2FwLTIgbXQtM1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04IGgtOCByb3VuZGVkLWZ1bGwgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1waW5rLTQwMCB0by1wdXJwbGUtNTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgdGV4dC1zbSBmb250LWJvbGQgb3ZlcmZsb3ctaGlkZGVuIGZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICAgIHt1c2VyLnByb2ZpbGVJbWFnZSA/IChcbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e3VzZXIucHJvZmlsZUltYWdlfSBhbHQ9e3VzZXIuZGlzcGxheU5hbWV9IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCIgLz5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIHVzZXIuZGlzcGxheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLTJ4bCBweC00IHB5LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyYXktNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLWJvdW5jZVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy0yIGgtMiBiZy1ncmF5LTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzAuMXMnIH19Pjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy0yIGgtMiBiZy1ncmF5LTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzAuMnMnIH19Pjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogTWVzc2FnZSBJbnB1dCAqL31cbiAgICAgIDxNZXNzYWdlSW5wdXQgb25TZW5kTWVzc2FnZT17aGFuZGxlU2VuZE1lc3NhZ2V9IG1hdGNoSWQ9e21hdGNoSWR9IC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VNZXNzYWdpbmciLCJNZXNzYWdlSW5wdXQiLCJNZXNzYWdlU3RhdHVzIiwiQ2hhdFdpbmRvdyIsIm1hdGNoSWQiLCJ1c2VyIiwiY3VycmVudFVzZXJJZCIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJoYXNNb3JlIiwic2V0SGFzTW9yZSIsIm1lc3NhZ2VzRW5kUmVmIiwibWVzc2FnZXNDb250YWluZXJSZWYiLCJzZW5kTWVzc2FnZSIsIm1hcmtBc0RlbGl2ZXJlZCIsIm1hcmtBc1JlYWQiLCJhZGRNZXNzYWdlTGlzdGVuZXIiLCJhZGRUeXBpbmdMaXN0ZW5lciIsInR5cGluZ1VzZXJzIiwib25saW5lU3RhdHVzIiwiZmV0Y2hNZXNzYWdlcyIsInVuc3Vic2NyaWJlIiwibWVzc2FnZSIsInByZXYiLCJmaW5kIiwibSIsImlkIiwic2VuZGVyUHJvZmlsZUltYWdlIiwic2VuZGVySWQiLCJwcm9maWxlSW1hZ2UiLCJzZW5kZXIiLCJjb250ZW50IiwiZGVsaXZlcmVkQXQiLCJyZWFkQXQiLCJjcmVhdGVkQXQiLCJkaXNwbGF5TmFtZSIsIm5hbWUiLCJzZXRUaW1lb3V0IiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaXNMb2NhbEhvc3QiLCJpbmNsdWRlcyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJhcGlCYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJhdXRoSGVhZGVyIiwic3RhcnRzV2l0aCIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImRhdGEiLCJqc29uIiwic3VjY2VzcyIsIm1hcHBlZCIsIm1hcCIsImVyciIsImNvbnNvbGUiLCJzY3JvbGxUb0JvdHRvbSIsImN1cnJlbnQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiaGFuZGxlU2VuZE1lc3NhZ2UiLCJmb3JtYXRNZXNzYWdlVGltZSIsInRpbWVzdGFtcCIsImRhdGUiLCJEYXRlIiwibm93IiwiZGlmZkRheXMiLCJNYXRoIiwiZmxvb3IiLCJnZXRUaW1lIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIndlZWtkYXkiLCJtb250aCIsImRheSIsImlzT25saW5lIiwiaXNUeXBpbmciLCJzb21lIiwidCIsInVzZXJJZCIsImRpdiIsImNsYXNzTmFtZSIsImltZyIsInNyYyIsImFsdCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiaDIiLCJkZXBhcnRtZW50IiwieWVhciIsInAiLCJidXR0b24iLCJvbkNsaWNrIiwic3BhbiIsInJlZiIsImxlbmd0aCIsImluZGV4IiwiaXNPd25NZXNzYWdlIiwic2hvd0F2YXRhciIsInRpdGxlIiwic3R5bGUiLCJhbmltYXRpb25EZWxheSIsIm9uU2VuZE1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/components/messaging/ChatWindow.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/messaging/MessageInput.tsx":
/*!***************************************************!*\
  !*** ./src/components/messaging/MessageInput.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessageInput: () => (/* binding */ MessageInput)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/MessagingContext */ \"(ssr)/./src/contexts/MessagingContext.tsx\");\n/* __next_internal_client_entry_do_not_use__ MessageInput auto */ \n\n\nconst MessageInput = ({ onSendMessage, matchId })=>{\n    const [message, setMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isTyping, setIsTyping] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const textareaRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const typingTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n    const { startTyping, stopTyping, connectionStatus } = (0,_contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_2__.useMessaging)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Auto-resize textarea\n        if (textareaRef.current) {\n            textareaRef.current.style.height = \"auto\";\n            textareaRef.current.style.height = textareaRef.current.scrollHeight + \"px\";\n        }\n    }, [\n        message\n    ]);\n    const handleInputChange = (e)=>{\n        setMessage(e.target.value);\n        // Handle typing indicator\n        if (e.target.value.trim() && !isTyping) {\n            setIsTyping(true);\n            startTyping(matchId);\n        }\n        // Clear previous timeout\n        if (typingTimeoutRef.current) {\n            clearTimeout(typingTimeoutRef.current);\n        }\n        // Stop typing after 2 seconds of inactivity\n        typingTimeoutRef.current = setTimeout(()=>{\n            if (isTyping) {\n                setIsTyping(false);\n                stopTyping(matchId);\n            }\n        }, 2000);\n    };\n    const handleSubmit = (e)=>{\n        e.preventDefault();\n        const trimmedMessage = message.trim();\n        if (!trimmedMessage) return;\n        // Clear typing indicator\n        if (isTyping) {\n            setIsTyping(false);\n            stopTyping(matchId);\n        }\n        if (typingTimeoutRef.current) {\n            clearTimeout(typingTimeoutRef.current);\n        }\n        // Send message\n        onSendMessage(trimmedMessage);\n        setMessage(\"\");\n        // Reset textarea height\n        if (textareaRef.current) {\n            textareaRef.current.style.height = \"auto\";\n        }\n    };\n    const handleKeyDown = (e)=>{\n        if (e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault();\n            handleSubmit(e);\n        }\n    };\n    const isDisabled = connectionStatus !== \"connected\";\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"bg-white border-t p-4\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                onSubmit: handleSubmit,\n                className: \"flex items-end gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 relative\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                ref: textareaRef,\n                                value: message,\n                                onChange: handleInputChange,\n                                onKeyDown: handleKeyDown,\n                                placeholder: isDisabled ? \"Connecting...\" : \"Type a message...\",\n                                disabled: isDisabled,\n                                className: \"w-full px-4 py-3 pr-12 border border-gray-300 rounded-full resize-none focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed max-h-32 overflow-y-auto text-gray-900 placeholder-gray-400\",\n                                rows: 1,\n                                style: {\n                                    minHeight: \"48px\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                                lineNumber: 88,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                type: \"button\",\n                                className: \"absolute right-3 bottom-3 text-gray-400 hover:text-gray-600 transition-colors\",\n                                disabled: isDisabled,\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"w-6 h-6\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: 2,\n                                        d: \"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                                        lineNumber: 116,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                                    lineNumber: 110,\n                                    columnNumber: 13\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                                lineNumber: 105,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                        lineNumber: 87,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"submit\",\n                        disabled: !message.trim() || isDisabled,\n                        className: \"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-pink-500 to-purple-500 text-white rounded-full flex items-center justify-center hover:from-pink-600 hover:to-purple-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-pink-500 disabled:hover:to-purple-500\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            className: \"w-6 h-6\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            viewBox: \"0 0 24 24\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                strokeLinecap: \"round\",\n                                strokeLinejoin: \"round\",\n                                strokeWidth: 2,\n                                d: \"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                                lineNumber: 138,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                            lineNumber: 132,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                        lineNumber: 127,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                lineNumber: 86,\n                columnNumber: 7\n            }, undefined),\n            isDisabled && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 text-xs text-center text-orange-500\",\n                children: [\n                    connectionStatus === \"connecting\" && \"Connecting to server...\",\n                    connectionStatus === \"reconnecting\" && \"Reconnecting...\",\n                    connectionStatus === \"disconnected\" && \"Disconnected. Messages will be sent when reconnected.\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n                lineNumber: 150,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageInput.tsx\",\n        lineNumber: 85,\n        columnNumber: 5\n    }, undefined);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9tZXNzYWdpbmcvTWVzc2FnZUlucHV0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBRTJEO0FBQ0E7QUFPcEQsTUFBTUssZUFBNEMsQ0FBQyxFQUFFQyxhQUFhLEVBQUVDLE9BQU8sRUFBRTtJQUNsRixNQUFNLENBQUNDLFNBQVNDLFdBQVcsR0FBR1IsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDUyxVQUFVQyxZQUFZLEdBQUdWLCtDQUFRQSxDQUFDO0lBQ3pDLE1BQU1XLGNBQWNWLDZDQUFNQSxDQUFzQjtJQUNoRCxNQUFNVyxtQkFBbUJYLDZDQUFNQTtJQUUvQixNQUFNLEVBQUVZLFdBQVcsRUFBRUMsVUFBVSxFQUFFQyxnQkFBZ0IsRUFBRSxHQUFHWix3RUFBWUE7SUFFbEVELGdEQUFTQSxDQUFDO1FBQ1IsdUJBQXVCO1FBQ3ZCLElBQUlTLFlBQVlLLE9BQU8sRUFBRTtZQUN2QkwsWUFBWUssT0FBTyxDQUFDQyxLQUFLLENBQUNDLE1BQU0sR0FBRztZQUNuQ1AsWUFBWUssT0FBTyxDQUFDQyxLQUFLLENBQUNDLE1BQU0sR0FBR1AsWUFBWUssT0FBTyxDQUFDRyxZQUFZLEdBQUc7UUFDeEU7SUFDRixHQUFHO1FBQUNaO0tBQVE7SUFFWixNQUFNYSxvQkFBb0IsQ0FBQ0M7UUFDekJiLFdBQVdhLEVBQUVDLE1BQU0sQ0FBQ0MsS0FBSztRQUV6QiwwQkFBMEI7UUFDMUIsSUFBSUYsRUFBRUMsTUFBTSxDQUFDQyxLQUFLLENBQUNDLElBQUksTUFBTSxDQUFDZixVQUFVO1lBQ3RDQyxZQUFZO1lBQ1pHLFlBQVlQO1FBQ2Q7UUFFQSx5QkFBeUI7UUFDekIsSUFBSU0saUJBQWlCSSxPQUFPLEVBQUU7WUFDNUJTLGFBQWFiLGlCQUFpQkksT0FBTztRQUN2QztRQUVBLDRDQUE0QztRQUM1Q0osaUJBQWlCSSxPQUFPLEdBQUdVLFdBQVc7WUFDcEMsSUFBSWpCLFVBQVU7Z0JBQ1pDLFlBQVk7Z0JBQ1pJLFdBQVdSO1lBQ2I7UUFDRixHQUFHO0lBQ0w7SUFFQSxNQUFNcUIsZUFBZSxDQUFDTjtRQUNwQkEsRUFBRU8sY0FBYztRQUVoQixNQUFNQyxpQkFBaUJ0QixRQUFRaUIsSUFBSTtRQUNuQyxJQUFJLENBQUNLLGdCQUFnQjtRQUVyQix5QkFBeUI7UUFDekIsSUFBSXBCLFVBQVU7WUFDWkMsWUFBWTtZQUNaSSxXQUFXUjtRQUNiO1FBQ0EsSUFBSU0saUJBQWlCSSxPQUFPLEVBQUU7WUFDNUJTLGFBQWFiLGlCQUFpQkksT0FBTztRQUN2QztRQUVBLGVBQWU7UUFDZlgsY0FBY3dCO1FBQ2RyQixXQUFXO1FBRVgsd0JBQXdCO1FBQ3hCLElBQUlHLFlBQVlLLE9BQU8sRUFBRTtZQUN2QkwsWUFBWUssT0FBTyxDQUFDQyxLQUFLLENBQUNDLE1BQU0sR0FBRztRQUNyQztJQUNGO0lBRUEsTUFBTVksZ0JBQWdCLENBQUNUO1FBQ3JCLElBQUlBLEVBQUVVLEdBQUcsS0FBSyxXQUFXLENBQUNWLEVBQUVXLFFBQVEsRUFBRTtZQUNwQ1gsRUFBRU8sY0FBYztZQUNoQkQsYUFBYU47UUFDZjtJQUNGO0lBRUEsTUFBTVksYUFBYWxCLHFCQUFxQjtJQUV4QyxxQkFDRSw4REFBQ21CO1FBQUlDLFdBQVU7OzBCQUNiLDhEQUFDQztnQkFBS0MsVUFBVVY7Z0JBQWNRLFdBQVU7O2tDQUN0Qyw4REFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRztnQ0FDQ0MsS0FBSzVCO2dDQUNMWSxPQUFPaEI7Z0NBQ1BpQyxVQUFVcEI7Z0NBQ1ZxQixXQUFXWDtnQ0FDWFksYUFDRVQsYUFDSSxrQkFDQTtnQ0FFTlUsVUFBVVY7Z0NBQ1ZFLFdBQVU7Z0NBQ1ZTLE1BQU07Z0NBQ04zQixPQUFPO29DQUFFNEIsV0FBVztnQ0FBTzs7Ozs7OzBDQUk3Qiw4REFBQ0M7Z0NBQ0NDLE1BQUs7Z0NBQ0xaLFdBQVU7Z0NBQ1ZRLFVBQVVWOzBDQUVWLDRFQUFDZTtvQ0FDQ2IsV0FBVTtvQ0FDVmMsTUFBSztvQ0FDTEMsUUFBTztvQ0FDUEMsU0FBUTs4Q0FFUiw0RUFBQ0M7d0NBQ0NDLGVBQWM7d0NBQ2RDLGdCQUFlO3dDQUNmQyxhQUFhO3dDQUNiQyxHQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tDQU9WLDhEQUFDVjt3QkFDQ0MsTUFBSzt3QkFDTEosVUFBVSxDQUFDcEMsUUFBUWlCLElBQUksTUFBTVM7d0JBQzdCRSxXQUFVO2tDQUVWLDRFQUFDYTs0QkFDQ2IsV0FBVTs0QkFDVmMsTUFBSzs0QkFDTEMsUUFBTzs0QkFDUEMsU0FBUTtzQ0FFUiw0RUFBQ0M7Z0NBQ0NDLGVBQWM7Z0NBQ2RDLGdCQUFlO2dDQUNmQyxhQUFhO2dDQUNiQyxHQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBT1R2Qiw0QkFDQyw4REFBQ0M7Z0JBQUlDLFdBQVU7O29CQUNacEIscUJBQXFCLGdCQUFnQjtvQkFDckNBLHFCQUFxQixrQkFBa0I7b0JBQ3ZDQSxxQkFBcUIsa0JBQWtCOzs7Ozs7Ozs7Ozs7O0FBS2xELEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qZWNyYy1kYXRpbmctZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9tZXNzYWdpbmcvTWVzc2FnZUlucHV0LnRzeD8xMGI1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZU1lc3NhZ2luZyB9IGZyb20gJ0AvY29udGV4dHMvTWVzc2FnaW5nQ29udGV4dCc7XG5cbmludGVyZmFjZSBNZXNzYWdlSW5wdXRQcm9wcyB7XG4gIG9uU2VuZE1lc3NhZ2U6IChjb250ZW50OiBzdHJpbmcpID0+IHZvaWQ7XG4gIG1hdGNoSWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IE1lc3NhZ2VJbnB1dDogUmVhY3QuRkM8TWVzc2FnZUlucHV0UHJvcHM+ID0gKHsgb25TZW5kTWVzc2FnZSwgbWF0Y2hJZCB9KSA9PiB7XG4gIGNvbnN0IFttZXNzYWdlLCBzZXRNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2lzVHlwaW5nLCBzZXRJc1R5cGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHRleHRhcmVhUmVmID0gdXNlUmVmPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCB0eXBpbmdUaW1lb3V0UmVmID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0PigpO1xuICBcbiAgY29uc3QgeyBzdGFydFR5cGluZywgc3RvcFR5cGluZywgY29ubmVjdGlvblN0YXR1cyB9ID0gdXNlTWVzc2FnaW5nKCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBBdXRvLXJlc2l6ZSB0ZXh0YXJlYVxuICAgIGlmICh0ZXh0YXJlYVJlZi5jdXJyZW50KSB7XG4gICAgICB0ZXh0YXJlYVJlZi5jdXJyZW50LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgIHRleHRhcmVhUmVmLmN1cnJlbnQuc3R5bGUuaGVpZ2h0ID0gdGV4dGFyZWFSZWYuY3VycmVudC5zY3JvbGxIZWlnaHQgKyAncHgnO1xuICAgIH1cbiAgfSwgW21lc3NhZ2VdKTtcblxuICBjb25zdCBoYW5kbGVJbnB1dENoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MVGV4dEFyZWFFbGVtZW50PikgPT4ge1xuICAgIHNldE1lc3NhZ2UoZS50YXJnZXQudmFsdWUpO1xuXG4gICAgLy8gSGFuZGxlIHR5cGluZyBpbmRpY2F0b3JcbiAgICBpZiAoZS50YXJnZXQudmFsdWUudHJpbSgpICYmICFpc1R5cGluZykge1xuICAgICAgc2V0SXNUeXBpbmcodHJ1ZSk7XG4gICAgICBzdGFydFR5cGluZyhtYXRjaElkKTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyB0aW1lb3V0XG4gICAgaWYgKHR5cGluZ1RpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHR5cGluZ1RpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgLy8gU3RvcCB0eXBpbmcgYWZ0ZXIgMiBzZWNvbmRzIG9mIGluYWN0aXZpdHlcbiAgICB0eXBpbmdUaW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChpc1R5cGluZykge1xuICAgICAgICBzZXRJc1R5cGluZyhmYWxzZSk7XG4gICAgICAgIHN0b3BUeXBpbmcobWF0Y2hJZCk7XG4gICAgICB9XG4gICAgfSwgMjAwMCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBcbiAgICBjb25zdCB0cmltbWVkTWVzc2FnZSA9IG1lc3NhZ2UudHJpbSgpO1xuICAgIGlmICghdHJpbW1lZE1lc3NhZ2UpIHJldHVybjtcblxuICAgIC8vIENsZWFyIHR5cGluZyBpbmRpY2F0b3JcbiAgICBpZiAoaXNUeXBpbmcpIHtcbiAgICAgIHNldElzVHlwaW5nKGZhbHNlKTtcbiAgICAgIHN0b3BUeXBpbmcobWF0Y2hJZCk7XG4gICAgfVxuICAgIGlmICh0eXBpbmdUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0eXBpbmdUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgIH1cblxuICAgIC8vIFNlbmQgbWVzc2FnZVxuICAgIG9uU2VuZE1lc3NhZ2UodHJpbW1lZE1lc3NhZ2UpO1xuICAgIHNldE1lc3NhZ2UoJycpO1xuXG4gICAgLy8gUmVzZXQgdGV4dGFyZWEgaGVpZ2h0XG4gICAgaWYgKHRleHRhcmVhUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRleHRhcmVhUmVmLmN1cnJlbnQuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQ8SFRNTFRleHRBcmVhRWxlbWVudD4pID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGhhbmRsZVN1Ym1pdChlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaXNEaXNhYmxlZCA9IGNvbm5lY3Rpb25TdGF0dXMgIT09ICdjb25uZWN0ZWQnO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXItdCBwLTRcIj5cbiAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtZW5kIGdhcC0yXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIHJlbGF0aXZlXCI+XG4gICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICByZWY9e3RleHRhcmVhUmVmfVxuICAgICAgICAgICAgdmFsdWU9e21lc3NhZ2V9XG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICBvbktleURvd249e2hhbmRsZUtleURvd259XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj17XG4gICAgICAgICAgICAgIGlzRGlzYWJsZWQgXG4gICAgICAgICAgICAgICAgPyAnQ29ubmVjdGluZy4uLicgXG4gICAgICAgICAgICAgICAgOiAnVHlwZSBhIG1lc3NhZ2UuLi4nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXNhYmxlZD17aXNEaXNhYmxlZH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC00IHB5LTMgcHItMTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWZ1bGwgcmVzaXplLW5vbmUgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXBpbmstNTAwIGZvY3VzOmJvcmRlci10cmFuc3BhcmVudCBkaXNhYmxlZDpiZy1ncmF5LTEwMCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgbWF4LWgtMzIgb3ZlcmZsb3cteS1hdXRvIHRleHQtZ3JheS05MDAgcGxhY2Vob2xkZXItZ3JheS00MDBcIlxuICAgICAgICAgICAgcm93cz17MX1cbiAgICAgICAgICAgIHN0eWxlPXt7IG1pbkhlaWdodDogJzQ4cHgnIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgICBcbiAgICAgICAgICB7LyogRW1vamkgYnV0dG9uIChwbGFjZWhvbGRlciBmb3IgZnV0dXJlIGVuaGFuY2VtZW50KSAqL31cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHJpZ2h0LTMgYm90dG9tLTMgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LWdyYXktNjAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0Rpc2FibGVkfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmcgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctNiBoLTZcIiBcbiAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8cGF0aCBcbiAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBcbiAgICAgICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezJ9IFxuICAgICAgICAgICAgICAgIGQ9XCJNMTQuODI4IDE0LjgyOGE0IDQgMCAwMS01LjY1NiAwTTkgMTBoLjAxTTE1IDEwaC4wMU0yMSAxMmE5IDkgMCAxMS0xOCAwIDkgOSAwIDAxMTggMHpcIiBcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogU2VuZCBidXR0b24gKi99XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICBkaXNhYmxlZD17IW1lc3NhZ2UudHJpbSgpIHx8IGlzRGlzYWJsZWR9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCB3LTEyIGgtMTIgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1waW5rLTUwMCB0by1wdXJwbGUtNTAwIHRleHQtd2hpdGUgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGhvdmVyOmZyb20tcGluay02MDAgaG92ZXI6dG8tcHVycGxlLTYwMCB0cmFuc2l0aW9uLWFsbCBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBkaXNhYmxlZDpob3Zlcjpmcm9tLXBpbmstNTAwIGRpc2FibGVkOmhvdmVyOnRvLXB1cnBsZS01MDBcIlxuICAgICAgICA+XG4gICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctNiBoLTZcIiBcbiAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxwYXRoIFxuICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBcbiAgICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIFxuICAgICAgICAgICAgICBzdHJva2VXaWR0aD17Mn0gXG4gICAgICAgICAgICAgIGQ9XCJNMTIgMTlsOSAyLTktMTgtOSAxOCA5LTJ6bTAgMHYtOFwiIFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Zvcm0+XG5cbiAgICAgIHsvKiBDb25uZWN0aW9uIHN0YXR1cyB3YXJuaW5nICovfVxuICAgICAge2lzRGlzYWJsZWQgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC14cyB0ZXh0LWNlbnRlciB0ZXh0LW9yYW5nZS01MDBcIj5cbiAgICAgICAgICB7Y29ubmVjdGlvblN0YXR1cyA9PT0gJ2Nvbm5lY3RpbmcnICYmICdDb25uZWN0aW5nIHRvIHNlcnZlci4uLid9XG4gICAgICAgICAge2Nvbm5lY3Rpb25TdGF0dXMgPT09ICdyZWNvbm5lY3RpbmcnICYmICdSZWNvbm5lY3RpbmcuLi4nfVxuICAgICAgICAgIHtjb25uZWN0aW9uU3RhdHVzID09PSAnZGlzY29ubmVjdGVkJyAmJiAnRGlzY29ubmVjdGVkLiBNZXNzYWdlcyB3aWxsIGJlIHNlbnQgd2hlbiByZWNvbm5lY3RlZC4nfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VNZXNzYWdpbmciLCJNZXNzYWdlSW5wdXQiLCJvblNlbmRNZXNzYWdlIiwibWF0Y2hJZCIsIm1lc3NhZ2UiLCJzZXRNZXNzYWdlIiwiaXNUeXBpbmciLCJzZXRJc1R5cGluZyIsInRleHRhcmVhUmVmIiwidHlwaW5nVGltZW91dFJlZiIsInN0YXJ0VHlwaW5nIiwic3RvcFR5cGluZyIsImNvbm5lY3Rpb25TdGF0dXMiLCJjdXJyZW50Iiwic3R5bGUiLCJoZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJoYW5kbGVJbnB1dENoYW5nZSIsImUiLCJ0YXJnZXQiLCJ2YWx1ZSIsInRyaW0iLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaGFuZGxlU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJ0cmltbWVkTWVzc2FnZSIsImhhbmRsZUtleURvd24iLCJrZXkiLCJzaGlmdEtleSIsImlzRGlzYWJsZWQiLCJkaXYiLCJjbGFzc05hbWUiLCJmb3JtIiwib25TdWJtaXQiLCJ0ZXh0YXJlYSIsInJlZiIsIm9uQ2hhbmdlIiwib25LZXlEb3duIiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZCIsInJvd3MiLCJtaW5IZWlnaHQiLCJidXR0b24iLCJ0eXBlIiwic3ZnIiwiZmlsbCIsInN0cm9rZSIsInZpZXdCb3giLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/messaging/MessageInput.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/messaging/MessageStatus.tsx":
/*!****************************************************!*\
  !*** ./src/components/messaging/MessageStatus.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessageStatus: () => (/* binding */ MessageStatus)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ MessageStatus auto */ \n\nconst MessageStatus = ({ isOwnMessage, deliveredAt, readAt, createdAt })=>{\n    const [showContextMenu, setShowContextMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [contextMenuPosition, setContextMenuPosition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: 0,\n        y: 0\n    });\n    const contextMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleClickOutside = (event)=>{\n            if (contextMenuRef.current && !contextMenuRef.current.contains(event.target)) {\n                setShowContextMenu(false);\n            }\n        };\n        if (showContextMenu) {\n            document.addEventListener(\"mousedown\", handleClickOutside);\n        }\n        return ()=>{\n            document.removeEventListener(\"mousedown\", handleClickOutside);\n        };\n    }, [\n        showContextMenu\n    ]);\n    const handleContextMenu = (e)=>{\n        e.preventDefault();\n        setContextMenuPosition({\n            x: e.clientX,\n            y: e.clientY\n        });\n        setShowContextMenu(true);\n    };\n    const formatTimestamp = (timestamp)=>{\n        const date = new Date(timestamp);\n        return date.toLocaleString([], {\n            month: \"short\",\n            day: \"numeric\",\n            year: \"numeric\",\n            hour: \"2-digit\",\n            minute: \"2-digit\",\n            second: \"2-digit\"\n        });\n    };\n    if (!isOwnMessage) return null;\n    const getStatusIcon = ()=>{\n        if (readAt) {\n            // Blue double checkmark for read\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"text-blue-500 font-bold\",\n                title: \"Read\",\n                children: \"\"\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                lineNumber: 62,\n                columnNumber: 17\n            }, undefined);\n        } else if (deliveredAt) {\n            // Gray double checkmark for delivered\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"text-gray-400 font-bold\",\n                title: \"Delivered\",\n                children: \"\"\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                lineNumber: 69,\n                columnNumber: 17\n            }, undefined);\n        } else {\n            // Single checkmark for sent\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"text-gray-400 font-bold\",\n                title: \"Sent\",\n                children: \"\"\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                lineNumber: 76,\n                columnNumber: 17\n            }, undefined);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"text-xs cursor-context-menu select-none\",\n                onContextMenu: handleContextMenu,\n                children: getStatusIcon()\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                lineNumber: 85,\n                columnNumber: 13\n            }, undefined),\n            showContextMenu && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: contextMenuRef,\n                className: \"fixed z-50 bg-white rounded-lg shadow-lg border border-gray-200 py-2 px-3 min-w-[200px]\",\n                style: {\n                    left: `${contextMenuPosition.x}px`,\n                    top: `${contextMenuPosition.y}px`\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-sm font-semibold text-gray-700 mb-2 pb-2 border-b\",\n                        children: \"Message Info\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                        lineNumber: 101,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-2 text-xs\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-500 font-medium\",\n                                        children: \"Sent\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                                        lineNumber: 106,\n                                        columnNumber: 29\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-900\",\n                                        children: formatTimestamp(createdAt)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                                        lineNumber: 107,\n                                        columnNumber: 29\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                                lineNumber: 105,\n                                columnNumber: 25\n                            }, undefined),\n                            deliveredAt && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-500 font-medium\",\n                                        children: \"Delivered\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                                        lineNumber: 111,\n                                        columnNumber: 33\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-900\",\n                                        children: formatTimestamp(deliveredAt)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                                        lineNumber: 112,\n                                        columnNumber: 33\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                                lineNumber: 110,\n                                columnNumber: 29\n                            }, undefined),\n                            readAt && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-500 font-medium\",\n                                        children: \"Read\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                                        lineNumber: 117,\n                                        columnNumber: 33\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-900\",\n                                        children: formatTimestamp(readAt)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                                        lineNumber: 118,\n                                        columnNumber: 33\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                                lineNumber: 116,\n                                columnNumber: 29\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                        lineNumber: 104,\n                        columnNumber: 21\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/MessageStatus.tsx\",\n                lineNumber: 93,\n                columnNumber: 17\n            }, undefined)\n        ]\n    }, void 0, true);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9tZXNzYWdpbmcvTWVzc2FnZVN0YXR1cy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRTJEO0FBU3BELE1BQU1JLGdCQUE4QyxDQUFDLEVBQ3hEQyxZQUFZLEVBQ1pDLFdBQVcsRUFDWEMsTUFBTSxFQUNOQyxTQUFTLEVBQ1o7SUFDRyxNQUFNLENBQUNDLGlCQUFpQkMsbUJBQW1CLEdBQUdULCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU0sQ0FBQ1UscUJBQXFCQyx1QkFBdUIsR0FBR1gsK0NBQVFBLENBQUM7UUFBRVksR0FBRztRQUFHQyxHQUFHO0lBQUU7SUFDNUUsTUFBTUMsaUJBQWlCYiw2Q0FBTUEsQ0FBaUI7SUFFOUNDLGdEQUFTQSxDQUFDO1FBQ04sTUFBTWEscUJBQXFCLENBQUNDO1lBQ3hCLElBQUlGLGVBQWVHLE9BQU8sSUFBSSxDQUFDSCxlQUFlRyxPQUFPLENBQUNDLFFBQVEsQ0FBQ0YsTUFBTUcsTUFBTSxHQUFXO2dCQUNsRlYsbUJBQW1CO1lBQ3ZCO1FBQ0o7UUFFQSxJQUFJRCxpQkFBaUI7WUFDakJZLFNBQVNDLGdCQUFnQixDQUFDLGFBQWFOO1FBQzNDO1FBRUEsT0FBTztZQUNISyxTQUFTRSxtQkFBbUIsQ0FBQyxhQUFhUDtRQUM5QztJQUNKLEdBQUc7UUFBQ1A7S0FBZ0I7SUFFcEIsTUFBTWUsb0JBQW9CLENBQUNDO1FBQ3ZCQSxFQUFFQyxjQUFjO1FBQ2hCZCx1QkFBdUI7WUFBRUMsR0FBR1ksRUFBRUUsT0FBTztZQUFFYixHQUFHVyxFQUFFRyxPQUFPO1FBQUM7UUFDcERsQixtQkFBbUI7SUFDdkI7SUFFQSxNQUFNbUIsa0JBQWtCLENBQUNDO1FBQ3JCLE1BQU1DLE9BQU8sSUFBSUMsS0FBS0Y7UUFDdEIsT0FBT0MsS0FBS0UsY0FBYyxDQUFDLEVBQUUsRUFBRTtZQUMzQkMsT0FBTztZQUNQQyxLQUFLO1lBQ0xDLE1BQU07WUFDTkMsTUFBTTtZQUNOQyxRQUFRO1lBQ1JDLFFBQVE7UUFDWjtJQUNKO0lBRUEsSUFBSSxDQUFDbEMsY0FBYyxPQUFPO0lBRTFCLE1BQU1tQyxnQkFBZ0I7UUFDbEIsSUFBSWpDLFFBQVE7WUFDUixpQ0FBaUM7WUFDakMscUJBQ0ksOERBQUNrQztnQkFBS0MsV0FBVTtnQkFBMEJDLE9BQU07MEJBQU87Ozs7OztRQUkvRCxPQUFPLElBQUlyQyxhQUFhO1lBQ3BCLHNDQUFzQztZQUN0QyxxQkFDSSw4REFBQ21DO2dCQUFLQyxXQUFVO2dCQUEwQkMsT0FBTTswQkFBWTs7Ozs7O1FBSXBFLE9BQU87WUFDSCw0QkFBNEI7WUFDNUIscUJBQ0ksOERBQUNGO2dCQUFLQyxXQUFVO2dCQUEwQkMsT0FBTTswQkFBTzs7Ozs7O1FBSS9EO0lBQ0o7SUFFQSxxQkFDSTs7MEJBQ0ksOERBQUNGO2dCQUNHQyxXQUFVO2dCQUNWRSxlQUFlcEI7MEJBRWRnQjs7Ozs7O1lBR0ovQixpQ0FDRyw4REFBQ29DO2dCQUNHQyxLQUFLL0I7Z0JBQ0wyQixXQUFVO2dCQUNWSyxPQUFPO29CQUNIQyxNQUFNLENBQUMsRUFBRXJDLG9CQUFvQkUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDbENvQyxLQUFLLENBQUMsRUFBRXRDLG9CQUFvQkcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDckM7O2tDQUVBLDhEQUFDK0I7d0JBQUlILFdBQVU7a0NBQXlEOzs7Ozs7a0NBR3hFLDhEQUFDRzt3QkFBSUgsV0FBVTs7MENBQ1gsOERBQUNHOztrREFDRyw4REFBQ0E7d0NBQUlILFdBQVU7a0RBQTRCOzs7Ozs7a0RBQzNDLDhEQUFDRzt3Q0FBSUgsV0FBVTtrREFBaUJiLGdCQUFnQnJCOzs7Ozs7Ozs7Ozs7NEJBRW5ERiw2QkFDRyw4REFBQ3VDOztrREFDRyw4REFBQ0E7d0NBQUlILFdBQVU7a0RBQTRCOzs7Ozs7a0RBQzNDLDhEQUFDRzt3Q0FBSUgsV0FBVTtrREFBaUJiLGdCQUFnQnZCOzs7Ozs7Ozs7Ozs7NEJBR3ZEQyx3QkFDRyw4REFBQ3NDOztrREFDRyw4REFBQ0E7d0NBQUlILFdBQVU7a0RBQTRCOzs7Ozs7a0RBQzNDLDhEQUFDRzt3Q0FBSUgsV0FBVTtrREFBaUJiLGdCQUFnQnRCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFoRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamVjcmMtZGF0aW5nLWZyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnaW5nL01lc3NhZ2VTdGF0dXMudHN4PzllOGUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgTWVzc2FnZVN0YXR1c1Byb3BzIHtcbiAgICBpc093bk1lc3NhZ2U6IGJvb2xlYW47XG4gICAgZGVsaXZlcmVkQXQ6IHN0cmluZyB8IG51bGw7XG4gICAgcmVhZEF0OiBzdHJpbmcgfCBudWxsO1xuICAgIGNyZWF0ZWRBdDogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgTWVzc2FnZVN0YXR1czogUmVhY3QuRkM8TWVzc2FnZVN0YXR1c1Byb3BzPiA9ICh7XG4gICAgaXNPd25NZXNzYWdlLFxuICAgIGRlbGl2ZXJlZEF0LFxuICAgIHJlYWRBdCxcbiAgICBjcmVhdGVkQXQsXG59KSA9PiB7XG4gICAgY29uc3QgW3Nob3dDb250ZXh0TWVudSwgc2V0U2hvd0NvbnRleHRNZW51XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbY29udGV4dE1lbnVQb3NpdGlvbiwgc2V0Q29udGV4dE1lbnVQb3NpdGlvbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7XG4gICAgY29uc3QgY29udGV4dE1lbnVSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlQ2xpY2tPdXRzaWRlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29udGV4dE1lbnVSZWYuY3VycmVudCAmJiAhY29udGV4dE1lbnVSZWYuY3VycmVudC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgICAgICAgICBzZXRTaG93Q29udGV4dE1lbnUoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzaG93Q29udGV4dE1lbnUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgICAgICAgfTtcbiAgICB9LCBbc2hvd0NvbnRleHRNZW51XSk7XG5cbiAgICBjb25zdCBoYW5kbGVDb250ZXh0TWVudSA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2V0Q29udGV4dE1lbnVQb3NpdGlvbih7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pO1xuICAgICAgICBzZXRTaG93Q29udGV4dE1lbnUodHJ1ZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGZvcm1hdFRpbWVzdGFtcCA9ICh0aW1lc3RhbXA6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVTdHJpbmcoW10sIHtcbiAgICAgICAgICAgIG1vbnRoOiAnc2hvcnQnLFxuICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycsXG4gICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICAgICAgICBob3VyOiAnMi1kaWdpdCcsXG4gICAgICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICAgICAgICAgIHNlY29uZDogJzItZGlnaXQnLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKCFpc093bk1lc3NhZ2UpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgZ2V0U3RhdHVzSWNvbiA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJlYWRBdCkge1xuICAgICAgICAgICAgLy8gQmx1ZSBkb3VibGUgY2hlY2ttYXJrIGZvciByZWFkXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtYmx1ZS01MDAgZm9udC1ib2xkXCIgdGl0bGU9XCJSZWFkXCI+XG4gICAgICAgICAgICAgICAgICAgIOKck+Kck1xuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVsaXZlcmVkQXQpIHtcbiAgICAgICAgICAgIC8vIEdyYXkgZG91YmxlIGNoZWNrbWFyayBmb3IgZGVsaXZlcmVkXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgZm9udC1ib2xkXCIgdGl0bGU9XCJEZWxpdmVyZWRcIj5cbiAgICAgICAgICAgICAgICAgICAg4pyT4pyTXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpbmdsZSBjaGVja21hcmsgZm9yIHNlbnRcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCBmb250LWJvbGRcIiB0aXRsZT1cIlNlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAg4pyTXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXhzIGN1cnNvci1jb250ZXh0LW1lbnUgc2VsZWN0LW5vbmVcIlxuICAgICAgICAgICAgICAgIG9uQ29udGV4dE1lbnU9e2hhbmRsZUNvbnRleHRNZW51fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtnZXRTdGF0dXNJY29uKCl9XG4gICAgICAgICAgICA8L3NwYW4+XG5cbiAgICAgICAgICAgIHtzaG93Q29udGV4dE1lbnUgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgcmVmPXtjb250ZXh0TWVudVJlZn1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgei01MCBiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHB5LTIgcHgtMyBtaW4tdy1bMjAwcHhdXCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGAke2NvbnRleHRNZW51UG9zaXRpb24ueH1weGAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGAke2NvbnRleHRNZW51UG9zaXRpb24ueX1weGAsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNzAwIG1iLTIgcGItMiBib3JkZXItYlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZSBJbmZvXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMiB0ZXh0LXhzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCBmb250LW1lZGl1bVwiPlNlbnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtZ3JheS05MDBcIj57Zm9ybWF0VGltZXN0YW1wKGNyZWF0ZWRBdCl9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkZWxpdmVyZWRBdCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIGZvbnQtbWVkaXVtXCI+RGVsaXZlcmVkPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTkwMFwiPntmb3JtYXRUaW1lc3RhbXAoZGVsaXZlcmVkQXQpfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtyZWFkQXQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCBmb250LW1lZGl1bVwiPlJlYWQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktOTAwXCI+e2Zvcm1hdFRpbWVzdGFtcChyZWFkQXQpfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICA8Lz5cbiAgICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiTWVzc2FnZVN0YXR1cyIsImlzT3duTWVzc2FnZSIsImRlbGl2ZXJlZEF0IiwicmVhZEF0IiwiY3JlYXRlZEF0Iiwic2hvd0NvbnRleHRNZW51Iiwic2V0U2hvd0NvbnRleHRNZW51IiwiY29udGV4dE1lbnVQb3NpdGlvbiIsInNldENvbnRleHRNZW51UG9zaXRpb24iLCJ4IiwieSIsImNvbnRleHRNZW51UmVmIiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiZXZlbnQiLCJjdXJyZW50IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlQ29udGV4dE1lbnUiLCJlIiwicHJldmVudERlZmF1bHQiLCJjbGllbnRYIiwiY2xpZW50WSIsImZvcm1hdFRpbWVzdGFtcCIsInRpbWVzdGFtcCIsImRhdGUiLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJtb250aCIsImRheSIsInllYXIiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwiZ2V0U3RhdHVzSWNvbiIsInNwYW4iLCJjbGFzc05hbWUiLCJ0aXRsZSIsIm9uQ29udGV4dE1lbnUiLCJkaXYiLCJyZWYiLCJzdHlsZSIsImxlZnQiLCJ0b3AiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/components/messaging/MessageStatus.tsx\n");

/***/ }),

/***/ "(ssr)/./src/contexts/MessagingContext.tsx":
/*!*******************************************!*\
  !*** ./src/contexts/MessagingContext.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MessagingProvider: () => (/* binding */ MessagingProvider),\n/* harmony export */   useMessaging: () => (/* binding */ useMessaging)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! socket.io-client */ \"(ssr)/./node_modules/socket.io-client/build/esm-debug/index.js\");\n/* __next_internal_client_entry_do_not_use__ useMessaging,MessagingProvider auto */ \n\n\nconst MessagingContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nconst useMessaging = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(MessagingContext);\n    if (!context) {\n        throw new Error(\"useMessaging must be used within MessagingProvider\");\n    }\n    return context;\n};\nconst MessagingProvider = ({ children })=>{\n    const [socket, setSocket] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [connectionStatus, setConnectionStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"disconnected\");\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [typingUsers, setTypingUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [onlineStatus, setOnlineStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const reconnectTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n    const reconnectAttemptsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const messageListenersRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    const typingListenersRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    const deliveredListenersRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    const readReceiptListenersRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    const getBackoffDelay = (attempt)=>{\n        // Exponential backoff: 1s, 2s, 4s, 8s, 16s, max 30s\n        return Math.min(1000 * Math.pow(2, attempt), 30000);\n    };\n    const connectSocket = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        let token = localStorage.getItem(\"accessToken\");\n        if (!token) {\n            console.log(\"No access token, skipping socket connection\");\n            return;\n        }\n        if (token.startsWith(\"Bearer \")) {\n            token = token.slice(\"Bearer \".length);\n        }\n        const isLocalHost =  false && 0;\n        const backendUrl = isLocalHost ? \"http://localhost:4000\" : \"http://localhost:4000\" || 0;\n        console.log(\"Initializing socket connection to:\", backendUrl);\n        setConnectionStatus(\"connecting\");\n        const newSocket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_2__.io)(backendUrl, {\n            auth: {\n                token\n            },\n            transports: [\n                \"websocket\",\n                \"polling\"\n            ],\n            reconnection: true,\n            reconnectionDelay: 1000,\n            reconnectionDelayMax: 30000,\n            reconnectionAttempts: Infinity,\n            timeout: 60000\n        });\n        // Connection events\n        newSocket.on(\"connect\", ()=>{\n            console.log(\"Socket connected:\", newSocket.id);\n            setConnectionStatus(\"connected\");\n            reconnectAttemptsRef.current = 0;\n            if (reconnectTimeoutRef.current) {\n                clearTimeout(reconnectTimeoutRef.current);\n            }\n        });\n        newSocket.on(\"disconnect\", (reason)=>{\n            console.log(\"Socket disconnected:\", reason);\n            setConnectionStatus(\"disconnected\");\n        });\n        newSocket.on(\"connect_error\", (error)=>{\n            console.error(\"Socket connection error:\", error);\n            setConnectionStatus(\"reconnecting\");\n            // Implement custom reconnection with backoff\n            reconnectAttemptsRef.current++;\n            const delay = getBackoffDelay(reconnectAttemptsRef.current);\n            console.log(`Reconnecting in ${delay}ms (attempt ${reconnectAttemptsRef.current})`);\n            if (reconnectTimeoutRef.current) {\n                clearTimeout(reconnectTimeoutRef.current);\n            }\n            reconnectTimeoutRef.current = setTimeout(()=>{\n                if (newSocket.disconnected) {\n                    console.log(\"Attempting reconnection...\");\n                    newSocket.connect();\n                }\n            }, delay);\n        });\n        // Message events\n        newSocket.on(\"new_message\", (message)=>{\n            console.log(\"Received new message:\", message);\n            setMessages((prev)=>[\n                    ...prev,\n                    message\n                ]);\n            // Notify all listeners\n            messageListenersRef.current.forEach((listener)=>listener(message));\n        });\n        newSocket.on(\"message_delivered\", (data)=>{\n            console.log(\"Message delivered:\", data);\n            // Update messages\n            setMessages((prev)=>prev.map((msg)=>(data.messageId ? msg.id === data.messageId : msg.matchId === data.matchId && !msg.deliveredAt) ? {\n                        ...msg,\n                        deliveredAt: data.deliveredAt\n                    } : msg));\n            // Notify listeners\n            deliveredListenersRef.current.forEach((listener)=>listener(data));\n        });\n        newSocket.on(\"message_read\", (data)=>{\n            console.log(\"Message read:\", data);\n            // Update messages\n            setMessages((prev)=>prev.map((msg)=>msg.matchId === data.matchId && !msg.readAt ? {\n                        ...msg,\n                        readAt: data.readAt\n                    } : msg));\n            // Notify listeners\n            readReceiptListenersRef.current.forEach((listener)=>listener(data));\n        });\n        // Typing events\n        newSocket.on(\"user_typing\", (data)=>{\n            console.log(\"User typing:\", data);\n            setTypingUsers((prev)=>{\n                const exists = prev.find((u)=>u.matchId === data.matchId && u.userId === data.userId);\n                if (exists) return prev;\n                return [\n                    ...prev,\n                    data\n                ];\n            });\n            typingListenersRef.current.forEach((listener)=>listener(data));\n        });\n        newSocket.on(\"user_stopped_typing\", (data)=>{\n            console.log(\"User stopped typing:\", data);\n            setTypingUsers((prev)=>prev.filter((u)=>!(u.matchId === data.matchId && u.userId === data.userId)));\n        });\n        // Online status events\n        newSocket.on(\"user_online\", (data)=>{\n            console.log(\"User online:\", data);\n            setOnlineStatus((prev)=>({\n                    ...prev,\n                    [data.userId]: true\n                }));\n        });\n        newSocket.on(\"user_offline\", (data)=>{\n            console.log(\"User offline:\", data);\n            setOnlineStatus((prev)=>({\n                    ...prev,\n                    [data.userId]: false\n                }));\n        });\n        setSocket(newSocket);\n        return ()=>{\n            console.log(\"Cleaning up socket connection\");\n            if (reconnectTimeoutRef.current) {\n                clearTimeout(reconnectTimeoutRef.current);\n            }\n            newSocket.close();\n        };\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const cleanup = connectSocket();\n        // Listen for token refresh events\n        const handleTokenRefresh = ()=>{\n            console.log(\"Token refreshed, reconnecting socket...\");\n            // Reconnect socket with new token\n            if (socket) {\n                socket.disconnect();\n            }\n            connectSocket();\n        };\n        // Listen for storage events (token updates)\n        window.addEventListener(\"tokenRefreshed\", handleTokenRefresh);\n        return ()=>{\n            cleanup?.();\n            window.removeEventListener(\"tokenRefreshed\", handleTokenRefresh);\n        };\n    }, [\n        connectSocket\n    ]);\n    const sendMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((matchId, content)=>{\n        if (!socket || !socket.connected) {\n            console.error(\"Socket not connected, cannot send message\");\n            // TODO: Queue message for offline sending\n            return;\n        }\n        socket.emit(\"send_message\", {\n            matchId,\n            content\n        }, (response)=>{\n            if (response?.error) {\n                console.error(\"Error sending message:\", response.error);\n            } else {\n                console.log(\"Message sent successfully:\", response);\n            }\n        });\n    }, [\n        socket\n    ]);\n    const markAsDelivered = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((matchId)=>{\n        if (!socket || !socket.connected) {\n            console.error(\"Socket not connected, cannot mark as delivered\");\n            return;\n        }\n        socket.emit(\"mark_as_delivered\", {\n            matchId\n        });\n    }, [\n        socket\n    ]);\n    const markAsRead = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((matchId)=>{\n        if (!socket || !socket.connected) {\n            console.error(\"Socket not connected, cannot mark as read\");\n            return;\n        }\n        socket.emit(\"mark_as_read\", {\n            matchId\n        });\n    }, [\n        socket\n    ]);\n    const startTyping = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((matchId)=>{\n        if (!socket || !socket.connected) return;\n        socket.emit(\"typing\", {\n            matchId\n        });\n    }, [\n        socket\n    ]);\n    const stopTyping = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((matchId)=>{\n        if (!socket || !socket.connected) return;\n        socket.emit(\"stop_typing\", {\n            matchId\n        });\n    }, [\n        socket\n    ]);\n    const addMessageListener = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((callback)=>{\n        messageListenersRef.current.add(callback);\n        return ()=>{\n            messageListenersRef.current.delete(callback);\n        };\n    }, []);\n    const addTypingListener = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((callback)=>{\n        typingListenersRef.current.add(callback);\n        return ()=>{\n            typingListenersRef.current.delete(callback);\n        };\n    }, []);\n    const addDeliveredListener = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((callback)=>{\n        deliveredListenersRef.current.add(callback);\n        return ()=>{\n            deliveredListenersRef.current.delete(callback);\n        };\n    }, []);\n    const addReadReceiptListener = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((callback)=>{\n        readReceiptListenersRef.current.add(callback);\n        return ()=>{\n            readReceiptListenersRef.current.delete(callback);\n        };\n    }, []);\n    const value = {\n        socket,\n        connectionStatus,\n        messages,\n        typingUsers,\n        onlineStatus,\n        sendMessage,\n        markAsDelivered,\n        markAsRead,\n        startTyping,\n        stopTyping,\n        addMessageListener,\n        addTypingListener,\n        addDeliveredListener,\n        addReadReceiptListener\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MessagingContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/contexts/MessagingContext.tsx\",\n        lineNumber: 345,\n        columnNumber: 5\n    }, undefined);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxvQkFBb0J1QyxPQUFPLENBQUMwQyxNQUFNLENBQUNGO1FBQ3JDO0lBQ0YsR0FBRyxFQUFFO0lBRUwsTUFBTUcsb0JBQW9Cdkcsa0RBQVdBLENBQUMsQ0FBQ29HO1FBQ3JDN0UsbUJBQW1CcUMsT0FBTyxDQUFDeUMsR0FBRyxDQUFDRDtRQUMvQixPQUFPO1lBQ0w3RSxtQkFBbUJxQyxPQUFPLENBQUMwQyxNQUFNLENBQUNGO1FBQ3BDO0lBQ0YsR0FBRyxFQUFFO0lBRUwsTUFBTUksdUJBQXVCeEcsa0RBQVdBLENBQUMsQ0FBQ29HO1FBQ3hDNUUsc0JBQXNCb0MsT0FBTyxDQUFDeUMsR0FBRyxDQUFDRDtRQUNsQyxPQUFPO1lBQ0w1RSxzQkFBc0JvQyxPQUFPLENBQUMwQyxNQUFNLENBQUNGO1FBQ3ZDO0lBQ0YsR0FBRyxFQUFFO0lBRUwsTUFBTUsseUJBQXlCekcsa0RBQVdBLENBQUMsQ0FBQ29HO1FBQzFDM0Usd0JBQXdCbUMsT0FBTyxDQUFDeUMsR0FBRyxDQUFDRDtRQUNwQyxPQUFPO1lBQ0wzRSx3QkFBd0JtQyxPQUFPLENBQUMwQyxNQUFNLENBQUNGO1FBQ3pDO0lBQ0YsR0FBRyxFQUFFO0lBRUwsTUFBTU0sUUFBOEI7UUFDbENqRztRQUNBRTtRQUNBRTtRQUNBRTtRQUNBRTtRQUNBeUU7UUFDQUs7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQUk7UUFDQUM7UUFDQUM7SUFDRjtJQUVBLHFCQUNFLDhEQUFDdEcsaUJBQWlCd0csUUFBUTtRQUFDRCxPQUFPQTtrQkFDL0JsRzs7Ozs7O0FBR1AsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2plY3JjLWRhdGluZy1mcm9udGVuZC8uL3NyYy9jb250ZXh0cy9NZXNzYWdpbmdDb250ZXh0LnRzeD8zMTI5Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpbywgU29ja2V0IH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5cbmludGVyZmFjZSBNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgbWF0Y2hJZDogc3RyaW5nO1xuICBzZW5kZXJJZDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGRlbGl2ZXJlZEF0OiBzdHJpbmcgfCBudWxsO1xuICByZWFkQXQ6IHN0cmluZyB8IG51bGw7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICBzZW5kZXI/OiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcHJvZmlsZUltYWdlOiBzdHJpbmcgfCBudWxsO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgVHlwaW5nVXNlciB7XG4gIG1hdGNoSWQ6IHN0cmluZztcbiAgdXNlcklkOiBzdHJpbmc7XG4gIHVzZXJOYW1lOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBPbmxpbmVTdGF0dXMge1xuICBbdXNlcklkOiBzdHJpbmddOiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBDb25uZWN0aW9uU3RhdHVzID0gJ2Nvbm5lY3RlZCcgfCAnY29ubmVjdGluZycgfCAnZGlzY29ubmVjdGVkJyB8ICdyZWNvbm5lY3RpbmcnO1xuXG5pbnRlcmZhY2UgTWVzc2FnaW5nQ29udGV4dFR5cGUge1xuICBzb2NrZXQ6IFNvY2tldCB8IG51bGw7XG4gIGNvbm5lY3Rpb25TdGF0dXM6IENvbm5lY3Rpb25TdGF0dXM7XG4gIG1lc3NhZ2VzOiBNZXNzYWdlW107XG4gIHR5cGluZ1VzZXJzOiBUeXBpbmdVc2VyW107XG4gIG9ubGluZVN0YXR1czogT25saW5lU3RhdHVzO1xuICBzZW5kTWVzc2FnZTogKG1hdGNoSWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nKSA9PiB2b2lkO1xuICBtYXJrQXNEZWxpdmVyZWQ6IChtYXRjaElkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG1hcmtBc1JlYWQ6IChtYXRjaElkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHN0YXJ0VHlwaW5nOiAobWF0Y2hJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBzdG9wVHlwaW5nOiAobWF0Y2hJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBhZGRNZXNzYWdlTGlzdGVuZXI6IChjYWxsYmFjazogKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHZvaWQpID0+ICgpID0+IHZvaWQ7XG4gIGFkZFR5cGluZ0xpc3RlbmVyOiAoY2FsbGJhY2s6IChkYXRhOiBUeXBpbmdVc2VyKSA9PiB2b2lkKSA9PiAoKSA9PiB2b2lkO1xuICBhZGREZWxpdmVyZWRMaXN0ZW5lcjogKGNhbGxiYWNrOiAoZGF0YTogeyBtYXRjaElkOiBzdHJpbmc7IG1lc3NhZ2VJZD86IHN0cmluZzsgZGVsaXZlcmVkQXQ6IHN0cmluZyB9KSA9PiB2b2lkKSA9PiAoKSA9PiB2b2lkO1xuICBhZGRSZWFkUmVjZWlwdExpc3RlbmVyOiAoY2FsbGJhY2s6IChkYXRhOiB7IG1hdGNoSWQ6IHN0cmluZzsgcmVhZEF0OiBzdHJpbmcgfSkgPT4gdm9pZCkgPT4gKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgTWVzc2FnaW5nQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8TWVzc2FnaW5nQ29udGV4dFR5cGUgfCBudWxsPihudWxsKTtcblxuZXhwb3J0IGNvbnN0IHVzZU1lc3NhZ2luZyA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoTWVzc2FnaW5nQ29udGV4dCk7XG4gIGlmICghY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlTWVzc2FnaW5nIG11c3QgYmUgdXNlZCB3aXRoaW4gTWVzc2FnaW5nUHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn07XG5cbmludGVyZmFjZSBNZXNzYWdpbmdQcm92aWRlclByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGNvbnN0IE1lc3NhZ2luZ1Byb3ZpZGVyOiBSZWFjdC5GQzxNZXNzYWdpbmdQcm92aWRlclByb3BzPiA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgY29uc3QgW3NvY2tldCwgc2V0U29ja2V0XSA9IHVzZVN0YXRlPFNvY2tldCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY29ubmVjdGlvblN0YXR1cywgc2V0Q29ubmVjdGlvblN0YXR1c10gPSB1c2VTdGF0ZTxDb25uZWN0aW9uU3RhdHVzPignZGlzY29ubmVjdGVkJyk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFt0eXBpbmdVc2Vycywgc2V0VHlwaW5nVXNlcnNdID0gdXNlU3RhdGU8VHlwaW5nVXNlcltdPihbXSk7XG4gIGNvbnN0IFtvbmxpbmVTdGF0dXMsIHNldE9ubGluZVN0YXR1c10gPSB1c2VTdGF0ZTxPbmxpbmVTdGF0dXM+KHt9KTtcblxuICBjb25zdCByZWNvbm5lY3RUaW1lb3V0UmVmID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0PigpO1xuICBjb25zdCByZWNvbm5lY3RBdHRlbXB0c1JlZiA9IHVzZVJlZigwKTtcbiAgY29uc3QgbWVzc2FnZUxpc3RlbmVyc1JlZiA9IHVzZVJlZjxTZXQ8KG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHZvaWQ+PihuZXcgU2V0KCkpO1xuICBjb25zdCB0eXBpbmdMaXN0ZW5lcnNSZWYgPSB1c2VSZWY8U2V0PChkYXRhOiBUeXBpbmdVc2VyKSA9PiB2b2lkPj4obmV3IFNldCgpKTtcbiAgY29uc3QgZGVsaXZlcmVkTGlzdGVuZXJzUmVmID0gdXNlUmVmPFNldDwoZGF0YTogeyBtYXRjaElkOiBzdHJpbmc7IG1lc3NhZ2VJZD86IHN0cmluZzsgZGVsaXZlcmVkQXQ6IHN0cmluZyB9KSA9PiB2b2lkPj4obmV3IFNldCgpKTtcbiAgY29uc3QgcmVhZFJlY2VpcHRMaXN0ZW5lcnNSZWYgPSB1c2VSZWY8U2V0PChkYXRhOiB7IG1hdGNoSWQ6IHN0cmluZzsgcmVhZEF0OiBzdHJpbmcgfSkgPT4gdm9pZD4+KG5ldyBTZXQoKSk7XG5cbiAgY29uc3QgZ2V0QmFja29mZkRlbGF5ID0gKGF0dGVtcHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gICAgLy8gRXhwb25lbnRpYWwgYmFja29mZjogMXMsIDJzLCA0cywgOHMsIDE2cywgbWF4IDMwc1xuICAgIHJldHVybiBNYXRoLm1pbigxMDAwICogTWF0aC5wb3coMiwgYXR0ZW1wdCksIDMwMDAwKTtcbiAgfTtcblxuICBjb25zdCBjb25uZWN0U29ja2V0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGxldCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBhY2Nlc3MgdG9rZW4sIHNraXBwaW5nIHNvY2tldCBjb25uZWN0aW9uJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0b2tlbi5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgIHRva2VuID0gdG9rZW4uc2xpY2UoJ0JlYXJlciAnLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNMb2NhbEhvc3QgPSAoXG4gICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgWydsb2NhbGhvc3QnLCAnMTI3LjAuMC4xJywgJ1s6OjFdJywgJzAuMC4wLjAnXS5pbmNsdWRlcyh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpXG4gICAgKTtcbiAgICBjb25zdCBiYWNrZW5kVXJsID0gaXNMb2NhbEhvc3RcbiAgICAgID8gJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMCdcbiAgICAgIDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnaHR0cHM6Ly9qZWNyYy1kYXRpbmctYmFja2VuZC5vbnJlbmRlci5jb20nO1xuXG4gICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBzb2NrZXQgY29ubmVjdGlvbiB0bzonLCBiYWNrZW5kVXJsKTtcbiAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdjb25uZWN0aW5nJyk7XG5cbiAgICBjb25zdCBuZXdTb2NrZXQgPSBpbyhiYWNrZW5kVXJsLCB7XG4gICAgICBhdXRoOiB7IHRva2VuIH0sXG4gICAgICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCcsICdwb2xsaW5nJ10sXG4gICAgICByZWNvbm5lY3Rpb246IHRydWUsXG4gICAgICByZWNvbm5lY3Rpb25EZWxheTogMTAwMCxcbiAgICAgIHJlY29ubmVjdGlvbkRlbGF5TWF4OiAzMDAwMCxcbiAgICAgIHJlY29ubmVjdGlvbkF0dGVtcHRzOiBJbmZpbml0eSxcbiAgICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgIH0pO1xuXG4gICAgLy8gQ29ubmVjdGlvbiBldmVudHNcbiAgICBuZXdTb2NrZXQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnU29ja2V0IGNvbm5lY3RlZDonLCBuZXdTb2NrZXQuaWQpO1xuICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cygnY29ubmVjdGVkJyk7XG4gICAgICByZWNvbm5lY3RBdHRlbXB0c1JlZi5jdXJyZW50ID0gMDtcbiAgICAgIGlmIChyZWNvbm5lY3RUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHJlY29ubmVjdFRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBuZXdTb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCAocmVhc29uKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnU29ja2V0IGRpc2Nvbm5lY3RlZDonLCByZWFzb24pO1xuICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cygnZGlzY29ubmVjdGVkJyk7XG4gICAgfSk7XG5cbiAgICBuZXdTb2NrZXQub24oJ2Nvbm5lY3RfZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NvY2tldCBjb25uZWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHNldENvbm5lY3Rpb25TdGF0dXMoJ3JlY29ubmVjdGluZycpO1xuXG4gICAgICAvLyBJbXBsZW1lbnQgY3VzdG9tIHJlY29ubmVjdGlvbiB3aXRoIGJhY2tvZmZcbiAgICAgIHJlY29ubmVjdEF0dGVtcHRzUmVmLmN1cnJlbnQrKztcbiAgICAgIGNvbnN0IGRlbGF5ID0gZ2V0QmFja29mZkRlbGF5KHJlY29ubmVjdEF0dGVtcHRzUmVmLmN1cnJlbnQpO1xuXG4gICAgICBjb25zb2xlLmxvZyhgUmVjb25uZWN0aW5nIGluICR7ZGVsYXl9bXMgKGF0dGVtcHQgJHtyZWNvbm5lY3RBdHRlbXB0c1JlZi5jdXJyZW50fSlgKTtcblxuICAgICAgaWYgKHJlY29ubmVjdFRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQocmVjb25uZWN0VGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIH1cblxuICAgICAgcmVjb25uZWN0VGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChuZXdTb2NrZXQuZGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgcmVjb25uZWN0aW9uLi4uJyk7XG4gICAgICAgICAgbmV3U29ja2V0LmNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpO1xuICAgIH0pO1xuXG4gICAgLy8gTWVzc2FnZSBldmVudHNcbiAgICBuZXdTb2NrZXQub24oJ25ld19tZXNzYWdlJywgKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBuZXcgbWVzc2FnZTonLCBtZXNzYWdlKTtcbiAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgbWVzc2FnZV0pO1xuXG4gICAgICAvLyBOb3RpZnkgYWxsIGxpc3RlbmVyc1xuICAgICAgbWVzc2FnZUxpc3RlbmVyc1JlZi5jdXJyZW50LmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihtZXNzYWdlKSk7XG4gICAgfSk7XG5cbiAgICBuZXdTb2NrZXQub24oJ21lc3NhZ2VfZGVsaXZlcmVkJywgKGRhdGE6IHsgbWF0Y2hJZDogc3RyaW5nOyBtZXNzYWdlSWQ/OiBzdHJpbmc7IGRlbGl2ZXJlZEF0OiBzdHJpbmcgfSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2UgZGVsaXZlcmVkOicsIGRhdGEpO1xuXG4gICAgICAvLyBVcGRhdGUgbWVzc2FnZXNcbiAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PlxuICAgICAgICBwcmV2Lm1hcCgobXNnKSA9PlxuICAgICAgICAgIChkYXRhLm1lc3NhZ2VJZCA/IG1zZy5pZCA9PT0gZGF0YS5tZXNzYWdlSWQgOiBtc2cubWF0Y2hJZCA9PT0gZGF0YS5tYXRjaElkICYmICFtc2cuZGVsaXZlcmVkQXQpXG4gICAgICAgICAgICA/IHsgLi4ubXNnLCBkZWxpdmVyZWRBdDogZGF0YS5kZWxpdmVyZWRBdCB9XG4gICAgICAgICAgICA6IG1zZ1xuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICAvLyBOb3RpZnkgbGlzdGVuZXJzXG4gICAgICBkZWxpdmVyZWRMaXN0ZW5lcnNSZWYuY3VycmVudC5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZGF0YSkpO1xuICAgIH0pO1xuXG4gICAgbmV3U29ja2V0Lm9uKCdtZXNzYWdlX3JlYWQnLCAoZGF0YTogeyBtYXRjaElkOiBzdHJpbmc7IHJlYWRBdDogc3RyaW5nIH0pID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIHJlYWQ6JywgZGF0YSk7XG5cbiAgICAgIC8vIFVwZGF0ZSBtZXNzYWdlc1xuICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+XG4gICAgICAgIHByZXYubWFwKChtc2cpID0+XG4gICAgICAgICAgbXNnLm1hdGNoSWQgPT09IGRhdGEubWF0Y2hJZCAmJiAhbXNnLnJlYWRBdFxuICAgICAgICAgICAgPyB7IC4uLm1zZywgcmVhZEF0OiBkYXRhLnJlYWRBdCB9XG4gICAgICAgICAgICA6IG1zZ1xuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICAvLyBOb3RpZnkgbGlzdGVuZXJzXG4gICAgICByZWFkUmVjZWlwdExpc3RlbmVyc1JlZi5jdXJyZW50LmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihkYXRhKSk7XG4gICAgfSk7XG5cbiAgICAvLyBUeXBpbmcgZXZlbnRzXG4gICAgbmV3U29ja2V0Lm9uKCd1c2VyX3R5cGluZycsIChkYXRhOiBUeXBpbmdVc2VyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnVXNlciB0eXBpbmc6JywgZGF0YSk7XG4gICAgICBzZXRUeXBpbmdVc2VycygocHJldikgPT4ge1xuICAgICAgICBjb25zdCBleGlzdHMgPSBwcmV2LmZpbmQoKHUpID0+IHUubWF0Y2hJZCA9PT0gZGF0YS5tYXRjaElkICYmIHUudXNlcklkID09PSBkYXRhLnVzZXJJZCk7XG4gICAgICAgIGlmIChleGlzdHMpIHJldHVybiBwcmV2O1xuICAgICAgICByZXR1cm4gWy4uLnByZXYsIGRhdGFdO1xuICAgICAgfSk7XG5cbiAgICAgIHR5cGluZ0xpc3RlbmVyc1JlZi5jdXJyZW50LmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihkYXRhKSk7XG4gICAgfSk7XG5cbiAgICBuZXdTb2NrZXQub24oJ3VzZXJfc3RvcHBlZF90eXBpbmcnLCAoZGF0YTogeyBtYXRjaElkOiBzdHJpbmc7IHVzZXJJZDogc3RyaW5nIH0pID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyIHN0b3BwZWQgdHlwaW5nOicsIGRhdGEpO1xuICAgICAgc2V0VHlwaW5nVXNlcnMoKHByZXYpID0+XG4gICAgICAgIHByZXYuZmlsdGVyKCh1KSA9PiAhKHUubWF0Y2hJZCA9PT0gZGF0YS5tYXRjaElkICYmIHUudXNlcklkID09PSBkYXRhLnVzZXJJZCkpXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgLy8gT25saW5lIHN0YXR1cyBldmVudHNcbiAgICBuZXdTb2NrZXQub24oJ3VzZXJfb25saW5lJywgKGRhdGE6IHsgdXNlcklkOiBzdHJpbmcgfSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1VzZXIgb25saW5lOicsIGRhdGEpO1xuICAgICAgc2V0T25saW5lU3RhdHVzKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBbZGF0YS51c2VySWRdOiB0cnVlIH0pKTtcbiAgICB9KTtcblxuICAgIG5ld1NvY2tldC5vbigndXNlcl9vZmZsaW5lJywgKGRhdGE6IHsgdXNlcklkOiBzdHJpbmcgfSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1VzZXIgb2ZmbGluZTonLCBkYXRhKTtcbiAgICAgIHNldE9ubGluZVN0YXR1cygocHJldikgPT4gKHsgLi4ucHJldiwgW2RhdGEudXNlcklkXTogZmFsc2UgfSkpO1xuICAgIH0pO1xuXG4gICAgc2V0U29ja2V0KG5ld1NvY2tldCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0NsZWFuaW5nIHVwIHNvY2tldCBjb25uZWN0aW9uJyk7XG4gICAgICBpZiAocmVjb25uZWN0VGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFyVGltZW91dChyZWNvbm5lY3RUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgfVxuICAgICAgbmV3U29ja2V0LmNsb3NlKCk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY2xlYW51cCA9IGNvbm5lY3RTb2NrZXQoKTtcblxuICAgIC8vIExpc3RlbiBmb3IgdG9rZW4gcmVmcmVzaCBldmVudHNcbiAgICBjb25zdCBoYW5kbGVUb2tlblJlZnJlc2ggPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnVG9rZW4gcmVmcmVzaGVkLCByZWNvbm5lY3Rpbmcgc29ja2V0Li4uJyk7XG4gICAgICAvLyBSZWNvbm5lY3Qgc29ja2V0IHdpdGggbmV3IHRva2VuXG4gICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgIHNvY2tldC5kaXNjb25uZWN0KCk7XG4gICAgICB9XG4gICAgICBjb25uZWN0U29ja2V0KCk7XG4gICAgfTtcblxuICAgIC8vIExpc3RlbiBmb3Igc3RvcmFnZSBldmVudHMgKHRva2VuIHVwZGF0ZXMpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rva2VuUmVmcmVzaGVkJywgaGFuZGxlVG9rZW5SZWZyZXNoKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhbnVwPy4oKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b2tlblJlZnJlc2hlZCcsIGhhbmRsZVRva2VuUmVmcmVzaCk7XG4gICAgfTtcbiAgfSwgW2Nvbm5lY3RTb2NrZXRdKTtcblxuICBjb25zdCBzZW5kTWVzc2FnZSA9IHVzZUNhbGxiYWNrKChtYXRjaElkOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgIGlmICghc29ja2V0IHx8ICFzb2NrZXQuY29ubmVjdGVkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTb2NrZXQgbm90IGNvbm5lY3RlZCwgY2Fubm90IHNlbmQgbWVzc2FnZScpO1xuICAgICAgLy8gVE9ETzogUXVldWUgbWVzc2FnZSBmb3Igb2ZmbGluZSBzZW5kaW5nXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc29ja2V0LmVtaXQoJ3NlbmRfbWVzc2FnZScsIHsgbWF0Y2hJZCwgY29udGVudCB9LCAocmVzcG9uc2U6IGFueSkgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlPy5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2U6JywgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2Ugc2VudCBzdWNjZXNzZnVsbHk6JywgcmVzcG9uc2UpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbc29ja2V0XSk7XG5cbiAgY29uc3QgbWFya0FzRGVsaXZlcmVkID0gdXNlQ2FsbGJhY2soKG1hdGNoSWQ6IHN0cmluZykgPT4ge1xuICAgIGlmICghc29ja2V0IHx8ICFzb2NrZXQuY29ubmVjdGVkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTb2NrZXQgbm90IGNvbm5lY3RlZCwgY2Fubm90IG1hcmsgYXMgZGVsaXZlcmVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc29ja2V0LmVtaXQoJ21hcmtfYXNfZGVsaXZlcmVkJywgeyBtYXRjaElkIH0pO1xuICB9LCBbc29ja2V0XSk7XG5cbiAgY29uc3QgbWFya0FzUmVhZCA9IHVzZUNhbGxiYWNrKChtYXRjaElkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXNvY2tldCB8fCAhc29ja2V0LmNvbm5lY3RlZCkge1xuICAgICAgY29uc29sZS5lcnJvcignU29ja2V0IG5vdCBjb25uZWN0ZWQsIGNhbm5vdCBtYXJrIGFzIHJlYWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzb2NrZXQuZW1pdCgnbWFya19hc19yZWFkJywgeyBtYXRjaElkIH0pO1xuICB9LCBbc29ja2V0XSk7XG5cbiAgY29uc3Qgc3RhcnRUeXBpbmcgPSB1c2VDYWxsYmFjaygobWF0Y2hJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFzb2NrZXQgfHwgIXNvY2tldC5jb25uZWN0ZWQpIHJldHVybjtcbiAgICBzb2NrZXQuZW1pdCgndHlwaW5nJywgeyBtYXRjaElkIH0pO1xuICB9LCBbc29ja2V0XSk7XG5cbiAgY29uc3Qgc3RvcFR5cGluZyA9IHVzZUNhbGxiYWNrKChtYXRjaElkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXNvY2tldCB8fCAhc29ja2V0LmNvbm5lY3RlZCkgcmV0dXJuO1xuICAgIHNvY2tldC5lbWl0KCdzdG9wX3R5cGluZycsIHsgbWF0Y2hJZCB9KTtcbiAgfSwgW3NvY2tldF0pO1xuXG4gIGNvbnN0IGFkZE1lc3NhZ2VMaXN0ZW5lciA9IHVzZUNhbGxiYWNrKChjYWxsYmFjazogKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHZvaWQpID0+IHtcbiAgICBtZXNzYWdlTGlzdGVuZXJzUmVmLmN1cnJlbnQuYWRkKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbWVzc2FnZUxpc3RlbmVyc1JlZi5jdXJyZW50LmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGFkZFR5cGluZ0xpc3RlbmVyID0gdXNlQ2FsbGJhY2soKGNhbGxiYWNrOiAoZGF0YTogVHlwaW5nVXNlcikgPT4gdm9pZCkgPT4ge1xuICAgIHR5cGluZ0xpc3RlbmVyc1JlZi5jdXJyZW50LmFkZChjYWxsYmFjayk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHR5cGluZ0xpc3RlbmVyc1JlZi5jdXJyZW50LmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGFkZERlbGl2ZXJlZExpc3RlbmVyID0gdXNlQ2FsbGJhY2soKGNhbGxiYWNrOiAoZGF0YTogeyBtYXRjaElkOiBzdHJpbmc7IG1lc3NhZ2VJZD86IHN0cmluZzsgZGVsaXZlcmVkQXQ6IHN0cmluZyB9KSA9PiB2b2lkKSA9PiB7XG4gICAgZGVsaXZlcmVkTGlzdGVuZXJzUmVmLmN1cnJlbnQuYWRkKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZGVsaXZlcmVkTGlzdGVuZXJzUmVmLmN1cnJlbnQuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgY29uc3QgYWRkUmVhZFJlY2VpcHRMaXN0ZW5lciA9IHVzZUNhbGxiYWNrKChjYWxsYmFjazogKGRhdGE6IHsgbWF0Y2hJZDogc3RyaW5nOyByZWFkQXQ6IHN0cmluZyB9KSA9PiB2b2lkKSA9PiB7XG4gICAgcmVhZFJlY2VpcHRMaXN0ZW5lcnNSZWYuY3VycmVudC5hZGQoY2FsbGJhY2spO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZWFkUmVjZWlwdExpc3RlbmVyc1JlZi5jdXJyZW50LmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHZhbHVlOiBNZXNzYWdpbmdDb250ZXh0VHlwZSA9IHtcbiAgICBzb2NrZXQsXG4gICAgY29ubmVjdGlvblN0YXR1cyxcbiAgICBtZXNzYWdlcyxcbiAgICB0eXBpbmdVc2VycyxcbiAgICBvbmxpbmVTdGF0dXMsXG4gICAgc2VuZE1lc3NhZ2UsXG4gICAgbWFya0FzRGVsaXZlcmVkLFxuICAgIG1hcmtBc1JlYWQsXG4gICAgc3RhcnRUeXBpbmcsXG4gICAgc3RvcFR5cGluZyxcbiAgICBhZGRNZXNzYWdlTGlzdGVuZXIsXG4gICAgYWRkVHlwaW5nTGlzdGVuZXIsXG4gICAgYWRkRGVsaXZlcmVkTGlzdGVuZXIsXG4gICAgYWRkUmVhZFJlY2VpcHRMaXN0ZW5lcixcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxNZXNzYWdpbmdDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt2YWx1ZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9NZXNzYWdpbmdDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsImlvIiwiTWVzc2FnaW5nQ29udGV4dCIsInVzZU1lc3NhZ2luZyIsImNvbnRleHQiLCJFcnJvciIsIk1lc3NhZ2luZ1Byb3ZpZGVyIiwiY2hpbGRyZW4iLCJzb2NrZXQiLCJzZXRTb2NrZXQiLCJjb25uZWN0aW9uU3RhdHVzIiwic2V0Q29ubmVjdGlvblN0YXR1cyIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJ0eXBpbmdVc2VycyIsInNldFR5cGluZ1VzZXJzIiwib25saW5lU3RhdHVzIiwic2V0T25saW5lU3RhdHVzIiwicmVjb25uZWN0VGltZW91dFJlZiIsInJlY29ubmVjdEF0dGVtcHRzUmVmIiwibWVzc2FnZUxpc3RlbmVyc1JlZiIsIlNldCIsInR5cGluZ0xpc3RlbmVyc1JlZiIsImRlbGl2ZXJlZExpc3RlbmVyc1JlZiIsInJlYWRSZWNlaXB0TGlzdGVuZXJzUmVmIiwiZ2V0QmFja29mZkRlbGF5IiwiYXR0ZW1wdCIsIk1hdGgiLCJtaW4iLCJwb3ciLCJjb25uZWN0U29ja2V0IiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY29uc29sZSIsImxvZyIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImxlbmd0aCIsImlzTG9jYWxIb3N0IiwiaW5jbHVkZXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwiYmFja2VuZFVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwibmV3U29ja2V0IiwiYXV0aCIsInRyYW5zcG9ydHMiLCJyZWNvbm5lY3Rpb24iLCJyZWNvbm5lY3Rpb25EZWxheSIsInJlY29ubmVjdGlvbkRlbGF5TWF4IiwicmVjb25uZWN0aW9uQXR0ZW1wdHMiLCJJbmZpbml0eSIsInRpbWVvdXQiLCJvbiIsImlkIiwiY3VycmVudCIsImNsZWFyVGltZW91dCIsInJlYXNvbiIsImVycm9yIiwiZGVsYXkiLCJzZXRUaW1lb3V0IiwiZGlzY29ubmVjdGVkIiwiY29ubmVjdCIsIm1lc3NhZ2UiLCJwcmV2IiwiZm9yRWFjaCIsImxpc3RlbmVyIiwiZGF0YSIsIm1hcCIsIm1zZyIsIm1lc3NhZ2VJZCIsIm1hdGNoSWQiLCJkZWxpdmVyZWRBdCIsInJlYWRBdCIsImV4aXN0cyIsImZpbmQiLCJ1IiwidXNlcklkIiwiZmlsdGVyIiwiY2xvc2UiLCJjbGVhbnVwIiwiaGFuZGxlVG9rZW5SZWZyZXNoIiwiZGlzY29ubmVjdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2VuZE1lc3NhZ2UiLCJjb250ZW50IiwiY29ubmVjdGVkIiwiZW1pdCIsInJlc3BvbnNlIiwibWFya0FzRGVsaXZlcmVkIiwibWFya0FzUmVhZCIsInN0YXJ0VHlwaW5nIiwic3RvcFR5cGluZyIsImFkZE1lc3NhZ2VMaXN0ZW5lciIsImNhbGxiYWNrIiwiYWRkIiwiZGVsZXRlIiwiYWRkVHlwaW5nTGlzdGVuZXIiLCJhZGREZWxpdmVyZWRMaXN0ZW5lciIsImFkZFJlYWRSZWNlaXB0TGlzdGVuZXIiLCJ2YWx1ZSIsIlByb3ZpZGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/contexts/MessagingContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/utils/backgroundTabOptimization.ts":
/*!************************************************!*\
  !*** ./src/utils/backgroundTabOptimization.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanupBackgroundOptimization: () => (/* binding */ cleanupBackgroundOptimization),\n/* harmony export */   handleVisibilityChange: () => (/* binding */ handleVisibilityChange),\n/* harmony export */   initializeBackgroundOptimization: () => (/* binding */ initializeBackgroundOptimization),\n/* harmony export */   isTabHidden: () => (/* binding */ isTabHidden)\n/* harmony export */ });\n/* harmony import */ var _tokenManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tokenManager */ \"(ssr)/./src/utils/tokenManager.ts\");\n/**\n * Background Tab Optimization\n * Pauses token refresh scheduling when tab is hidden\n * Validates token freshness when tab becomes visible\n */ \n// Debug mode flag for verbose logging\nconst DEBUG_MODE = \"development\" === \"development\";\n// Track visibility change listener for cleanup\nlet visibilityChangeListener = null;\n// Custom callbacks for testing\nlet customScheduleCallback = null;\nlet customClearCallback = null;\nlet customValidateCallback = null;\n/**\n * Handle visibility change events\n * Pauses refresh scheduling when tab is hidden\n * Resumes scheduling and validates token when tab becomes visible\n */ function handleVisibilityChange() {\n    if (typeof document === \"undefined\") return;\n    const isHidden = document.hidden;\n    if (isHidden) {\n        // Tab is now hidden - pause proactive refresh scheduling\n        if (DEBUG_MODE) {\n            console.log(\"[BackgroundOptimization] Tab hidden, pausing refresh scheduling\");\n        }\n        // Clear any scheduled refresh\n        const currentTimeout = (0,_tokenManager__WEBPACK_IMPORTED_MODULE_0__.getRefreshScheduleTimeout)();\n        if (currentTimeout) {\n            clearTimeout(currentTimeout);\n            (0,_tokenManager__WEBPACK_IMPORTED_MODULE_0__.setRefreshScheduleTimeout)(null);\n            if (DEBUG_MODE) {\n                console.log(\"[BackgroundOptimization] Cleared scheduled refresh\");\n            }\n        }\n        // Call custom clear callback if provided (for testing)\n        if (customClearCallback) {\n            customClearCallback();\n        }\n    } else {\n        // Tab is now visible - resume scheduling and validate token\n        if (DEBUG_MODE) {\n            console.log(\"[BackgroundOptimization] Tab visible, resuming refresh scheduling\");\n        }\n        // Check if we have a token before proceeding\n        if (false) {}\n        // Validate token freshness\n        if (DEBUG_MODE) {\n            console.log(\"[BackgroundOptimization] Validating token freshness\");\n        }\n        // Call custom validate callback if provided (for testing)\n        if (customValidateCallback) {\n            customValidateCallback();\n        }\n        // Always schedule refresh when tab becomes visible (if token exists)\n        // The scheduling mechanism itself will handle checking if refresh is needed\n        if (customScheduleCallback) {\n            customScheduleCallback();\n        } else {\n            (0,_tokenManager__WEBPACK_IMPORTED_MODULE_0__.scheduleProactiveRefresh)();\n        }\n    }\n}\n/**\n * Initialize background tab optimization\n * Sets up visibility change listener\n * \n * @param scheduleCallback - Optional custom schedule callback for testing\n * @param clearCallback - Optional custom clear callback for testing\n * @param validateCallback - Optional custom validate callback for testing\n */ function initializeBackgroundOptimization(scheduleCallback, clearCallback, validateCallback) {\n    if (typeof document === \"undefined\") return;\n    // Store custom callbacks for testing\n    customScheduleCallback = scheduleCallback || null;\n    customClearCallback = clearCallback || null;\n    customValidateCallback = validateCallback || null;\n    // Clean up existing listener if any\n    if (visibilityChangeListener) {\n        document.removeEventListener(\"visibilitychange\", visibilityChangeListener);\n    }\n    // Create and store the listener\n    visibilityChangeListener = handleVisibilityChange;\n    // Add visibility change listener\n    document.addEventListener(\"visibilitychange\", visibilityChangeListener);\n    console.log(\"[BackgroundOptimization] Background tab optimization initialized\");\n    if (DEBUG_MODE) {\n        console.log(\"[BackgroundOptimization] Visibility change listener added\");\n        console.log(\"[BackgroundOptimization] Current visibility state:\", document.hidden ? \"hidden\" : \"visible\");\n    }\n    // If tab is currently hidden, don't schedule refresh\n    // If tab is visible, the normal scheduling will handle it\n    if (document.hidden) {\n        if (DEBUG_MODE) {\n            console.log(\"[BackgroundOptimization] Tab is hidden on initialization, refresh scheduling paused\");\n        }\n    }\n}\n/**\n * Cleanup background tab optimization\n * Removes visibility change listener\n */ function cleanupBackgroundOptimization() {\n    if (typeof document === \"undefined\") return;\n    if (visibilityChangeListener) {\n        document.removeEventListener(\"visibilitychange\", visibilityChangeListener);\n        visibilityChangeListener = null;\n        if (DEBUG_MODE) {\n            console.log(\"[BackgroundOptimization] Visibility change listener removed\");\n        }\n    }\n    // Clear custom callbacks\n    customScheduleCallback = null;\n    customClearCallback = null;\n    customValidateCallback = null;\n    console.log(\"[BackgroundOptimization] Background tab optimization cleaned up\");\n}\n/**\n * Check if tab is currently hidden\n */ function isTabHidden() {\n    if (typeof document === \"undefined\") return false;\n    return document.hidden;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdXRpbHMvYmFja2dyb3VuZFRhYk9wdGltaXphdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7O0NBSUMsR0FFK0k7QUFFaEosc0NBQXNDO0FBQ3RDLE1BQU1HLGFBQWFDLGtCQUF5QjtBQUU1QywrQ0FBK0M7QUFDL0MsSUFBSUMsMkJBQWdEO0FBRXBELCtCQUErQjtBQUMvQixJQUFJQyx5QkFBOEM7QUFDbEQsSUFBSUMsc0JBQTJDO0FBQy9DLElBQUlDLHlCQUE4QztBQUVsRDs7OztDQUlDLEdBQ00sU0FBU0M7SUFDZCxJQUFJLE9BQU9DLGFBQWEsYUFBYTtJQUVyQyxNQUFNQyxXQUFXRCxTQUFTRSxNQUFNO0lBRWhDLElBQUlELFVBQVU7UUFDWix5REFBeUQ7UUFDekQsSUFBSVIsWUFBWTtZQUNkVSxRQUFRQyxHQUFHLENBQUM7UUFDZDtRQUVBLDhCQUE4QjtRQUM5QixNQUFNQyxpQkFBaUJkLHdFQUF5QkE7UUFDaEQsSUFBSWMsZ0JBQWdCO1lBQ2xCQyxhQUFhRDtZQUNiYix3RUFBeUJBLENBQUM7WUFDMUIsSUFBSUMsWUFBWTtnQkFDZFUsUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7UUFDRjtRQUVBLHVEQUF1RDtRQUN2RCxJQUFJUCxxQkFBcUI7WUFDdkJBO1FBQ0Y7SUFDRixPQUFPO1FBQ0wsNERBQTREO1FBQzVELElBQUlKLFlBQVk7WUFDZFUsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7UUFFQSw2Q0FBNkM7UUFDN0MsSUFBSSxLQUFrQixFQUFhLEVBU2xDO1FBRUQsMkJBQTJCO1FBQzNCLElBQUlYLFlBQVk7WUFDZFUsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7UUFFQSwwREFBMEQ7UUFDMUQsSUFBSU4sd0JBQXdCO1lBQzFCQTtRQUNGO1FBRUEscUVBQXFFO1FBQ3JFLDRFQUE0RTtRQUM1RSxJQUFJRix3QkFBd0I7WUFDMUJBO1FBQ0YsT0FBTztZQUNMTix1RUFBd0JBO1FBQzFCO0lBQ0Y7QUFDRjtBQUVBOzs7Ozs7O0NBT0MsR0FDTSxTQUFTb0IsaUNBQ2RDLGdCQUE2QixFQUM3QkMsYUFBMEIsRUFDMUJDLGdCQUE2QjtJQUU3QixJQUFJLE9BQU9iLGFBQWEsYUFBYTtJQUVyQyxxQ0FBcUM7SUFDckNKLHlCQUF5QmUsb0JBQW9CO0lBQzdDZCxzQkFBc0JlLGlCQUFpQjtJQUN2Q2QseUJBQXlCZSxvQkFBb0I7SUFFN0Msb0NBQW9DO0lBQ3BDLElBQUlsQiwwQkFBMEI7UUFDNUJLLFNBQVNjLG1CQUFtQixDQUFDLG9CQUFvQm5CO0lBQ25EO0lBRUEsZ0NBQWdDO0lBQ2hDQSwyQkFBMkJJO0lBRTNCLGlDQUFpQztJQUNqQ0MsU0FBU2UsZ0JBQWdCLENBQUMsb0JBQW9CcEI7SUFFOUNRLFFBQVFDLEdBQUcsQ0FBQztJQUVaLElBQUlYLFlBQVk7UUFDZFUsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FBQyxzREFBc0RKLFNBQVNFLE1BQU0sR0FBRyxXQUFXO0lBQ2pHO0lBRUEscURBQXFEO0lBQ3JELDBEQUEwRDtJQUMxRCxJQUFJRixTQUFTRSxNQUFNLEVBQUU7UUFDbkIsSUFBSVQsWUFBWTtZQUNkVSxRQUFRQyxHQUFHLENBQUM7UUFDZDtJQUNGO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTWTtJQUNkLElBQUksT0FBT2hCLGFBQWEsYUFBYTtJQUVyQyxJQUFJTCwwQkFBMEI7UUFDNUJLLFNBQVNjLG1CQUFtQixDQUFDLG9CQUFvQm5CO1FBQ2pEQSwyQkFBMkI7UUFFM0IsSUFBSUYsWUFBWTtZQUNkVSxRQUFRQyxHQUFHLENBQUM7UUFDZDtJQUNGO0lBRUEseUJBQXlCO0lBQ3pCUix5QkFBeUI7SUFDekJDLHNCQUFzQjtJQUN0QkMseUJBQXlCO0lBRXpCSyxRQUFRQyxHQUFHLENBQUM7QUFDZDtBQUVBOztDQUVDLEdBQ00sU0FBU2E7SUFDZCxJQUFJLE9BQU9qQixhQUFhLGFBQWEsT0FBTztJQUM1QyxPQUFPQSxTQUFTRSxNQUFNO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamVjcmMtZGF0aW5nLWZyb250ZW5kLy4vc3JjL3V0aWxzL2JhY2tncm91bmRUYWJPcHRpbWl6YXRpb24udHM/ZjFlYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJhY2tncm91bmQgVGFiIE9wdGltaXphdGlvblxuICogUGF1c2VzIHRva2VuIHJlZnJlc2ggc2NoZWR1bGluZyB3aGVuIHRhYiBpcyBoaWRkZW5cbiAqIFZhbGlkYXRlcyB0b2tlbiBmcmVzaG5lc3Mgd2hlbiB0YWIgYmVjb21lcyB2aXNpYmxlXG4gKi9cblxuaW1wb3J0IHsgc2NoZWR1bGVQcm9hY3RpdmVSZWZyZXNoLCBnZXRSZWZyZXNoU2NoZWR1bGVUaW1lb3V0LCBzZXRSZWZyZXNoU2NoZWR1bGVUaW1lb3V0LCBuZWVkc1JlZnJlc2gsIHJlZnJlc2hXaXRoUmV0cnkgfSBmcm9tICcuL3Rva2VuTWFuYWdlcic7XG5cbi8vIERlYnVnIG1vZGUgZmxhZyBmb3IgdmVyYm9zZSBsb2dnaW5nXG5jb25zdCBERUJVR19NT0RFID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG5cbi8vIFRyYWNrIHZpc2liaWxpdHkgY2hhbmdlIGxpc3RlbmVyIGZvciBjbGVhbnVwXG5sZXQgdmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblxuLy8gQ3VzdG9tIGNhbGxiYWNrcyBmb3IgdGVzdGluZ1xubGV0IGN1c3RvbVNjaGVkdWxlQ2FsbGJhY2s6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xubGV0IGN1c3RvbUNsZWFyQ2FsbGJhY2s6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xubGV0IGN1c3RvbVZhbGlkYXRlQ2FsbGJhY2s6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXG4vKipcbiAqIEhhbmRsZSB2aXNpYmlsaXR5IGNoYW5nZSBldmVudHNcbiAqIFBhdXNlcyByZWZyZXNoIHNjaGVkdWxpbmcgd2hlbiB0YWIgaXMgaGlkZGVuXG4gKiBSZXN1bWVzIHNjaGVkdWxpbmcgYW5kIHZhbGlkYXRlcyB0b2tlbiB3aGVuIHRhYiBiZWNvbWVzIHZpc2libGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKTogdm9pZCB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG5cbiAgY29uc3QgaXNIaWRkZW4gPSBkb2N1bWVudC5oaWRkZW47XG5cbiAgaWYgKGlzSGlkZGVuKSB7XG4gICAgLy8gVGFiIGlzIG5vdyBoaWRkZW4gLSBwYXVzZSBwcm9hY3RpdmUgcmVmcmVzaCBzY2hlZHVsaW5nXG4gICAgaWYgKERFQlVHX01PREUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQmFja2dyb3VuZE9wdGltaXphdGlvbl0gVGFiIGhpZGRlbiwgcGF1c2luZyByZWZyZXNoIHNjaGVkdWxpbmcnKTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBhbnkgc2NoZWR1bGVkIHJlZnJlc2hcbiAgICBjb25zdCBjdXJyZW50VGltZW91dCA9IGdldFJlZnJlc2hTY2hlZHVsZVRpbWVvdXQoKTtcbiAgICBpZiAoY3VycmVudFRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChjdXJyZW50VGltZW91dCk7XG4gICAgICBzZXRSZWZyZXNoU2NoZWR1bGVUaW1lb3V0KG51bGwpO1xuICAgICAgaWYgKERFQlVHX01PREUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tCYWNrZ3JvdW5kT3B0aW1pemF0aW9uXSBDbGVhcmVkIHNjaGVkdWxlZCByZWZyZXNoJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsbCBjdXN0b20gY2xlYXIgY2FsbGJhY2sgaWYgcHJvdmlkZWQgKGZvciB0ZXN0aW5nKVxuICAgIGlmIChjdXN0b21DbGVhckNhbGxiYWNrKSB7XG4gICAgICBjdXN0b21DbGVhckNhbGxiYWNrKCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIFRhYiBpcyBub3cgdmlzaWJsZSAtIHJlc3VtZSBzY2hlZHVsaW5nIGFuZCB2YWxpZGF0ZSB0b2tlblxuICAgIGlmIChERUJVR19NT0RFKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0JhY2tncm91bmRPcHRpbWl6YXRpb25dIFRhYiB2aXNpYmxlLCByZXN1bWluZyByZWZyZXNoIHNjaGVkdWxpbmcnKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGEgdG9rZW4gYmVmb3JlIHByb2NlZWRpbmdcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IGhhc1Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG4gICAgICBcbiAgICAgIGlmICghaGFzVG9rZW4pIHtcbiAgICAgICAgaWYgKERFQlVHX01PREUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0JhY2tncm91bmRPcHRpbWl6YXRpb25dIE5vIHRva2VuIGZvdW5kLCBza2lwcGluZyByZWZyZXNoIHNjaGVkdWxpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgdG9rZW4gZnJlc2huZXNzXG4gICAgaWYgKERFQlVHX01PREUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQmFja2dyb3VuZE9wdGltaXphdGlvbl0gVmFsaWRhdGluZyB0b2tlbiBmcmVzaG5lc3MnKTtcbiAgICB9XG5cbiAgICAvLyBDYWxsIGN1c3RvbSB2YWxpZGF0ZSBjYWxsYmFjayBpZiBwcm92aWRlZCAoZm9yIHRlc3RpbmcpXG4gICAgaWYgKGN1c3RvbVZhbGlkYXRlQ2FsbGJhY2spIHtcbiAgICAgIGN1c3RvbVZhbGlkYXRlQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvLyBBbHdheXMgc2NoZWR1bGUgcmVmcmVzaCB3aGVuIHRhYiBiZWNvbWVzIHZpc2libGUgKGlmIHRva2VuIGV4aXN0cylcbiAgICAvLyBUaGUgc2NoZWR1bGluZyBtZWNoYW5pc20gaXRzZWxmIHdpbGwgaGFuZGxlIGNoZWNraW5nIGlmIHJlZnJlc2ggaXMgbmVlZGVkXG4gICAgaWYgKGN1c3RvbVNjaGVkdWxlQ2FsbGJhY2spIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlQ2FsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVQcm9hY3RpdmVSZWZyZXNoKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBiYWNrZ3JvdW5kIHRhYiBvcHRpbWl6YXRpb25cbiAqIFNldHMgdXAgdmlzaWJpbGl0eSBjaGFuZ2UgbGlzdGVuZXJcbiAqIFxuICogQHBhcmFtIHNjaGVkdWxlQ2FsbGJhY2sgLSBPcHRpb25hbCBjdXN0b20gc2NoZWR1bGUgY2FsbGJhY2sgZm9yIHRlc3RpbmdcbiAqIEBwYXJhbSBjbGVhckNhbGxiYWNrIC0gT3B0aW9uYWwgY3VzdG9tIGNsZWFyIGNhbGxiYWNrIGZvciB0ZXN0aW5nXG4gKiBAcGFyYW0gdmFsaWRhdGVDYWxsYmFjayAtIE9wdGlvbmFsIGN1c3RvbSB2YWxpZGF0ZSBjYWxsYmFjayBmb3IgdGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUJhY2tncm91bmRPcHRpbWl6YXRpb24oXG4gIHNjaGVkdWxlQ2FsbGJhY2s/OiAoKSA9PiB2b2lkLFxuICBjbGVhckNhbGxiYWNrPzogKCkgPT4gdm9pZCxcbiAgdmFsaWRhdGVDYWxsYmFjaz86ICgpID0+IHZvaWRcbik6IHZvaWQge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuXG4gIC8vIFN0b3JlIGN1c3RvbSBjYWxsYmFja3MgZm9yIHRlc3RpbmdcbiAgY3VzdG9tU2NoZWR1bGVDYWxsYmFjayA9IHNjaGVkdWxlQ2FsbGJhY2sgfHwgbnVsbDtcbiAgY3VzdG9tQ2xlYXJDYWxsYmFjayA9IGNsZWFyQ2FsbGJhY2sgfHwgbnVsbDtcbiAgY3VzdG9tVmFsaWRhdGVDYWxsYmFjayA9IHZhbGlkYXRlQ2FsbGJhY2sgfHwgbnVsbDtcblxuICAvLyBDbGVhbiB1cCBleGlzdGluZyBsaXN0ZW5lciBpZiBhbnlcbiAgaWYgKHZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcikge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCB2aXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIpO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGFuZCBzdG9yZSB0aGUgbGlzdGVuZXJcbiAgdmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyID0gaGFuZGxlVmlzaWJpbGl0eUNoYW5nZTtcblxuICAvLyBBZGQgdmlzaWJpbGl0eSBjaGFuZ2UgbGlzdGVuZXJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHZpc2liaWxpdHlDaGFuZ2VMaXN0ZW5lcik7XG5cbiAgY29uc29sZS5sb2coJ1tCYWNrZ3JvdW5kT3B0aW1pemF0aW9uXSBCYWNrZ3JvdW5kIHRhYiBvcHRpbWl6YXRpb24gaW5pdGlhbGl6ZWQnKTtcblxuICBpZiAoREVCVUdfTU9ERSkge1xuICAgIGNvbnNvbGUubG9nKCdbQmFja2dyb3VuZE9wdGltaXphdGlvbl0gVmlzaWJpbGl0eSBjaGFuZ2UgbGlzdGVuZXIgYWRkZWQnKTtcbiAgICBjb25zb2xlLmxvZygnW0JhY2tncm91bmRPcHRpbWl6YXRpb25dIEN1cnJlbnQgdmlzaWJpbGl0eSBzdGF0ZTonLCBkb2N1bWVudC5oaWRkZW4gPyAnaGlkZGVuJyA6ICd2aXNpYmxlJyk7XG4gIH1cblxuICAvLyBJZiB0YWIgaXMgY3VycmVudGx5IGhpZGRlbiwgZG9uJ3Qgc2NoZWR1bGUgcmVmcmVzaFxuICAvLyBJZiB0YWIgaXMgdmlzaWJsZSwgdGhlIG5vcm1hbCBzY2hlZHVsaW5nIHdpbGwgaGFuZGxlIGl0XG4gIGlmIChkb2N1bWVudC5oaWRkZW4pIHtcbiAgICBpZiAoREVCVUdfTU9ERSkge1xuICAgICAgY29uc29sZS5sb2coJ1tCYWNrZ3JvdW5kT3B0aW1pemF0aW9uXSBUYWIgaXMgaGlkZGVuIG9uIGluaXRpYWxpemF0aW9uLCByZWZyZXNoIHNjaGVkdWxpbmcgcGF1c2VkJyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ2xlYW51cCBiYWNrZ3JvdW5kIHRhYiBvcHRpbWl6YXRpb25cbiAqIFJlbW92ZXMgdmlzaWJpbGl0eSBjaGFuZ2UgbGlzdGVuZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFudXBCYWNrZ3JvdW5kT3B0aW1pemF0aW9uKCk6IHZvaWQge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuXG4gIGlmICh2aXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdmlzaWJpbGl0eUNoYW5nZUxpc3RlbmVyKTtcbiAgICB2aXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuXG4gICAgaWYgKERFQlVHX01PREUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbQmFja2dyb3VuZE9wdGltaXphdGlvbl0gVmlzaWJpbGl0eSBjaGFuZ2UgbGlzdGVuZXIgcmVtb3ZlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFyIGN1c3RvbSBjYWxsYmFja3NcbiAgY3VzdG9tU2NoZWR1bGVDYWxsYmFjayA9IG51bGw7XG4gIGN1c3RvbUNsZWFyQ2FsbGJhY2sgPSBudWxsO1xuICBjdXN0b21WYWxpZGF0ZUNhbGxiYWNrID0gbnVsbDtcblxuICBjb25zb2xlLmxvZygnW0JhY2tncm91bmRPcHRpbWl6YXRpb25dIEJhY2tncm91bmQgdGFiIG9wdGltaXphdGlvbiBjbGVhbmVkIHVwJyk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGFiIGlzIGN1cnJlbnRseSBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVGFiSGlkZGVuKCk6IGJvb2xlYW4ge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gZG9jdW1lbnQuaGlkZGVuO1xufVxuIl0sIm5hbWVzIjpbInNjaGVkdWxlUHJvYWN0aXZlUmVmcmVzaCIsImdldFJlZnJlc2hTY2hlZHVsZVRpbWVvdXQiLCJzZXRSZWZyZXNoU2NoZWR1bGVUaW1lb3V0IiwiREVCVUdfTU9ERSIsInByb2Nlc3MiLCJ2aXNpYmlsaXR5Q2hhbmdlTGlzdGVuZXIiLCJjdXN0b21TY2hlZHVsZUNhbGxiYWNrIiwiY3VzdG9tQ2xlYXJDYWxsYmFjayIsImN1c3RvbVZhbGlkYXRlQ2FsbGJhY2siLCJoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlIiwiZG9jdW1lbnQiLCJpc0hpZGRlbiIsImhpZGRlbiIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50VGltZW91dCIsImNsZWFyVGltZW91dCIsImhhc1Rva2VuIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImluaXRpYWxpemVCYWNrZ3JvdW5kT3B0aW1pemF0aW9uIiwic2NoZWR1bGVDYWxsYmFjayIsImNsZWFyQ2FsbGJhY2siLCJ2YWxpZGF0ZUNhbGxiYWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGVhbnVwQmFja2dyb3VuZE9wdGltaXphdGlvbiIsImlzVGFiSGlkZGVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/utils/backgroundTabOptimization.ts\n");

/***/ }),

/***/ "(ssr)/./src/utils/crossTabSync.ts":
/*!***********************************!*\
  !*** ./src/utils/crossTabSync.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   broadcastLogout: () => (/* binding */ broadcastLogout),\n/* harmony export */   broadcastTokenUpdate: () => (/* binding */ broadcastTokenUpdate),\n/* harmony export */   cleanupCrossTabSync: () => (/* binding */ cleanupCrossTabSync),\n/* harmony export */   crossTabSync: () => (/* binding */ crossTabSync),\n/* harmony export */   initializeCrossTabSync: () => (/* binding */ initializeCrossTabSync)\n/* harmony export */ });\n/* harmony import */ var _tokenManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tokenManager */ \"(ssr)/./src/utils/tokenManager.ts\");\n/**\n * Cross-Tab Synchronization\n * Keeps tokens synchronized across browser tabs using localStorage events\n * Ensures all tabs stay in sync when tokens are updated or cleared\n */ \nconst DEBUG_MODE = \"development\" === \"development\";\n/**\n * Initialize cross-tab synchronization\n * Sets up storage event listeners to sync token changes across tabs\n */ function initializeCrossTabSync() {\n    if (true) {\n        console.warn(\"[CrossTabSync] Cannot initialize: not in browser environment\");\n        return;\n    }\n    console.log(\"[CrossTabSync] Initializing cross-tab synchronization\");\n    // Listen for storage events from other tabs\n    window.addEventListener(\"storage\", handleStorageEvent);\n    if (DEBUG_MODE) {\n        console.log(\"[CrossTabSync] Storage event listener registered\");\n    }\n}\n/**\n * Clean up cross-tab synchronization\n * Removes event listeners\n */ function cleanupCrossTabSync() {\n    if (true) return;\n    window.removeEventListener(\"storage\", handleStorageEvent);\n    if (DEBUG_MODE) {\n        console.log(\"[CrossTabSync] Storage event listener removed\");\n    }\n}\n/**\n * Handle storage events from other tabs\n * Synchronizes token updates and logout actions\n */ function handleStorageEvent(event) {\n    // Only handle events from other tabs (event.storageArea will be set)\n    if (!event.storageArea) return;\n    if (DEBUG_MODE) {\n        console.log(\"[CrossTabSync] Storage event received:\", {\n            key: event.key,\n            hasNewValue: !!event.newValue,\n            hasOldValue: !!event.oldValue\n        });\n    }\n    // Handle accessToken changes\n    if (event.key === \"accessToken\") {\n        if (event.newValue && event.newValue !== event.oldValue) {\n            // Token updated in another tab - update local state\n            console.log(\"[CrossTabSync] Access token updated in another tab, syncing locally\");\n            // The token is already in localStorage (set by other tab)\n            // We just need to ensure tokenExpiry is also synced\n            const tokenExpiry = localStorage.getItem(\"tokenExpiry\");\n            if (DEBUG_MODE) {\n                console.log(\"[CrossTabSync] Token synced, expiry:\", tokenExpiry);\n            }\n        } else if (!event.newValue && event.oldValue) {\n            // Token cleared in another tab (logout) - clear local state\n            console.log(\"[CrossTabSync] Access token cleared in another tab, logging out locally\");\n            handleLogoutFromOtherTab();\n        }\n    }\n    // Handle tokenExpiry changes\n    if (event.key === \"tokenExpiry\") {\n        if (event.newValue && event.newValue !== event.oldValue) {\n            if (DEBUG_MODE) {\n                console.log(\"[CrossTabSync] Token expiry updated in another tab:\", event.newValue);\n            }\n        }\n    }\n    // Handle refreshToken changes\n    if (event.key === \"refreshToken\") {\n        if (!event.newValue && event.oldValue) {\n            // Refresh token cleared - this is a logout\n            console.log(\"[CrossTabSync] Refresh token cleared in another tab, logging out locally\");\n            handleLogoutFromOtherTab();\n        }\n    }\n}\n/**\n * Handle logout that occurred in another tab\n * Clears local tokens and redirects to login\n */ function handleLogoutFromOtherTab() {\n    console.log(\"[CrossTabSync] Handling logout from another tab\");\n    // Clear any remaining tokens (in case only some were cleared)\n    (0,_tokenManager__WEBPACK_IMPORTED_MODULE_0__.clearTokens)(\"Logout from another tab\");\n    // Redirect to login page\n    if (false) {}\n}\n/**\n * Broadcast token update to other tabs\n * This happens automatically via localStorage, but we can use this\n * to ensure the update is properly propagated\n */ function broadcastTokenUpdate(accessToken) {\n    if (true) return;\n    // Store the token (this will trigger storage events in other tabs)\n    (0,_tokenManager__WEBPACK_IMPORTED_MODULE_0__.storeTokenWithExpiry)(accessToken);\n    if (DEBUG_MODE) {\n        console.log(\"[CrossTabSync] Token update broadcasted to other tabs\");\n    }\n}\n/**\n * Broadcast logout to other tabs\n * Clears tokens which will trigger storage events in other tabs\n */ function broadcastLogout() {\n    if (true) return;\n    console.log(\"[CrossTabSync] Broadcasting logout to other tabs\");\n    // Clear tokens (this will trigger storage events in other tabs)\n    (0,_tokenManager__WEBPACK_IMPORTED_MODULE_0__.clearTokens)(\"Logout initiated\");\n    if (DEBUG_MODE) {\n        console.log(\"[CrossTabSync] Logout broadcasted to other tabs\");\n    }\n}\nconst crossTabSync = {\n    initialize: initializeCrossTabSync,\n    cleanup: cleanupCrossTabSync,\n    broadcastTokenUpdate,\n    broadcastLogout\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFlO0lBQzFCQyxZQUFZNUI7SUFDWjZCLFNBQVN0QjtJQUNUaUI7SUFDQUU7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamVjcmMtZGF0aW5nLWZyb250ZW5kLy4vc3JjL3V0aWxzL2Nyb3NzVGFiU3luYy50cz9mZjI5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3Jvc3MtVGFiIFN5bmNocm9uaXphdGlvblxuICogS2VlcHMgdG9rZW5zIHN5bmNocm9uaXplZCBhY3Jvc3MgYnJvd3NlciB0YWJzIHVzaW5nIGxvY2FsU3RvcmFnZSBldmVudHNcbiAqIEVuc3VyZXMgYWxsIHRhYnMgc3RheSBpbiBzeW5jIHdoZW4gdG9rZW5zIGFyZSB1cGRhdGVkIG9yIGNsZWFyZWRcbiAqL1xuXG5pbXBvcnQgeyBzdG9yZVRva2VuV2l0aEV4cGlyeSwgY2xlYXJUb2tlbnMgfSBmcm9tICcuL3Rva2VuTWFuYWdlcic7XG5cbmNvbnN0IERFQlVHX01PREUgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JztcblxuLyoqXG4gKiBJbml0aWFsaXplIGNyb3NzLXRhYiBzeW5jaHJvbml6YXRpb25cbiAqIFNldHMgdXAgc3RvcmFnZSBldmVudCBsaXN0ZW5lcnMgdG8gc3luYyB0b2tlbiBjaGFuZ2VzIGFjcm9zcyB0YWJzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQ3Jvc3NUYWJTeW5jKCk6IHZvaWQge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLndhcm4oJ1tDcm9zc1RhYlN5bmNdIENhbm5vdCBpbml0aWFsaXplOiBub3QgaW4gYnJvd3NlciBlbnZpcm9ubWVudCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCdbQ3Jvc3NUYWJTeW5jXSBJbml0aWFsaXppbmcgY3Jvc3MtdGFiIHN5bmNocm9uaXphdGlvbicpO1xuXG4gIC8vIExpc3RlbiBmb3Igc3RvcmFnZSBldmVudHMgZnJvbSBvdGhlciB0YWJzXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgaGFuZGxlU3RvcmFnZUV2ZW50KTtcblxuICBpZiAoREVCVUdfTU9ERSkge1xuICAgIGNvbnNvbGUubG9nKCdbQ3Jvc3NUYWJTeW5jXSBTdG9yYWdlIGV2ZW50IGxpc3RlbmVyIHJlZ2lzdGVyZWQnKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIGNyb3NzLXRhYiBzeW5jaHJvbml6YXRpb25cbiAqIFJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbnVwQ3Jvc3NUYWJTeW5jKCk6IHZvaWQge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIGhhbmRsZVN0b3JhZ2VFdmVudCk7XG5cbiAgaWYgKERFQlVHX01PREUpIHtcbiAgICBjb25zb2xlLmxvZygnW0Nyb3NzVGFiU3luY10gU3RvcmFnZSBldmVudCBsaXN0ZW5lciByZW1vdmVkJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGUgc3RvcmFnZSBldmVudHMgZnJvbSBvdGhlciB0YWJzXG4gKiBTeW5jaHJvbml6ZXMgdG9rZW4gdXBkYXRlcyBhbmQgbG9nb3V0IGFjdGlvbnNcbiAqL1xuZnVuY3Rpb24gaGFuZGxlU3RvcmFnZUV2ZW50KGV2ZW50OiBTdG9yYWdlRXZlbnQpOiB2b2lkIHtcbiAgLy8gT25seSBoYW5kbGUgZXZlbnRzIGZyb20gb3RoZXIgdGFicyAoZXZlbnQuc3RvcmFnZUFyZWEgd2lsbCBiZSBzZXQpXG4gIGlmICghZXZlbnQuc3RvcmFnZUFyZWEpIHJldHVybjtcblxuICBpZiAoREVCVUdfTU9ERSkge1xuICAgIGNvbnNvbGUubG9nKCdbQ3Jvc3NUYWJTeW5jXSBTdG9yYWdlIGV2ZW50IHJlY2VpdmVkOicsIHtcbiAgICAgIGtleTogZXZlbnQua2V5LFxuICAgICAgaGFzTmV3VmFsdWU6ICEhZXZlbnQubmV3VmFsdWUsXG4gICAgICBoYXNPbGRWYWx1ZTogISFldmVudC5vbGRWYWx1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEhhbmRsZSBhY2Nlc3NUb2tlbiBjaGFuZ2VzXG4gIGlmIChldmVudC5rZXkgPT09ICdhY2Nlc3NUb2tlbicpIHtcbiAgICBpZiAoZXZlbnQubmV3VmFsdWUgJiYgZXZlbnQubmV3VmFsdWUgIT09IGV2ZW50Lm9sZFZhbHVlKSB7XG4gICAgICAvLyBUb2tlbiB1cGRhdGVkIGluIGFub3RoZXIgdGFiIC0gdXBkYXRlIGxvY2FsIHN0YXRlXG4gICAgICBjb25zb2xlLmxvZygnW0Nyb3NzVGFiU3luY10gQWNjZXNzIHRva2VuIHVwZGF0ZWQgaW4gYW5vdGhlciB0YWIsIHN5bmNpbmcgbG9jYWxseScpO1xuICAgICAgXG4gICAgICAvLyBUaGUgdG9rZW4gaXMgYWxyZWFkeSBpbiBsb2NhbFN0b3JhZ2UgKHNldCBieSBvdGhlciB0YWIpXG4gICAgICAvLyBXZSBqdXN0IG5lZWQgdG8gZW5zdXJlIHRva2VuRXhwaXJ5IGlzIGFsc28gc3luY2VkXG4gICAgICBjb25zdCB0b2tlbkV4cGlyeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbkV4cGlyeScpO1xuICAgICAgXG4gICAgICBpZiAoREVCVUdfTU9ERSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW0Nyb3NzVGFiU3luY10gVG9rZW4gc3luY2VkLCBleHBpcnk6JywgdG9rZW5FeHBpcnkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWV2ZW50Lm5ld1ZhbHVlICYmIGV2ZW50Lm9sZFZhbHVlKSB7XG4gICAgICAvLyBUb2tlbiBjbGVhcmVkIGluIGFub3RoZXIgdGFiIChsb2dvdXQpIC0gY2xlYXIgbG9jYWwgc3RhdGVcbiAgICAgIGNvbnNvbGUubG9nKCdbQ3Jvc3NUYWJTeW5jXSBBY2Nlc3MgdG9rZW4gY2xlYXJlZCBpbiBhbm90aGVyIHRhYiwgbG9nZ2luZyBvdXQgbG9jYWxseScpO1xuICAgICAgaGFuZGxlTG9nb3V0RnJvbU90aGVyVGFiKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIHRva2VuRXhwaXJ5IGNoYW5nZXNcbiAgaWYgKGV2ZW50LmtleSA9PT0gJ3Rva2VuRXhwaXJ5Jykge1xuICAgIGlmIChldmVudC5uZXdWYWx1ZSAmJiBldmVudC5uZXdWYWx1ZSAhPT0gZXZlbnQub2xkVmFsdWUpIHtcbiAgICAgIGlmIChERUJVR19NT0RFKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQ3Jvc3NUYWJTeW5jXSBUb2tlbiBleHBpcnkgdXBkYXRlZCBpbiBhbm90aGVyIHRhYjonLCBldmVudC5uZXdWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIHJlZnJlc2hUb2tlbiBjaGFuZ2VzXG4gIGlmIChldmVudC5rZXkgPT09ICdyZWZyZXNoVG9rZW4nKSB7XG4gICAgaWYgKCFldmVudC5uZXdWYWx1ZSAmJiBldmVudC5vbGRWYWx1ZSkge1xuICAgICAgLy8gUmVmcmVzaCB0b2tlbiBjbGVhcmVkIC0gdGhpcyBpcyBhIGxvZ291dFxuICAgICAgY29uc29sZS5sb2coJ1tDcm9zc1RhYlN5bmNdIFJlZnJlc2ggdG9rZW4gY2xlYXJlZCBpbiBhbm90aGVyIHRhYiwgbG9nZ2luZyBvdXQgbG9jYWxseScpO1xuICAgICAgaGFuZGxlTG9nb3V0RnJvbU90aGVyVGFiKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSGFuZGxlIGxvZ291dCB0aGF0IG9jY3VycmVkIGluIGFub3RoZXIgdGFiXG4gKiBDbGVhcnMgbG9jYWwgdG9rZW5zIGFuZCByZWRpcmVjdHMgdG8gbG9naW5cbiAqL1xuZnVuY3Rpb24gaGFuZGxlTG9nb3V0RnJvbU90aGVyVGFiKCk6IHZvaWQge1xuICBjb25zb2xlLmxvZygnW0Nyb3NzVGFiU3luY10gSGFuZGxpbmcgbG9nb3V0IGZyb20gYW5vdGhlciB0YWInKTtcblxuICAvLyBDbGVhciBhbnkgcmVtYWluaW5nIHRva2VucyAoaW4gY2FzZSBvbmx5IHNvbWUgd2VyZSBjbGVhcmVkKVxuICBjbGVhclRva2VucygnTG9nb3V0IGZyb20gYW5vdGhlciB0YWInKTtcblxuICAvLyBSZWRpcmVjdCB0byBsb2dpbiBwYWdlXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIENoZWNrIGlmIHdlJ3JlIG5vdCBhbHJlYWR5IG9uIHRoZSBsb2dpbiBwYWdlXG4gICAgaWYgKCF3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoJy9sb2dpbicpKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0Nyb3NzVGFiU3luY10gUmVkaXJlY3RpbmcgdG8gbG9naW4gcGFnZScpO1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2xvZ2luJztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBCcm9hZGNhc3QgdG9rZW4gdXBkYXRlIHRvIG90aGVyIHRhYnNcbiAqIFRoaXMgaGFwcGVucyBhdXRvbWF0aWNhbGx5IHZpYSBsb2NhbFN0b3JhZ2UsIGJ1dCB3ZSBjYW4gdXNlIHRoaXNcbiAqIHRvIGVuc3VyZSB0aGUgdXBkYXRlIGlzIHByb3Blcmx5IHByb3BhZ2F0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJyb2FkY2FzdFRva2VuVXBkYXRlKGFjY2Vzc1Rva2VuOiBzdHJpbmcpOiB2b2lkIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG5cbiAgLy8gU3RvcmUgdGhlIHRva2VuICh0aGlzIHdpbGwgdHJpZ2dlciBzdG9yYWdlIGV2ZW50cyBpbiBvdGhlciB0YWJzKVxuICBzdG9yZVRva2VuV2l0aEV4cGlyeShhY2Nlc3NUb2tlbik7XG5cbiAgaWYgKERFQlVHX01PREUpIHtcbiAgICBjb25zb2xlLmxvZygnW0Nyb3NzVGFiU3luY10gVG9rZW4gdXBkYXRlIGJyb2FkY2FzdGVkIHRvIG90aGVyIHRhYnMnKTtcbiAgfVxufVxuXG4vKipcbiAqIEJyb2FkY2FzdCBsb2dvdXQgdG8gb3RoZXIgdGFic1xuICogQ2xlYXJzIHRva2VucyB3aGljaCB3aWxsIHRyaWdnZXIgc3RvcmFnZSBldmVudHMgaW4gb3RoZXIgdGFic1xuICovXG5leHBvcnQgZnVuY3Rpb24gYnJvYWRjYXN0TG9nb3V0KCk6IHZvaWQge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICBjb25zb2xlLmxvZygnW0Nyb3NzVGFiU3luY10gQnJvYWRjYXN0aW5nIGxvZ291dCB0byBvdGhlciB0YWJzJyk7XG5cbiAgLy8gQ2xlYXIgdG9rZW5zICh0aGlzIHdpbGwgdHJpZ2dlciBzdG9yYWdlIGV2ZW50cyBpbiBvdGhlciB0YWJzKVxuICBjbGVhclRva2VucygnTG9nb3V0IGluaXRpYXRlZCcpO1xuXG4gIGlmIChERUJVR19NT0RFKSB7XG4gICAgY29uc29sZS5sb2coJ1tDcm9zc1RhYlN5bmNdIExvZ291dCBicm9hZGNhc3RlZCB0byBvdGhlciB0YWJzJyk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNyb3NzVGFiU3luYyA9IHtcbiAgaW5pdGlhbGl6ZTogaW5pdGlhbGl6ZUNyb3NzVGFiU3luYyxcbiAgY2xlYW51cDogY2xlYW51cENyb3NzVGFiU3luYyxcbiAgYnJvYWRjYXN0VG9rZW5VcGRhdGUsXG4gIGJyb2FkY2FzdExvZ291dCxcbn07XG4iXSwibmFtZXMiOlsic3RvcmVUb2tlbldpdGhFeHBpcnkiLCJjbGVhclRva2VucyIsIkRFQlVHX01PREUiLCJwcm9jZXNzIiwiaW5pdGlhbGl6ZUNyb3NzVGFiU3luYyIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZVN0b3JhZ2VFdmVudCIsImNsZWFudXBDcm9zc1RhYlN5bmMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJzdG9yYWdlQXJlYSIsImtleSIsImhhc05ld1ZhbHVlIiwibmV3VmFsdWUiLCJoYXNPbGRWYWx1ZSIsIm9sZFZhbHVlIiwidG9rZW5FeHBpcnkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaGFuZGxlTG9nb3V0RnJvbU90aGVyVGFiIiwibG9jYXRpb24iLCJwYXRobmFtZSIsImluY2x1ZGVzIiwiaHJlZiIsImJyb2FkY2FzdFRva2VuVXBkYXRlIiwiYWNjZXNzVG9rZW4iLCJicm9hZGNhc3RMb2dvdXQiLCJjcm9zc1RhYlN5bmMiLCJpbml0aWFsaXplIiwiY2xlYW51cCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/utils/crossTabSync.ts\n");

/***/ }),

/***/ "(ssr)/./src/utils/tokenManager.ts":
/*!***********************************!*\
  !*** ./src/utils/tokenManager.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearTokens: () => (/* binding */ clearTokens),\n/* harmony export */   getRefreshScheduleTimeout: () => (/* binding */ getRefreshScheduleTimeout),\n/* harmony export */   getTimeSinceLastActivity: () => (/* binding */ getTimeSinceLastActivity),\n/* harmony export */   getTokenExpiry: () => (/* binding */ getTokenExpiry),\n/* harmony export */   initialize: () => (/* binding */ initialize),\n/* harmony export */   isInactive: () => (/* binding */ isInactive),\n/* harmony export */   isRefreshing: () => (/* binding */ isRefreshing),\n/* harmony export */   needsRefresh: () => (/* binding */ needsRefresh),\n/* harmony export */   parseJWT: () => (/* binding */ parseJWT),\n/* harmony export */   refreshWithRetry: () => (/* binding */ refreshWithRetry),\n/* harmony export */   scheduleProactiveRefresh: () => (/* binding */ scheduleProactiveRefresh),\n/* harmony export */   setRefreshScheduleTimeout: () => (/* binding */ setRefreshScheduleTimeout),\n/* harmony export */   setRefreshing: () => (/* binding */ setRefreshing),\n/* harmony export */   storeTokenWithExpiry: () => (/* binding */ storeTokenWithExpiry),\n/* harmony export */   tokenManager: () => (/* binding */ tokenManager),\n/* harmony export */   updateLastActivity: () => (/* binding */ updateLastActivity),\n/* harmony export */   validateAfterInactivity: () => (/* binding */ validateAfterInactivity)\n/* harmony export */ });\n/**\n * Token Manager - Centralized token lifecycle management\n * Handles token expiry calculation, refresh scheduling, and state tracking\n */ // Refresh state tracking\nlet isRefreshingToken = false;\nlet refreshScheduleTimeout = null;\n// Inactivity tracking\nlet lastActivityTimestamp = Date.now();\nconst INACTIVITY_THRESHOLD_MS = 5 * 60 * 1000; // 5 minutes\n// Debug mode flag for verbose logging\nconst DEBUG_MODE = \"development\" === \"development\";\n/**\n * Parse JWT token and extract payload\n */ function parseJWT(token) {\n    try {\n        const base64Url = token.split(\".\")[1];\n        const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n        const jsonPayload = decodeURIComponent(atob(base64).split(\"\").map((c)=>\"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2)).join(\"\"));\n        return JSON.parse(jsonPayload);\n    } catch (error) {\n        console.error(\"[TokenManager] Failed to parse JWT:\", error);\n        return null;\n    }\n}\n/**\n * Get token expiry date from stored token\n * Returns null if token doesn't exist or can't be parsed\n */ function getTokenExpiry() {\n    if (true) return null;\n    // First try to get from stored expiry\n    const storedExpiry = localStorage.getItem(\"tokenExpiry\");\n    if (storedExpiry) {\n        const expiryDate = new Date(storedExpiry);\n        if (!isNaN(expiryDate.getTime())) {\n            if (DEBUG_MODE) {\n                console.log(\"[TokenManager] Token expiry from storage:\", expiryDate.toISOString());\n            }\n            return expiryDate;\n        }\n    }\n    // Fallback: parse from access token\n    const accessToken = localStorage.getItem(\"accessToken\");\n    if (!accessToken) {\n        if (DEBUG_MODE) {\n            console.log(\"[TokenManager] No access token found\");\n        }\n        return null;\n    }\n    const payload = parseJWT(accessToken);\n    if (!payload || !payload.exp) {\n        console.error(\"[TokenManager] Invalid token payload\");\n        return null;\n    }\n    const expiryDate = new Date(payload.exp * 1000);\n    if (DEBUG_MODE) {\n        console.log(\"[TokenManager] Token expiry from JWT:\", expiryDate.toISOString());\n    }\n    return expiryDate;\n}\n/**\n * Check if token needs refresh (expires in < 2 minutes)\n */ function needsRefresh() {\n    const expiry = getTokenExpiry();\n    if (!expiry) {\n        if (DEBUG_MODE) {\n            console.log(\"[TokenManager] No expiry found, refresh not needed\");\n        }\n        return false;\n    }\n    const now = new Date();\n    const timeUntilExpiry = expiry.getTime() - now.getTime();\n    const twoMinutesInMs = 2 * 60 * 1000;\n    const needs = timeUntilExpiry < twoMinutesInMs;\n    if (DEBUG_MODE) {\n        const minutesRemaining = Math.floor(timeUntilExpiry / 1000 / 60);\n        const secondsRemaining = Math.floor(timeUntilExpiry / 1000 % 60);\n        console.log(`[TokenManager] Token expires in ${minutesRemaining}m ${secondsRemaining}s, needs refresh: ${needs}`);\n    }\n    return needs;\n}\n/**\n * Store access token with calculated expiry\n */ function storeTokenWithExpiry(accessToken) {\n    if (true) return;\n    const payload = parseJWT(accessToken);\n    if (!payload || !payload.exp) {\n        console.error(\"[TokenManager] Cannot store token: invalid payload\");\n        return;\n    }\n    const expiryDate = new Date(payload.exp * 1000);\n    localStorage.setItem(\"accessToken\", accessToken);\n    localStorage.setItem(\"tokenExpiry\", expiryDate.toISOString());\n    console.log(\"[TokenManager] Token stored with expiry:\", expiryDate.toISOString());\n    if (DEBUG_MODE) {\n        const now = new Date();\n        const timeUntilExpiry = expiryDate.getTime() - now.getTime();\n        const minutesRemaining = Math.floor(timeUntilExpiry / 1000 / 60);\n        console.log(`[TokenManager] Token valid for ${minutesRemaining} minutes`);\n    }\n}\n/**\n * Clear all tokens and expiry from storage\n */ function clearTokens(reason) {\n    if (true) return;\n    localStorage.removeItem(\"accessToken\");\n    localStorage.removeItem(\"refreshToken\");\n    localStorage.removeItem(\"tokenExpiry\");\n    console.log(\"[TokenManager] Tokens cleared\", reason ? `- Reason: ${reason}` : \"\");\n    // Clear any scheduled refresh\n    if (refreshScheduleTimeout) {\n        clearTimeout(refreshScheduleTimeout);\n        refreshScheduleTimeout = null;\n        if (DEBUG_MODE) {\n            console.log(\"[TokenManager] Refresh schedule cleared\");\n        }\n    }\n    // Reset refresh state\n    isRefreshingToken = false;\n}\n/**\n * Check if a token refresh is currently in progress\n */ function isRefreshing() {\n    return isRefreshingToken;\n}\n/**\n * Set refresh state (used by API client)\n */ function setRefreshing(state) {\n    isRefreshingToken = state;\n    if (DEBUG_MODE) {\n        console.log(\"[TokenManager] Refresh state set to:\", state);\n    }\n}\n/**\n * Get current refresh schedule timeout (for testing/debugging)\n */ function getRefreshScheduleTimeout() {\n    return refreshScheduleTimeout;\n}\n/**\n * Set refresh schedule timeout (used by scheduling logic)\n */ function setRefreshScheduleTimeout(timeout) {\n    if (refreshScheduleTimeout) {\n        clearTimeout(refreshScheduleTimeout);\n    }\n    refreshScheduleTimeout = timeout;\n}\n/**\n * Update last activity timestamp\n * Should be called on user interactions and API requests\n */ function updateLastActivity() {\n    lastActivityTimestamp = Date.now();\n    if (DEBUG_MODE) {\n        console.log(\"[TokenManager] Activity timestamp updated\");\n    }\n}\n/**\n * Get time since last activity in milliseconds\n */ function getTimeSinceLastActivity() {\n    return Date.now() - lastActivityTimestamp;\n}\n/**\n * Check if user has been inactive for more than the threshold (5 minutes)\n */ function isInactive() {\n    const timeSinceActivity = getTimeSinceLastActivity();\n    const inactive = timeSinceActivity > INACTIVITY_THRESHOLD_MS;\n    if (DEBUG_MODE && inactive) {\n        const minutesInactive = Math.floor(timeSinceActivity / 1000 / 60);\n        console.log(`[TokenManager] User inactive for ${minutesInactive} minutes`);\n    }\n    return inactive;\n}\n/**\n * Validate token freshness after inactivity\n * Returns true if token is valid or was successfully refreshed\n * Returns false if token is invalid and refresh failed\n */ async function validateAfterInactivity() {\n    if (!isInactive()) {\n        if (DEBUG_MODE) {\n            console.log(\"[TokenManager] User active, no validation needed\");\n        }\n        return true;\n    }\n    console.log(\"[TokenManager] User inactive, validating token freshness\");\n    // Check if token needs refresh\n    if (needsRefresh()) {\n        console.log(\"[TokenManager] Token needs refresh after inactivity, refreshing\");\n        setRefreshing(true);\n        try {\n            const refreshSuccess = await refreshWithRetry();\n            if (refreshSuccess) {\n                console.log(\"[TokenManager] Token refreshed successfully after inactivity\");\n                // Update activity timestamp after successful refresh\n                updateLastActivity();\n                return true;\n            } else {\n                console.error(\"[TokenManager] Token refresh failed after inactivity\");\n                return false;\n            }\n        } finally{\n            setRefreshing(false);\n        }\n    } else {\n        if (DEBUG_MODE) {\n            console.log(\"[TokenManager] Token still valid after inactivity\");\n        }\n        // Update activity timestamp since we validated\n        updateLastActivity();\n        return true;\n    }\n}\n/**\n * Initialize token manager\n * Should be called on application startup\n */ function initialize() {\n    if (true) return;\n    console.log(\"[TokenManager] Initializing token manager\");\n    // Initialize activity timestamp\n    updateLastActivity();\n    // Check if we have a token\n    const accessToken = localStorage.getItem(\"accessToken\");\n    if (!accessToken) {\n        if (DEBUG_MODE) {\n            console.log(\"[TokenManager] No token found, skipping initialization\");\n        }\n        return;\n    }\n    // Ensure token has expiry stored\n    const storedExpiry = localStorage.getItem(\"tokenExpiry\");\n    if (!storedExpiry) {\n        console.log(\"[TokenManager] Token found without expiry, calculating and storing\");\n        storeTokenWithExpiry(accessToken);\n    }\n    // Check if token needs immediate refresh\n    if (needsRefresh()) {\n        console.log(\"[TokenManager] Token needs immediate refresh\");\n    } else {\n        if (DEBUG_MODE) {\n            const expiry = getTokenExpiry();\n            if (expiry) {\n                const now = new Date();\n                const timeUntilRefresh = expiry.getTime() - now.getTime() - 2 * 60 * 1000;\n                const minutesUntilRefresh = Math.floor(timeUntilRefresh / 1000 / 60);\n                console.log(`[TokenManager] Token valid, refresh scheduled in ~${minutesUntilRefresh} minutes`);\n            }\n        }\n    }\n    console.log(\"[TokenManager] Initialization complete\");\n}\n/**\n * Check if error is a network error (not a 401 from refresh endpoint)\n */ function isNetworkError(error) {\n    // Network errors don't have a response\n    if (!error.response) {\n        return true;\n    }\n    // Check for network-related status codes\n    const networkStatusCodes = [\n        408,\n        429,\n        500,\n        502,\n        503,\n        504\n    ];\n    return networkStatusCodes.includes(error.response.status);\n}\n/**\n * Sleep utility for exponential backoff\n */ function sleep(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\n/**\n * Refresh token with retry logic and exponential backoff\n * Retries up to 2 times for network errors with delays of 1s, 2s\n * Does not retry for 401 errors from refresh endpoint\n * \n * @param attempt - Current attempt number (0-indexed)\n * @returns Promise<boolean> - true if refresh succeeded, false otherwise\n */ async function refreshWithRetry(attempt = 0) {\n    const API_URL = \"http://localhost:4000\" || 0;\n    if (true) {\n        console.error(\"[TokenManager] Cannot refresh token: not in browser environment\");\n        return false;\n    }\n    const refreshToken = localStorage.getItem(\"refreshToken\");\n    if (!refreshToken) {\n        console.error(\"[TokenManager] No refresh token available\");\n        clearTokens(\"No refresh token available\");\n        return false;\n    }\n    try {\n        if (DEBUG_MODE) {\n            console.log(`[TokenManager] Attempting token refresh (attempt ${attempt + 1})`);\n        }\n        // Import axios dynamically to avoid circular dependencies\n        const axios = (await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/axios\"), __webpack_require__.e(\"vendor-chunks/mime-db\"), __webpack_require__.e(\"vendor-chunks/follow-redirects\"), __webpack_require__.e(\"vendor-chunks/debug\"), __webpack_require__.e(\"vendor-chunks/get-intrinsic\"), __webpack_require__.e(\"vendor-chunks/form-data\"), __webpack_require__.e(\"vendor-chunks/asynckit\"), __webpack_require__.e(\"vendor-chunks/combined-stream\"), __webpack_require__.e(\"vendor-chunks/mime-types\"), __webpack_require__.e(\"vendor-chunks/proxy-from-env\"), __webpack_require__.e(\"vendor-chunks/has-symbols\"), __webpack_require__.e(\"vendor-chunks/delayed-stream\"), __webpack_require__.e(\"vendor-chunks/function-bind\"), __webpack_require__.e(\"vendor-chunks/es-set-tostringtag\"), __webpack_require__.e(\"vendor-chunks/call-bind-apply-helpers\"), __webpack_require__.e(\"vendor-chunks/get-proto\"), __webpack_require__.e(\"vendor-chunks/dunder-proto\"), __webpack_require__.e(\"vendor-chunks/math-intrinsics\"), __webpack_require__.e(\"vendor-chunks/es-errors\"), __webpack_require__.e(\"vendor-chunks/es-define-property\"), __webpack_require__.e(\"vendor-chunks/gopd\"), __webpack_require__.e(\"vendor-chunks/hasown\"), __webpack_require__.e(\"vendor-chunks/has-tostringtag\"), __webpack_require__.e(\"vendor-chunks/es-object-atoms\")]).then(__webpack_require__.bind(__webpack_require__, /*! axios */ \"(ssr)/./node_modules/axios/index.js\"))).default;\n        const response = await axios.post(`${API_URL}/api/auth/refresh`, {\n            refreshToken\n        });\n        const { accessToken } = response.data;\n        if (!accessToken) {\n            console.error(\"[TokenManager] Refresh response missing accessToken\");\n            clearTokens(\"Invalid refresh response\");\n            return false;\n        }\n        // Store the new token with expiry\n        storeTokenWithExpiry(accessToken);\n        console.log(\"[TokenManager] Token refresh successful\");\n        return true;\n    } catch (error) {\n        // Handle 401 from refresh endpoint - no retry\n        if (error.response?.status === 401) {\n            console.error(\"[TokenManager] Refresh token invalid or expired (401)\");\n            clearTokens(\"Refresh token invalid or expired\");\n            return false;\n        }\n        // Handle network errors with retry\n        if (isNetworkError(error) && attempt < 2) {\n            const delay = Math.pow(2, attempt) * 1000; // 1s, 2s\n            console.warn(`[TokenManager] Network error during refresh, retrying in ${delay}ms (attempt ${attempt + 1}/2)`, error.message);\n            await sleep(delay);\n            return refreshWithRetry(attempt + 1);\n        }\n        // All retries exhausted or non-retryable error\n        console.error(`[TokenManager] Token refresh failed after ${attempt + 1} attempt(s)`, error.message);\n        clearTokens(\"Token refresh failed\");\n        return false;\n    }\n}\n/**\n * Schedule proactive token refresh\n * Calculates time until refresh needed (expiry - 2 minutes) and sets timeout\n * Clears any existing timeout before setting new one\n * Handles edge case where token already needs refresh\n */ function scheduleProactiveRefresh() {\n    if (true) return;\n    // Clear any existing scheduled refresh\n    if (refreshScheduleTimeout) {\n        clearTimeout(refreshScheduleTimeout);\n        refreshScheduleTimeout = null;\n        if (DEBUG_MODE) {\n            console.log(\"[TokenManager] Cleared existing refresh schedule\");\n        }\n    }\n    const expiry = getTokenExpiry();\n    if (!expiry) {\n        if (DEBUG_MODE) {\n            console.log(\"[TokenManager] No token expiry found, cannot schedule refresh\");\n        }\n        return;\n    }\n    const now = new Date();\n    const timeUntilExpiry = expiry.getTime() - now.getTime();\n    const twoMinutesInMs = 2 * 60 * 1000;\n    const timeUntilRefresh = timeUntilExpiry - twoMinutesInMs;\n    // Edge case: token already needs refresh (expires in < 2 minutes)\n    if (timeUntilRefresh <= 0) {\n        console.log(\"[TokenManager] Token already needs refresh, triggering immediately\");\n        refreshWithRetry().catch((error)=>{\n            console.error(\"[TokenManager] Immediate refresh failed:\", error);\n        });\n        return;\n    }\n    // Schedule refresh for 2 minutes before expiry\n    const minutesUntilRefresh = Math.floor(timeUntilRefresh / 1000 / 60);\n    const secondsUntilRefresh = Math.floor(timeUntilRefresh / 1000 % 60);\n    console.log(`[TokenManager] Scheduling proactive refresh in ${minutesUntilRefresh}m ${secondsUntilRefresh}s`);\n    refreshScheduleTimeout = setTimeout(()=>{\n        console.log(\"[TokenManager] Proactive refresh triggered by schedule\");\n        refreshWithRetry().then((success)=>{\n            if (success) {\n                // Schedule next refresh after successful refresh\n                scheduleProactiveRefresh();\n            }\n        }).catch((error)=>{\n            console.error(\"[TokenManager] Scheduled refresh failed:\", error);\n        });\n    }, timeUntilRefresh);\n    if (DEBUG_MODE) {\n        console.log(\"[TokenManager] Refresh scheduled for:\", new Date(now.getTime() + timeUntilRefresh).toISOString());\n    }\n}\nconst tokenManager = {\n    initialize,\n    getTokenExpiry,\n    needsRefresh,\n    storeTokenWithExpiry,\n    clearTokens,\n    isRefreshing,\n    setRefreshing,\n    getRefreshScheduleTimeout,\n    setRefreshScheduleTimeout,\n    refreshWithRetry,\n    scheduleProactiveRefresh,\n    updateLastActivity,\n    getTimeSinceLastActivity,\n    isInactive,\n    validateAfterInactivity\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z2VyLnRzP2I2OWMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUb2tlbiBNYW5hZ2VyIC0gQ2VudHJhbGl6ZWQgdG9rZW4gbGlmZWN5Y2xlIG1hbmFnZW1lbnRcbiAqIEhhbmRsZXMgdG9rZW4gZXhwaXJ5IGNhbGN1bGF0aW9uLCByZWZyZXNoIHNjaGVkdWxpbmcsIGFuZCBzdGF0ZSB0cmFja2luZ1xuICovXG5cbmludGVyZmFjZSBUb2tlblBheWxvYWQge1xuICBpZDogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICByb2xlOiBzdHJpbmc7XG4gIGlhdDogbnVtYmVyOyAvLyBJc3N1ZWQgYXQgKFVuaXggdGltZXN0YW1wKVxuICBleHA6IG51bWJlcjsgLy8gRXhwaXJ5IChVbml4IHRpbWVzdGFtcClcbn1cblxuLy8gUmVmcmVzaCBzdGF0ZSB0cmFja2luZ1xubGV0IGlzUmVmcmVzaGluZ1Rva2VuID0gZmFsc2U7XG5sZXQgcmVmcmVzaFNjaGVkdWxlVGltZW91dDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcblxuLy8gSW5hY3Rpdml0eSB0cmFja2luZ1xubGV0IGxhc3RBY3Rpdml0eVRpbWVzdGFtcDogbnVtYmVyID0gRGF0ZS5ub3coKTtcbmNvbnN0IElOQUNUSVZJVFlfVEhSRVNIT0xEX01TID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzXG5cbi8vIERlYnVnIG1vZGUgZmxhZyBmb3IgdmVyYm9zZSBsb2dnaW5nXG5jb25zdCBERUJVR19NT0RFID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG5cbi8qKlxuICogUGFyc2UgSldUIHRva2VuIGFuZCBleHRyYWN0IHBheWxvYWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSldUKHRva2VuOiBzdHJpbmcpOiBUb2tlblBheWxvYWQgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgIGNvbnN0IGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKC8tL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpO1xuICAgIGNvbnN0IGpzb25QYXlsb2FkID0gZGVjb2RlVVJJQ29tcG9uZW50KFxuICAgICAgYXRvYihiYXNlNjQpXG4gICAgICAgIC5zcGxpdCgnJylcbiAgICAgICAgLm1hcCgoYykgPT4gJyUnICsgKCcwMCcgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikpXG4gICAgICAgIC5qb2luKCcnKVxuICAgICk7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoanNvblBheWxvYWQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tUb2tlbk1hbmFnZXJdIEZhaWxlZCB0byBwYXJzZSBKV1Q6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRva2VuIGV4cGlyeSBkYXRlIGZyb20gc3RvcmVkIHRva2VuXG4gKiBSZXR1cm5zIG51bGwgaWYgdG9rZW4gZG9lc24ndCBleGlzdCBvciBjYW4ndCBiZSBwYXJzZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRva2VuRXhwaXJ5KCk6IERhdGUgfCBudWxsIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gbnVsbDtcblxuICAvLyBGaXJzdCB0cnkgdG8gZ2V0IGZyb20gc3RvcmVkIGV4cGlyeVxuICBjb25zdCBzdG9yZWRFeHBpcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5FeHBpcnknKTtcbiAgaWYgKHN0b3JlZEV4cGlyeSkge1xuICAgIGNvbnN0IGV4cGlyeURhdGUgPSBuZXcgRGF0ZShzdG9yZWRFeHBpcnkpO1xuICAgIGlmICghaXNOYU4oZXhwaXJ5RGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICBpZiAoREVCVUdfTU9ERSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW1Rva2VuTWFuYWdlcl0gVG9rZW4gZXhwaXJ5IGZyb20gc3RvcmFnZTonLCBleHBpcnlEYXRlLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGV4cGlyeURhdGU7XG4gICAgfVxuICB9XG5cbiAgLy8gRmFsbGJhY2s6IHBhcnNlIGZyb20gYWNjZXNzIHRva2VuXG4gIGNvbnN0IGFjY2Vzc1Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG4gIGlmICghYWNjZXNzVG9rZW4pIHtcbiAgICBpZiAoREVCVUdfTU9ERSkge1xuICAgICAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIE5vIGFjY2VzcyB0b2tlbiBmb3VuZCcpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHBheWxvYWQgPSBwYXJzZUpXVChhY2Nlc3NUb2tlbik7XG4gIGlmICghcGF5bG9hZCB8fCAhcGF5bG9hZC5leHApIHtcbiAgICBjb25zb2xlLmVycm9yKCdbVG9rZW5NYW5hZ2VyXSBJbnZhbGlkIHRva2VuIHBheWxvYWQnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGV4cGlyeURhdGUgPSBuZXcgRGF0ZShwYXlsb2FkLmV4cCAqIDEwMDApO1xuICBpZiAoREVCVUdfTU9ERSkge1xuICAgIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBUb2tlbiBleHBpcnkgZnJvbSBKV1Q6JywgZXhwaXJ5RGF0ZS50b0lTT1N0cmluZygpKTtcbiAgfVxuICByZXR1cm4gZXhwaXJ5RGF0ZTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0b2tlbiBuZWVkcyByZWZyZXNoIChleHBpcmVzIGluIDwgMiBtaW51dGVzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gbmVlZHNSZWZyZXNoKCk6IGJvb2xlYW4ge1xuICBjb25zdCBleHBpcnkgPSBnZXRUb2tlbkV4cGlyeSgpO1xuICBpZiAoIWV4cGlyeSkge1xuICAgIGlmIChERUJVR19NT0RFKSB7XG4gICAgICBjb25zb2xlLmxvZygnW1Rva2VuTWFuYWdlcl0gTm8gZXhwaXJ5IGZvdW5kLCByZWZyZXNoIG5vdCBuZWVkZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgdGltZVVudGlsRXhwaXJ5ID0gZXhwaXJ5LmdldFRpbWUoKSAtIG5vdy5nZXRUaW1lKCk7XG4gIGNvbnN0IHR3b01pbnV0ZXNJbk1zID0gMiAqIDYwICogMTAwMDtcblxuICBjb25zdCBuZWVkcyA9IHRpbWVVbnRpbEV4cGlyeSA8IHR3b01pbnV0ZXNJbk1zO1xuXG4gIGlmIChERUJVR19NT0RFKSB7XG4gICAgY29uc3QgbWludXRlc1JlbWFpbmluZyA9IE1hdGguZmxvb3IodGltZVVudGlsRXhwaXJ5IC8gMTAwMCAvIDYwKTtcbiAgICBjb25zdCBzZWNvbmRzUmVtYWluaW5nID0gTWF0aC5mbG9vcigodGltZVVudGlsRXhwaXJ5IC8gMTAwMCkgJSA2MCk7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBgW1Rva2VuTWFuYWdlcl0gVG9rZW4gZXhwaXJlcyBpbiAke21pbnV0ZXNSZW1haW5pbmd9bSAke3NlY29uZHNSZW1haW5pbmd9cywgbmVlZHMgcmVmcmVzaDogJHtuZWVkc31gXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBuZWVkcztcbn1cblxuLyoqXG4gKiBTdG9yZSBhY2Nlc3MgdG9rZW4gd2l0aCBjYWxjdWxhdGVkIGV4cGlyeVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVUb2tlbldpdGhFeHBpcnkoYWNjZXNzVG9rZW46IHN0cmluZyk6IHZvaWQge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICBjb25zdCBwYXlsb2FkID0gcGFyc2VKV1QoYWNjZXNzVG9rZW4pO1xuICBpZiAoIXBheWxvYWQgfHwgIXBheWxvYWQuZXhwKSB7XG4gICAgY29uc29sZS5lcnJvcignW1Rva2VuTWFuYWdlcl0gQ2Fubm90IHN0b3JlIHRva2VuOiBpbnZhbGlkIHBheWxvYWQnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBleHBpcnlEYXRlID0gbmV3IERhdGUocGF5bG9hZC5leHAgKiAxMDAwKTtcblxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCBhY2Nlc3NUb2tlbik7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbkV4cGlyeScsIGV4cGlyeURhdGUudG9JU09TdHJpbmcoKSk7XG5cbiAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIFRva2VuIHN0b3JlZCB3aXRoIGV4cGlyeTonLCBleHBpcnlEYXRlLnRvSVNPU3RyaW5nKCkpO1xuXG4gIGlmIChERUJVR19NT0RFKSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCB0aW1lVW50aWxFeHBpcnkgPSBleHBpcnlEYXRlLmdldFRpbWUoKSAtIG5vdy5nZXRUaW1lKCk7XG4gICAgY29uc3QgbWludXRlc1JlbWFpbmluZyA9IE1hdGguZmxvb3IodGltZVVudGlsRXhwaXJ5IC8gMTAwMCAvIDYwKTtcbiAgICBjb25zb2xlLmxvZyhgW1Rva2VuTWFuYWdlcl0gVG9rZW4gdmFsaWQgZm9yICR7bWludXRlc1JlbWFpbmluZ30gbWludXRlc2ApO1xuICB9XG59XG5cbi8qKlxuICogQ2xlYXIgYWxsIHRva2VucyBhbmQgZXhwaXJ5IGZyb20gc3RvcmFnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJUb2tlbnMocmVhc29uPzogc3RyaW5nKTogdm9pZCB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuXG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY2Nlc3NUb2tlbicpO1xuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncmVmcmVzaFRva2VuJyk7XG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbkV4cGlyeScpO1xuXG4gIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBUb2tlbnMgY2xlYXJlZCcsIHJlYXNvbiA/IGAtIFJlYXNvbjogJHtyZWFzb259YCA6ICcnKTtcblxuICAvLyBDbGVhciBhbnkgc2NoZWR1bGVkIHJlZnJlc2hcbiAgaWYgKHJlZnJlc2hTY2hlZHVsZVRpbWVvdXQpIHtcbiAgICBjbGVhclRpbWVvdXQocmVmcmVzaFNjaGVkdWxlVGltZW91dCk7XG4gICAgcmVmcmVzaFNjaGVkdWxlVGltZW91dCA9IG51bGw7XG4gICAgaWYgKERFQlVHX01PREUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBSZWZyZXNoIHNjaGVkdWxlIGNsZWFyZWQnKTtcbiAgICB9XG4gIH1cblxuICAvLyBSZXNldCByZWZyZXNoIHN0YXRlXG4gIGlzUmVmcmVzaGluZ1Rva2VuID0gZmFsc2U7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSB0b2tlbiByZWZyZXNoIGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZWZyZXNoaW5nKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNSZWZyZXNoaW5nVG9rZW47XG59XG5cbi8qKlxuICogU2V0IHJlZnJlc2ggc3RhdGUgKHVzZWQgYnkgQVBJIGNsaWVudClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFJlZnJlc2hpbmcoc3RhdGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgaXNSZWZyZXNoaW5nVG9rZW4gPSBzdGF0ZTtcbiAgaWYgKERFQlVHX01PREUpIHtcbiAgICBjb25zb2xlLmxvZygnW1Rva2VuTWFuYWdlcl0gUmVmcmVzaCBzdGF0ZSBzZXQgdG86Jywgc3RhdGUpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IGN1cnJlbnQgcmVmcmVzaCBzY2hlZHVsZSB0aW1lb3V0IChmb3IgdGVzdGluZy9kZWJ1Z2dpbmcpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWZyZXNoU2NoZWR1bGVUaW1lb3V0KCk6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCB7XG4gIHJldHVybiByZWZyZXNoU2NoZWR1bGVUaW1lb3V0O1xufVxuXG4vKipcbiAqIFNldCByZWZyZXNoIHNjaGVkdWxlIHRpbWVvdXQgKHVzZWQgYnkgc2NoZWR1bGluZyBsb2dpYylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFJlZnJlc2hTY2hlZHVsZVRpbWVvdXQodGltZW91dDogTm9kZUpTLlRpbWVvdXQgfCBudWxsKTogdm9pZCB7XG4gIGlmIChyZWZyZXNoU2NoZWR1bGVUaW1lb3V0KSB7XG4gICAgY2xlYXJUaW1lb3V0KHJlZnJlc2hTY2hlZHVsZVRpbWVvdXQpO1xuICB9XG4gIHJlZnJlc2hTY2hlZHVsZVRpbWVvdXQgPSB0aW1lb3V0O1xufVxuXG4vKipcbiAqIFVwZGF0ZSBsYXN0IGFjdGl2aXR5IHRpbWVzdGFtcFxuICogU2hvdWxkIGJlIGNhbGxlZCBvbiB1c2VyIGludGVyYWN0aW9ucyBhbmQgQVBJIHJlcXVlc3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVMYXN0QWN0aXZpdHkoKTogdm9pZCB7XG4gIGxhc3RBY3Rpdml0eVRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gIGlmIChERUJVR19NT0RFKSB7XG4gICAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIEFjdGl2aXR5IHRpbWVzdGFtcCB1cGRhdGVkJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgdGltZSBzaW5jZSBsYXN0IGFjdGl2aXR5IGluIG1pbGxpc2Vjb25kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZVNpbmNlTGFzdEFjdGl2aXR5KCk6IG51bWJlciB7XG4gIHJldHVybiBEYXRlLm5vdygpIC0gbGFzdEFjdGl2aXR5VGltZXN0YW1wO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHVzZXIgaGFzIGJlZW4gaW5hY3RpdmUgZm9yIG1vcmUgdGhhbiB0aGUgdGhyZXNob2xkICg1IG1pbnV0ZXMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0luYWN0aXZlKCk6IGJvb2xlYW4ge1xuICBjb25zdCB0aW1lU2luY2VBY3Rpdml0eSA9IGdldFRpbWVTaW5jZUxhc3RBY3Rpdml0eSgpO1xuICBjb25zdCBpbmFjdGl2ZSA9IHRpbWVTaW5jZUFjdGl2aXR5ID4gSU5BQ1RJVklUWV9USFJFU0hPTERfTVM7XG5cbiAgaWYgKERFQlVHX01PREUgJiYgaW5hY3RpdmUpIHtcbiAgICBjb25zdCBtaW51dGVzSW5hY3RpdmUgPSBNYXRoLmZsb29yKHRpbWVTaW5jZUFjdGl2aXR5IC8gMTAwMCAvIDYwKTtcbiAgICBjb25zb2xlLmxvZyhgW1Rva2VuTWFuYWdlcl0gVXNlciBpbmFjdGl2ZSBmb3IgJHttaW51dGVzSW5hY3RpdmV9IG1pbnV0ZXNgKTtcbiAgfVxuXG4gIHJldHVybiBpbmFjdGl2ZTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSB0b2tlbiBmcmVzaG5lc3MgYWZ0ZXIgaW5hY3Rpdml0eVxuICogUmV0dXJucyB0cnVlIGlmIHRva2VuIGlzIHZhbGlkIG9yIHdhcyBzdWNjZXNzZnVsbHkgcmVmcmVzaGVkXG4gKiBSZXR1cm5zIGZhbHNlIGlmIHRva2VuIGlzIGludmFsaWQgYW5kIHJlZnJlc2ggZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUFmdGVySW5hY3Rpdml0eSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgaWYgKCFpc0luYWN0aXZlKCkpIHtcbiAgICBpZiAoREVCVUdfTU9ERSkge1xuICAgICAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIFVzZXIgYWN0aXZlLCBubyB2YWxpZGF0aW9uIG5lZWRlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBVc2VyIGluYWN0aXZlLCB2YWxpZGF0aW5nIHRva2VuIGZyZXNobmVzcycpO1xuXG4gIC8vIENoZWNrIGlmIHRva2VuIG5lZWRzIHJlZnJlc2hcbiAgaWYgKG5lZWRzUmVmcmVzaCgpKSB7XG4gICAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIFRva2VuIG5lZWRzIHJlZnJlc2ggYWZ0ZXIgaW5hY3Rpdml0eSwgcmVmcmVzaGluZycpO1xuXG4gICAgc2V0UmVmcmVzaGluZyh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVmcmVzaFN1Y2Nlc3MgPSBhd2FpdCByZWZyZXNoV2l0aFJldHJ5KCk7XG5cbiAgICAgIGlmIChyZWZyZXNoU3VjY2Vzcykge1xuICAgICAgICBjb25zb2xlLmxvZygnW1Rva2VuTWFuYWdlcl0gVG9rZW4gcmVmcmVzaGVkIHN1Y2Nlc3NmdWxseSBhZnRlciBpbmFjdGl2aXR5Jyk7XG4gICAgICAgIC8vIFVwZGF0ZSBhY3Rpdml0eSB0aW1lc3RhbXAgYWZ0ZXIgc3VjY2Vzc2Z1bCByZWZyZXNoXG4gICAgICAgIHVwZGF0ZUxhc3RBY3Rpdml0eSgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tUb2tlbk1hbmFnZXJdIFRva2VuIHJlZnJlc2ggZmFpbGVkIGFmdGVyIGluYWN0aXZpdHknKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRSZWZyZXNoaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKERFQlVHX01PREUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBUb2tlbiBzdGlsbCB2YWxpZCBhZnRlciBpbmFjdGl2aXR5Jyk7XG4gICAgfVxuICAgIC8vIFVwZGF0ZSBhY3Rpdml0eSB0aW1lc3RhbXAgc2luY2Ugd2UgdmFsaWRhdGVkXG4gICAgdXBkYXRlTGFzdEFjdGl2aXR5KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIHRva2VuIG1hbmFnZXJcbiAqIFNob3VsZCBiZSBjYWxsZWQgb24gYXBwbGljYXRpb24gc3RhcnR1cFxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG5cbiAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIEluaXRpYWxpemluZyB0b2tlbiBtYW5hZ2VyJyk7XG5cbiAgLy8gSW5pdGlhbGl6ZSBhY3Rpdml0eSB0aW1lc3RhbXBcbiAgdXBkYXRlTGFzdEFjdGl2aXR5KCk7XG5cbiAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhIHRva2VuXG4gIGNvbnN0IGFjY2Vzc1Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG4gIGlmICghYWNjZXNzVG9rZW4pIHtcbiAgICBpZiAoREVCVUdfTU9ERSkge1xuICAgICAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIE5vIHRva2VuIGZvdW5kLCBza2lwcGluZyBpbml0aWFsaXphdGlvbicpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBFbnN1cmUgdG9rZW4gaGFzIGV4cGlyeSBzdG9yZWRcbiAgY29uc3Qgc3RvcmVkRXhwaXJ5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuRXhwaXJ5Jyk7XG4gIGlmICghc3RvcmVkRXhwaXJ5KSB7XG4gICAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIFRva2VuIGZvdW5kIHdpdGhvdXQgZXhwaXJ5LCBjYWxjdWxhdGluZyBhbmQgc3RvcmluZycpO1xuICAgIHN0b3JlVG9rZW5XaXRoRXhwaXJ5KGFjY2Vzc1Rva2VuKTtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHRva2VuIG5lZWRzIGltbWVkaWF0ZSByZWZyZXNoXG4gIGlmIChuZWVkc1JlZnJlc2goKSkge1xuICAgIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBUb2tlbiBuZWVkcyBpbW1lZGlhdGUgcmVmcmVzaCcpO1xuICB9IGVsc2Uge1xuICAgIGlmIChERUJVR19NT0RFKSB7XG4gICAgICBjb25zdCBleHBpcnkgPSBnZXRUb2tlbkV4cGlyeSgpO1xuICAgICAgaWYgKGV4cGlyeSkge1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCB0aW1lVW50aWxSZWZyZXNoID0gZXhwaXJ5LmdldFRpbWUoKSAtIG5vdy5nZXRUaW1lKCkgLSAyICogNjAgKiAxMDAwO1xuICAgICAgICBjb25zdCBtaW51dGVzVW50aWxSZWZyZXNoID0gTWF0aC5mbG9vcih0aW1lVW50aWxSZWZyZXNoIC8gMTAwMCAvIDYwKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtUb2tlbk1hbmFnZXJdIFRva2VuIHZhbGlkLCByZWZyZXNoIHNjaGVkdWxlZCBpbiB+JHttaW51dGVzVW50aWxSZWZyZXNofSBtaW51dGVzYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIEluaXRpYWxpemF0aW9uIGNvbXBsZXRlJyk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgZXJyb3IgaXMgYSBuZXR3b3JrIGVycm9yIChub3QgYSA0MDEgZnJvbSByZWZyZXNoIGVuZHBvaW50KVxuICovXG5mdW5jdGlvbiBpc05ldHdvcmtFcnJvcihlcnJvcjogYW55KTogYm9vbGVhbiB7XG4gIC8vIE5ldHdvcmsgZXJyb3JzIGRvbid0IGhhdmUgYSByZXNwb25zZVxuICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBDaGVjayBmb3IgbmV0d29yay1yZWxhdGVkIHN0YXR1cyBjb2Rlc1xuICBjb25zdCBuZXR3b3JrU3RhdHVzQ29kZXMgPSBbNDA4LCA0MjksIDUwMCwgNTAyLCA1MDMsIDUwNF07XG4gIHJldHVybiBuZXR3b3JrU3RhdHVzQ29kZXMuaW5jbHVkZXMoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKTtcbn1cblxuLyoqXG4gKiBTbGVlcCB1dGlsaXR5IGZvciBleHBvbmVudGlhbCBiYWNrb2ZmXG4gKi9cbmZ1bmN0aW9uIHNsZWVwKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG4vKipcbiAqIFJlZnJlc2ggdG9rZW4gd2l0aCByZXRyeSBsb2dpYyBhbmQgZXhwb25lbnRpYWwgYmFja29mZlxuICogUmV0cmllcyB1cCB0byAyIHRpbWVzIGZvciBuZXR3b3JrIGVycm9ycyB3aXRoIGRlbGF5cyBvZiAxcywgMnNcbiAqIERvZXMgbm90IHJldHJ5IGZvciA0MDEgZXJyb3JzIGZyb20gcmVmcmVzaCBlbmRwb2ludFxuICogXG4gKiBAcGFyYW0gYXR0ZW1wdCAtIEN1cnJlbnQgYXR0ZW1wdCBudW1iZXIgKDAtaW5kZXhlZClcbiAqIEByZXR1cm5zIFByb21pc2U8Ym9vbGVhbj4gLSB0cnVlIGlmIHJlZnJlc2ggc3VjY2VlZGVkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hXaXRoUmV0cnkoYXR0ZW1wdDogbnVtYmVyID0gMCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBBUElfVVJMID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo0MDAwJztcblxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbVG9rZW5NYW5hZ2VyXSBDYW5ub3QgcmVmcmVzaCB0b2tlbjogbm90IGluIGJyb3dzZXIgZW52aXJvbm1lbnQnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCByZWZyZXNoVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVmcmVzaFRva2VuJyk7XG4gIGlmICghcmVmcmVzaFRva2VuKSB7XG4gICAgY29uc29sZS5lcnJvcignW1Rva2VuTWFuYWdlcl0gTm8gcmVmcmVzaCB0b2tlbiBhdmFpbGFibGUnKTtcbiAgICBjbGVhclRva2VucygnTm8gcmVmcmVzaCB0b2tlbiBhdmFpbGFibGUnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB0cnkge1xuICAgIGlmIChERUJVR19NT0RFKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1Rva2VuTWFuYWdlcl0gQXR0ZW1wdGluZyB0b2tlbiByZWZyZXNoIChhdHRlbXB0ICR7YXR0ZW1wdCArIDF9KWApO1xuICAgIH1cblxuICAgIC8vIEltcG9ydCBheGlvcyBkeW5hbWljYWxseSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXNcbiAgICBjb25zdCBheGlvcyA9IChhd2FpdCBpbXBvcnQoJ2F4aW9zJykpLmRlZmF1bHQ7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7QVBJX1VSTH0vYXBpL2F1dGgvcmVmcmVzaGAsIHtcbiAgICAgIHJlZnJlc2hUb2tlbixcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4gfSA9IHJlc3BvbnNlLmRhdGE7XG5cbiAgICBpZiAoIWFjY2Vzc1Rva2VuKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbVG9rZW5NYW5hZ2VyXSBSZWZyZXNoIHJlc3BvbnNlIG1pc3NpbmcgYWNjZXNzVG9rZW4nKTtcbiAgICAgIGNsZWFyVG9rZW5zKCdJbnZhbGlkIHJlZnJlc2ggcmVzcG9uc2UnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSB0aGUgbmV3IHRva2VuIHdpdGggZXhwaXJ5XG4gICAgc3RvcmVUb2tlbldpdGhFeHBpcnkoYWNjZXNzVG9rZW4pO1xuICAgIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBUb2tlbiByZWZyZXNoIHN1Y2Nlc3NmdWwnKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgLy8gSGFuZGxlIDQwMSBmcm9tIHJlZnJlc2ggZW5kcG9pbnQgLSBubyByZXRyeVxuICAgIGlmIChlcnJvci5yZXNwb25zZT8uc3RhdHVzID09PSA0MDEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tUb2tlbk1hbmFnZXJdIFJlZnJlc2ggdG9rZW4gaW52YWxpZCBvciBleHBpcmVkICg0MDEpJyk7XG4gICAgICBjbGVhclRva2VucygnUmVmcmVzaCB0b2tlbiBpbnZhbGlkIG9yIGV4cGlyZWQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgbmV0d29yayBlcnJvcnMgd2l0aCByZXRyeVxuICAgIGlmIChpc05ldHdvcmtFcnJvcihlcnJvcikgJiYgYXR0ZW1wdCA8IDIpIHtcbiAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgYXR0ZW1wdCkgKiAxMDAwOyAvLyAxcywgMnNcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFtUb2tlbk1hbmFnZXJdIE5ldHdvcmsgZXJyb3IgZHVyaW5nIHJlZnJlc2gsIHJldHJ5aW5nIGluICR7ZGVsYXl9bXMgKGF0dGVtcHQgJHthdHRlbXB0ICsgMX0vMilgLFxuICAgICAgICBlcnJvci5tZXNzYWdlXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBzbGVlcChkZWxheSk7XG4gICAgICByZXR1cm4gcmVmcmVzaFdpdGhSZXRyeShhdHRlbXB0ICsgMSk7XG4gICAgfVxuXG4gICAgLy8gQWxsIHJldHJpZXMgZXhoYXVzdGVkIG9yIG5vbi1yZXRyeWFibGUgZXJyb3JcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgYFtUb2tlbk1hbmFnZXJdIFRva2VuIHJlZnJlc2ggZmFpbGVkIGFmdGVyICR7YXR0ZW1wdCArIDF9IGF0dGVtcHQocylgLFxuICAgICAgZXJyb3IubWVzc2FnZVxuICAgICk7XG4gICAgY2xlYXJUb2tlbnMoJ1Rva2VuIHJlZnJlc2ggZmFpbGVkJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogU2NoZWR1bGUgcHJvYWN0aXZlIHRva2VuIHJlZnJlc2hcbiAqIENhbGN1bGF0ZXMgdGltZSB1bnRpbCByZWZyZXNoIG5lZWRlZCAoZXhwaXJ5IC0gMiBtaW51dGVzKSBhbmQgc2V0cyB0aW1lb3V0XG4gKiBDbGVhcnMgYW55IGV4aXN0aW5nIHRpbWVvdXQgYmVmb3JlIHNldHRpbmcgbmV3IG9uZVxuICogSGFuZGxlcyBlZGdlIGNhc2Ugd2hlcmUgdG9rZW4gYWxyZWFkeSBuZWVkcyByZWZyZXNoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZVByb2FjdGl2ZVJlZnJlc2goKTogdm9pZCB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuXG4gIC8vIENsZWFyIGFueSBleGlzdGluZyBzY2hlZHVsZWQgcmVmcmVzaFxuICBpZiAocmVmcmVzaFNjaGVkdWxlVGltZW91dCkge1xuICAgIGNsZWFyVGltZW91dChyZWZyZXNoU2NoZWR1bGVUaW1lb3V0KTtcbiAgICByZWZyZXNoU2NoZWR1bGVUaW1lb3V0ID0gbnVsbDtcbiAgICBpZiAoREVCVUdfTU9ERSkge1xuICAgICAgY29uc29sZS5sb2coJ1tUb2tlbk1hbmFnZXJdIENsZWFyZWQgZXhpc3RpbmcgcmVmcmVzaCBzY2hlZHVsZScpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGV4cGlyeSA9IGdldFRva2VuRXhwaXJ5KCk7XG4gIGlmICghZXhwaXJ5KSB7XG4gICAgaWYgKERFQlVHX01PREUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBObyB0b2tlbiBleHBpcnkgZm91bmQsIGNhbm5vdCBzY2hlZHVsZSByZWZyZXNoJyk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IHRpbWVVbnRpbEV4cGlyeSA9IGV4cGlyeS5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpO1xuICBjb25zdCB0d29NaW51dGVzSW5NcyA9IDIgKiA2MCAqIDEwMDA7XG4gIGNvbnN0IHRpbWVVbnRpbFJlZnJlc2ggPSB0aW1lVW50aWxFeHBpcnkgLSB0d29NaW51dGVzSW5NcztcblxuICAvLyBFZGdlIGNhc2U6IHRva2VuIGFscmVhZHkgbmVlZHMgcmVmcmVzaCAoZXhwaXJlcyBpbiA8IDIgbWludXRlcylcbiAgaWYgKHRpbWVVbnRpbFJlZnJlc2ggPD0gMCkge1xuICAgIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBUb2tlbiBhbHJlYWR5IG5lZWRzIHJlZnJlc2gsIHRyaWdnZXJpbmcgaW1tZWRpYXRlbHknKTtcbiAgICByZWZyZXNoV2l0aFJldHJ5KCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbVG9rZW5NYW5hZ2VyXSBJbW1lZGlhdGUgcmVmcmVzaCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFNjaGVkdWxlIHJlZnJlc2ggZm9yIDIgbWludXRlcyBiZWZvcmUgZXhwaXJ5XG4gIGNvbnN0IG1pbnV0ZXNVbnRpbFJlZnJlc2ggPSBNYXRoLmZsb29yKHRpbWVVbnRpbFJlZnJlc2ggLyAxMDAwIC8gNjApO1xuICBjb25zdCBzZWNvbmRzVW50aWxSZWZyZXNoID0gTWF0aC5mbG9vcigodGltZVVudGlsUmVmcmVzaCAvIDEwMDApICUgNjApO1xuXG4gIGNvbnNvbGUubG9nKFxuICAgIGBbVG9rZW5NYW5hZ2VyXSBTY2hlZHVsaW5nIHByb2FjdGl2ZSByZWZyZXNoIGluICR7bWludXRlc1VudGlsUmVmcmVzaH1tICR7c2Vjb25kc1VudGlsUmVmcmVzaH1zYFxuICApO1xuXG4gIHJlZnJlc2hTY2hlZHVsZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW1Rva2VuTWFuYWdlcl0gUHJvYWN0aXZlIHJlZnJlc2ggdHJpZ2dlcmVkIGJ5IHNjaGVkdWxlJyk7XG4gICAgcmVmcmVzaFdpdGhSZXRyeSgpXG4gICAgICAudGhlbigoc3VjY2VzcykgPT4ge1xuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgIC8vIFNjaGVkdWxlIG5leHQgcmVmcmVzaCBhZnRlciBzdWNjZXNzZnVsIHJlZnJlc2hcbiAgICAgICAgICBzY2hlZHVsZVByb2FjdGl2ZVJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW1Rva2VuTWFuYWdlcl0gU2NoZWR1bGVkIHJlZnJlc2ggZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIH0pO1xuICB9LCB0aW1lVW50aWxSZWZyZXNoKTtcblxuICBpZiAoREVCVUdfTU9ERSkge1xuICAgIGNvbnNvbGUubG9nKCdbVG9rZW5NYW5hZ2VyXSBSZWZyZXNoIHNjaGVkdWxlZCBmb3I6JywgbmV3IERhdGUobm93LmdldFRpbWUoKSArIHRpbWVVbnRpbFJlZnJlc2gpLnRvSVNPU3RyaW5nKCkpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB0b2tlbk1hbmFnZXIgPSB7XG4gIGluaXRpYWxpemUsXG4gIGdldFRva2VuRXhwaXJ5LFxuICBuZWVkc1JlZnJlc2gsXG4gIHN0b3JlVG9rZW5XaXRoRXhwaXJ5LFxuICBjbGVhclRva2VucyxcbiAgaXNSZWZyZXNoaW5nLFxuICBzZXRSZWZyZXNoaW5nLFxuICBnZXRSZWZyZXNoU2NoZWR1bGVUaW1lb3V0LFxuICBzZXRSZWZyZXNoU2NoZWR1bGVUaW1lb3V0LFxuICByZWZyZXNoV2l0aFJldHJ5LFxuICBzY2hlZHVsZVByb2FjdGl2ZVJlZnJlc2gsXG4gIHVwZGF0ZUxhc3RBY3Rpdml0eSxcbiAgZ2V0VGltZVNpbmNlTGFzdEFjdGl2aXR5LFxuICBpc0luYWN0aXZlLFxuICB2YWxpZGF0ZUFmdGVySW5hY3Rpdml0eSxcbn07XG4iXSwibmFtZXMiOlsiaXNSZWZyZXNoaW5nVG9rZW4iLCJyZWZyZXNoU2NoZWR1bGVUaW1lb3V0IiwibGFzdEFjdGl2aXR5VGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsIklOQUNUSVZJVFlfVEhSRVNIT0xEX01TIiwiREVCVUdfTU9ERSIsInByb2Nlc3MiLCJwYXJzZUpXVCIsInRva2VuIiwiYmFzZTY0VXJsIiwic3BsaXQiLCJiYXNlNjQiLCJyZXBsYWNlIiwianNvblBheWxvYWQiLCJkZWNvZGVVUklDb21wb25lbnQiLCJhdG9iIiwibWFwIiwiYyIsImNoYXJDb2RlQXQiLCJ0b1N0cmluZyIsInNsaWNlIiwiam9pbiIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsImdldFRva2VuRXhwaXJ5Iiwic3RvcmVkRXhwaXJ5IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImV4cGlyeURhdGUiLCJpc05hTiIsImdldFRpbWUiLCJsb2ciLCJ0b0lTT1N0cmluZyIsImFjY2Vzc1Rva2VuIiwicGF5bG9hZCIsImV4cCIsIm5lZWRzUmVmcmVzaCIsImV4cGlyeSIsInRpbWVVbnRpbEV4cGlyeSIsInR3b01pbnV0ZXNJbk1zIiwibmVlZHMiLCJtaW51dGVzUmVtYWluaW5nIiwiTWF0aCIsImZsb29yIiwic2Vjb25kc1JlbWFpbmluZyIsInN0b3JlVG9rZW5XaXRoRXhwaXJ5Iiwic2V0SXRlbSIsImNsZWFyVG9rZW5zIiwicmVhc29uIiwicmVtb3ZlSXRlbSIsImNsZWFyVGltZW91dCIsImlzUmVmcmVzaGluZyIsInNldFJlZnJlc2hpbmciLCJzdGF0ZSIsImdldFJlZnJlc2hTY2hlZHVsZVRpbWVvdXQiLCJzZXRSZWZyZXNoU2NoZWR1bGVUaW1lb3V0IiwidGltZW91dCIsInVwZGF0ZUxhc3RBY3Rpdml0eSIsImdldFRpbWVTaW5jZUxhc3RBY3Rpdml0eSIsImlzSW5hY3RpdmUiLCJ0aW1lU2luY2VBY3Rpdml0eSIsImluYWN0aXZlIiwibWludXRlc0luYWN0aXZlIiwidmFsaWRhdGVBZnRlckluYWN0aXZpdHkiLCJyZWZyZXNoU3VjY2VzcyIsInJlZnJlc2hXaXRoUmV0cnkiLCJpbml0aWFsaXplIiwidGltZVVudGlsUmVmcmVzaCIsIm1pbnV0ZXNVbnRpbFJlZnJlc2giLCJpc05ldHdvcmtFcnJvciIsInJlc3BvbnNlIiwibmV0d29ya1N0YXR1c0NvZGVzIiwiaW5jbHVkZXMiLCJzdGF0dXMiLCJzbGVlcCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiYXR0ZW1wdCIsIkFQSV9VUkwiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwicmVmcmVzaFRva2VuIiwiYXhpb3MiLCJkZWZhdWx0IiwicG9zdCIsImRhdGEiLCJkZWxheSIsInBvdyIsIndhcm4iLCJtZXNzYWdlIiwic2NoZWR1bGVQcm9hY3RpdmVSZWZyZXNoIiwiY2F0Y2giLCJzZWNvbmRzVW50aWxSZWZyZXNoIiwidGhlbiIsInN1Y2Nlc3MiLCJ0b2tlbk1hbmFnZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/utils/tokenManager.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/globals.css":
/*!*****************************!*\
  !*** ./src/app/globals.css ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"e8b9f4f6c946\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2dsb2JhbHMuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamVjcmMtZGF0aW5nLWZyb250ZW5kLy4vc3JjL2FwcC9nbG9iYWxzLmNzcz81N2U4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiZThiOWY0ZjZjOTQ2XCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/globals.css\n");

/***/ }),

/***/ "(rsc)/./src/app/layout.tsx":
/*!****************************!*\
  !*** ./src/app/layout.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_font_google_target_css_path_src_app_layout_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/font/google/target.css?{\"path\":\"src/app/layout.tsx\",\"import\":\"Inter\",\"arguments\":[{\"subsets\":[\"latin\"]}],\"variableName\":\"inter\"} */ \"(rsc)/./node_modules/next/font/google/target.css?{\\\"path\\\":\\\"src/app/layout.tsx\\\",\\\"import\\\":\\\"Inter\\\",\\\"arguments\\\":[{\\\"subsets\\\":[\\\"latin\\\"]}],\\\"variableName\\\":\\\"inter\\\"}\");\n/* harmony import */ var next_font_google_target_css_path_src_app_layout_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_font_google_target_css_path_src_app_layout_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./src/app/globals.css\");\n/* harmony import */ var _components_TokenRefreshProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/TokenRefreshProvider */ \"(rsc)/./src/components/TokenRefreshProvider.tsx\");\n\n\n\n\nconst metadata = {\n    title: \"JECRC Dating - Find Your Campus Connection\",\n    description: \"Connect with fellow JECRC students. Safe, verified, and fun dating for university students.\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            className: (next_font_google_target_css_path_src_app_layout_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_3___default().className),\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_TokenRefreshProvider__WEBPACK_IMPORTED_MODULE_2__.TokenRefreshProvider, {\n                children: children\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/layout.tsx\",\n                lineNumber: 21,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/layout.tsx\",\n            lineNumber: 20,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/layout.tsx\",\n        lineNumber: 19,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xheW91dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBS01BO0FBSGlCO0FBQ2tEO0FBSWxFLE1BQU1FLFdBQXFCO0lBQ2hDQyxPQUFPO0lBQ1BDLGFBQWE7QUFDZixFQUFFO0FBRWEsU0FBU0MsV0FBVyxFQUNqQ0MsUUFBUSxFQUdUO0lBQ0MscUJBQ0UsOERBQUNDO1FBQUtDLE1BQUs7a0JBQ1QsNEVBQUNDO1lBQUtDLFdBQVdWLCtKQUFlO3NCQUM5Qiw0RUFBQ0Msa0ZBQW9CQTswQkFDbEJLOzs7Ozs7Ozs7Ozs7Ozs7O0FBS1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qZWNyYy1kYXRpbmctZnJvbnRlbmQvLi9zcmMvYXBwL2xheW91dC50c3g/NTdhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE1ldGFkYXRhIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBJbnRlciB9IGZyb20gJ25leHQvZm9udC9nb29nbGUnO1xuaW1wb3J0ICcuL2dsb2JhbHMuY3NzJztcbmltcG9ydCB7IFRva2VuUmVmcmVzaFByb3ZpZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL1Rva2VuUmVmcmVzaFByb3ZpZGVyJztcblxuY29uc3QgaW50ZXIgPSBJbnRlcih7IHN1YnNldHM6IFsnbGF0aW4nXSB9KTtcblxuZXhwb3J0IGNvbnN0IG1ldGFkYXRhOiBNZXRhZGF0YSA9IHtcbiAgdGl0bGU6ICdKRUNSQyBEYXRpbmcgLSBGaW5kIFlvdXIgQ2FtcHVzIENvbm5lY3Rpb24nLFxuICBkZXNjcmlwdGlvbjogJ0Nvbm5lY3Qgd2l0aCBmZWxsb3cgSkVDUkMgc3R1ZGVudHMuIFNhZmUsIHZlcmlmaWVkLCBhbmQgZnVuIGRhdGluZyBmb3IgdW5pdmVyc2l0eSBzdHVkZW50cy4nLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm9vdExheW91dCh7XG4gIGNoaWxkcmVuLFxufToge1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xufSkge1xuICByZXR1cm4gKFxuICAgIDxodG1sIGxhbmc9XCJlblwiPlxuICAgICAgPGJvZHkgY2xhc3NOYW1lPXtpbnRlci5jbGFzc05hbWV9PlxuICAgICAgICA8VG9rZW5SZWZyZXNoUHJvdmlkZXI+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L1Rva2VuUmVmcmVzaFByb3ZpZGVyPlxuICAgICAgPC9ib2R5PlxuICAgIDwvaHRtbD5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJpbnRlciIsIlRva2VuUmVmcmVzaFByb3ZpZGVyIiwibWV0YWRhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiUm9vdExheW91dCIsImNoaWxkcmVuIiwiaHRtbCIsImxhbmciLCJib2R5IiwiY2xhc3NOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./src/app/messages/page.tsx":
/*!***********************************!*\
  !*** ./src/app/messages/page.tsx ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/messages/page.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ }),

/***/ "(rsc)/./src/components/TokenRefreshProvider.tsx":
/*!*************************************************!*\
  !*** ./src/components/TokenRefreshProvider.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TokenRefreshProvider: () => (/* binding */ e0)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/TokenRefreshProvider.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;

const e0 = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/TokenRefreshProvider.tsx#TokenRefreshProvider`);


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/@swc","vendor-chunks/has-flag","vendor-chunks/engine.io-client","vendor-chunks/ws","vendor-chunks/socket.io-client","vendor-chunks/socket.io-parser","vendor-chunks/engine.io-parser","vendor-chunks/@socket.io","vendor-chunks/xmlhttprequest-ssl"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fmessages%2Fpage&page=%2Fmessages%2Fpage&appPaths=%2Fmessages%2Fpage&pagePath=private-next-app-dir%2Fmessages%2Fpage.tsx&appDir=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyogesh%2FDownloads%2Fjecrc_dating%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();