(()=>{var e={};e.id=505,e.ids=[505],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},6429:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=t(482),a=t(9108),i=t(2563),l=t.n(i),n=t(8300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=["",{children:["admin",{children:["chats",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6649)),"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/admin/chats/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2050)),"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1342)),"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/admin/chats/page.tsx"],x="/admin/chats/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/chats/page",pathname:"/admin/chats",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6827:(e,s,t)=>{Promise.resolve().then(t.bind(t,6511))},6511:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(2295),a=t(3729),i=t(6548);function l(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)([]),[n,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null),[x,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(!1),[g,p]=(0,a.useState)(0),[y,f]=(0,a.useState)(0),[b,v]=(0,a.useState)("");(0,a.useEffect)(()=>{j()},[g]);let j=async()=>{try{d(!0);let e=await i.h.getAdminChats(20,g),t=e.matches||[];l(t),s(t),f(e.total)}catch(e){console.error("Failed to load matches:",e)}finally{d(!1)}},N=e=>{if(!e.trim()){s(t);return}let r=e.toLowerCase();s(t.filter(e=>{let s=(e.userA.displayName||e.userA.email||"").toLowerCase(),t=(e.userB.displayName||e.userB.email||"").toLowerCase(),a=e.messages[0]?.content?.toLowerCase()||"";return s.includes(r)||t.includes(r)||a.includes(r)}))},w=async e=>{try{h(!0),c(e);let s=await i.h.getAdminChatMessages(e.id);m(s.messages||[])}catch(e){console.error("Failed to load messages:",e)}finally{h(!1)}},D=e=>["spam","scam","fake","inappropriate"].some(s=>e.toLowerCase().includes(s));return(0,r.jsxs)("div",{className:"flex gap-6 h-[calc(100vh-12rem)]",children:[(0,r.jsxs)("div",{className:"w-1/3 flex flex-col",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Chat Monitoring"}),r.jsx("p",{className:"text-gray-400",children:"Monitor all conversations on the platform"})]}),r.jsx("form",{onSubmit:e=>{e.preventDefault(),N(b)},className:"mb-4",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"text",value:b,onChange:e=>{v(e.target.value),N(e.target.value)},placeholder:"Search by name, email, or message...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"}),r.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"\uD83D\uDD0D"})]})}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 flex-1 flex flex-col overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",e.length," of ",y," conversations"]})}),n?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"flex-1 overflow-y-auto",children:e.map(e=>(0,r.jsxs)("button",{onClick:()=>w(e),className:`w-full p-4 text-left border-b border-gray-700 hover:bg-gray-700/50 transition ${o?.id===e.id?"bg-gray-700":""}`,children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsxs)("div",{className:"text-white font-medium",children:[e.userA.displayName||e.userA.email," ↔️ ",e.userB.displayName||e.userB.email]})}),e.messages[0]&&r.jsx("div",{className:"text-gray-400 text-sm truncate",children:e.messages[0].content}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-700 flex justify-between items-center",children:[r.jsx("button",{onClick:()=>p(Math.max(0,g-20)),disabled:0===g,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Previous"}),(0,r.jsxs)("span",{className:"text-gray-400 text-sm",children:[Math.floor(g/20)+1," / ",Math.ceil(y/20)]}),r.jsx("button",{onClick:()=>p(g+20),disabled:g+20>=y,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Next"})]})]})]})]}),r.jsx("div",{className:"flex-1 flex flex-col",children:o?(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 flex-1 flex flex-col overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-xl font-bold text-white mb-1",children:[o.userA.displayName||o.userA.email," ↔️"," ",o.userB.displayName||o.userB.email]}),(0,r.jsxs)("div",{className:"text-gray-400 text-sm",children:["Matched on ",new Date(o.createdAt).toLocaleDateString()]})]}),r.jsx("button",{onClick:()=>c(null),className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition text-sm",children:"Close"})]})}),u?r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):0===x.length?r.jsx("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCED"}),r.jsx("div",{className:"text-gray-400",children:"No messages yet"})]})}):r.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:x.map(e=>{let s=e.senderId===o.userA.id,t=s?o.userA:o.userB,a=D(e.content);return r.jsx("div",{className:`flex ${s?"justify-start":"justify-end"}`,children:(0,r.jsxs)("div",{className:`max-w-[70%] ${s?"items-start":"items-end"} flex flex-col`,children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:t.displayName||t.email}),(0,r.jsxs)("div",{className:`rounded-2xl px-4 py-2 ${a?"bg-red-500/20 border-2 border-red-500":s?"bg-gray-700":"bg-purple-600"}`,children:[r.jsx("div",{className:"text-white break-words",children:e.content}),a&&r.jsx("div",{className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:"⚠️ Flagged for review"})]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleString()})]})},e.id)})}),r.jsx("div",{className:"p-4 border-t border-gray-700 bg-gray-900",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Messages"}),r.jsx("div",{className:"text-white font-bold",children:x.length})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Flagged"}),r.jsx("div",{className:"text-red-400 font-bold",children:x.filter(e=>D(e.content)).length})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Match Duration"}),(0,r.jsxs)("div",{className:"text-white font-bold",children:[Math.floor((new Date().getTime()-new Date(o.createdAt).getTime())/864e5)," ","days"]})]})]})})]}):r.jsx("div",{className:"bg-gray-800 rounded-xl border border-gray-700 flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCAC"}),r.jsx("div",{className:"text-xl font-bold text-white mb-2",children:"Select a Conversation"}),r.jsx("div",{className:"text-gray-400",children:"Choose a conversation from the list to view messages"})]})})})]})}},6649:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let r=(0,t(6843).createProxy)(String.raw`/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/admin/chats/page.tsx`),{__esModule:a,$$typeof:i}=r,l=r.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[574,476,60,802],()=>t(6429));module.exports=r})();