(()=>{var e={};e.id=505,e.ids=[505],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},6429:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=t(482),a=t(9108),i=t(2563),l=t.n(i),n=t(8300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["admin",{children:["chats",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6649)),"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/admin/chats/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2050)),"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1342)),"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/admin/chats/page.tsx"],x="/admin/chats/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/chats/page",pathname:"/admin/chats",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6827:(e,s,t)=>{Promise.resolve().then(t.bind(t,6511))},6511:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(2295),a=t(3729),i=t(6548);function l(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[n,d]=(0,a.useState)(null),[c,o]=(0,a.useState)([]),[x,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(0),[g,p]=(0,a.useState)(0);(0,a.useEffect)(()=>{y()},[u]);let y=async()=>{try{l(!0);let e=await i.h.getAdminChats(20,u);s(e.matches||[]),p(e.total)}catch(e){console.error("Failed to load matches:",e)}finally{l(!1)}},b=async e=>{try{m(!0),d(e);let s=await i.h.getAdminChatMessages(e.id);o(s.messages||[])}catch(e){console.error("Failed to load messages:",e)}finally{m(!1)}},f=e=>["spam","scam","fake","inappropriate"].some(s=>e.toLowerCase().includes(s));return(0,r.jsxs)("div",{className:"flex gap-6 h-[calc(100vh-12rem)]",children:[(0,r.jsxs)("div",{className:"w-1/3 flex flex-col",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Chat Monitoring"}),r.jsx("p",{className:"text-gray-400",children:"Monitor all conversations on the platform"})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 flex-1 flex flex-col overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"text-gray-400 text-sm",children:[g," total conversations"]})}),t?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"flex-1 overflow-y-auto",children:e.map(e=>(0,r.jsxs)("button",{onClick:()=>b(e),className:`w-full p-4 text-left border-b border-gray-700 hover:bg-gray-700/50 transition ${n?.id===e.id?"bg-gray-700":""}`,children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsxs)("div",{className:"text-white font-medium",children:[e.userA.displayName||e.userA.email," ↔️ ",e.userB.displayName||e.userB.email]})}),e.messages[0]&&r.jsx("div",{className:"text-gray-400 text-sm truncate",children:e.messages[0].content}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-700 flex justify-between items-center",children:[r.jsx("button",{onClick:()=>h(Math.max(0,u-20)),disabled:0===u,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Previous"}),(0,r.jsxs)("span",{className:"text-gray-400 text-sm",children:[Math.floor(u/20)+1," / ",Math.ceil(g/20)]}),r.jsx("button",{onClick:()=>h(u+20),disabled:u+20>=g,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Next"})]})]})]})]}),r.jsx("div",{className:"flex-1 flex flex-col",children:n?(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 flex-1 flex flex-col overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-xl font-bold text-white mb-1",children:[n.userA.displayName||n.userA.email," ↔️"," ",n.userB.displayName||n.userB.email]}),(0,r.jsxs)("div",{className:"text-gray-400 text-sm",children:["Matched on ",new Date(n.createdAt).toLocaleDateString()]})]}),r.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition text-sm",children:"Close"})]})}),x?r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}):0===c.length?r.jsx("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCED"}),r.jsx("div",{className:"text-gray-400",children:"No messages yet"})]})}):r.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:c.map(e=>{let s=e.senderId===n.userA.id,t=s?n.userA:n.userB,a=f(e.content);return r.jsx("div",{className:`flex ${s?"justify-start":"justify-end"}`,children:(0,r.jsxs)("div",{className:`max-w-[70%] ${s?"items-start":"items-end"} flex flex-col`,children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:t.displayName||t.email}),(0,r.jsxs)("div",{className:`rounded-2xl px-4 py-2 ${a?"bg-red-500/20 border-2 border-red-500":s?"bg-gray-700":"bg-purple-600"}`,children:[r.jsx("div",{className:"text-white break-words",children:e.content}),a&&r.jsx("div",{className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:"⚠️ Flagged for review"})]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleString()})]})},e.id)})}),r.jsx("div",{className:"p-4 border-t border-gray-700 bg-gray-900",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Messages"}),r.jsx("div",{className:"text-white font-bold",children:c.length})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Flagged"}),r.jsx("div",{className:"text-red-400 font-bold",children:c.filter(e=>f(e.content)).length})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Match Duration"}),(0,r.jsxs)("div",{className:"text-white font-bold",children:[Math.floor((new Date().getTime()-new Date(n.createdAt).getTime())/864e5)," ","days"]})]})]})})]}):r.jsx("div",{className:"bg-gray-800 rounded-xl border border-gray-700 flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCAC"}),r.jsx("div",{className:"text-xl font-bold text-white mb-2",children:"Select a Conversation"}),r.jsx("div",{className:"text-gray-400",children:"Choose a conversation from the list to view messages"})]})})})]})}},6649:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let r=(0,t(6843).createProxy)(String.raw`/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/admin/chats/page.tsx`),{__esModule:a,$$typeof:i}=r,l=r.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[574,476,60,802],()=>t(6429));module.exports=r})();