(()=>{var e={};e.id=583,e.ids=[583],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(482),a=s(9108),l=s(2563),n=s.n(l),i=s(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["discover",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9007)),"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/discover/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4803)),"/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/discover/page.tsx"],x="/discover/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/discover/page",pathname:"/discover",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3959:(e,t,s)=>{Promise.resolve().then(s.bind(s,9710))},9710:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(2295),a=s(3729),l=s(2254),n=s(783),i=s.n(n),o=s(6548),d=s(7075);let c=(0,d.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var x=s(4513);let p=(0,d.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),u=(0,d.Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),h=["Computer Science","Information Technology","Electronics","Mechanical","Civil","Electrical","Chemical","Other"],m=["1st Year","2nd Year","3rd Year","4th Year"],g=["Music","Movies","Sports","Gaming","Reading","Traveling","Photography","Cooking","Art","Dancing","Fitness","Technology","Fashion","Food"];function b({filters:e,onFiltersChange:t}){let[s,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)(null),o=(s,r)=>{let a=e[s],l=a.includes(r)?a.filter(e=>e!==r):[...a,r];t({...e,[s]:l})},d=()=>{t({department:[],year:[],interests:[]})},b=e.department.length+e.year.length+e.interests.length,y=e=>{i(n===e?null:e)};return(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("button",{onClick:()=>l(!s),className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 rounded-full shadow-md hover:shadow-lg transition-shadow",children:[r.jsx(c,{className:"w-5 h-5"}),r.jsx("span",{children:"Filters"}),b>0&&r.jsx("span",{className:"px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full",children:b})]}),b>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[[...e.department,...e.year,...e.interests].map(t=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-100 text-sm rounded-full",children:[t,r.jsx("button",{onClick:()=>{e.department.includes(t)?o("department",t):e.year.includes(t)?o("year",t):e.interests.includes(t)&&o("interests",t)},className:"hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full p-0.5",children:r.jsx(x.Z,{className:"w-3 h-3"})})]},t)),r.jsx("button",{onClick:d,className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Clear all"})]}),s&&(0,r.jsxs)("div",{className:"mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("button",{onClick:()=>y("department"),className:"flex items-center justify-between w-full text-left font-medium mb-2",children:[r.jsx("span",{children:"Department"}),"department"===n?r.jsx(p,{className:"w-5 h-5"}):r.jsx(u,{className:"w-5 h-5"})]}),"department"===n&&r.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(t=>r.jsx("button",{onClick:()=>o("department",t),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${e.department.includes(t)?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:t},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("button",{onClick:()=>y("year"),className:"flex items-center justify-between w-full text-left font-medium mb-2",children:[r.jsx("span",{children:"Year"}),"year"===n?r.jsx(p,{className:"w-5 h-5"}):r.jsx(u,{className:"w-5 h-5"})]}),"year"===n&&r.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(t=>r.jsx("button",{onClick:()=>o("year",t),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${e.year.includes(t)?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:t},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("button",{onClick:()=>y("interests"),className:"flex items-center justify-between w-full text-left font-medium mb-2",children:[r.jsx("span",{children:"Interests"}),"interests"===n?r.jsx(p,{className:"w-5 h-5"}):r.jsx(u,{className:"w-5 h-5"})]}),"interests"===n&&r.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(t=>r.jsx("button",{onClick:()=>o("interests",t),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${e.interests.includes(t)?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:t},t))})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-2 border-t dark:border-gray-700",children:[r.jsx("button",{onClick:d,className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Clear"}),r.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Apply"})]})]})]})}var y=s(9654),f=s(544);function j(){let e=(0,l.useRouter)(),[t,s]=(0,a.useState)([]),[n,d]=(0,a.useState)(0),[c,x]=(0,a.useState)(!0),[p,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1),[g,j]=(0,a.useState)({department:[],year:[],interests:[]}),[v,N]=(0,a.useState)(null),[w,k]=(0,a.useState)({x:0,y:0}),[C,D]=(0,a.useState)(null),[q,_]=(0,a.useState)(!1),[P,S]=(0,a.useState)(0),M=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!localStorage.getItem("accessToken")){e.push("/login");return}E()},[e,g]);let E=async()=>{try{x(!0);let e=await o.h.getDiscoverFeed(20,0,g.department,g.year,g.interests);s(e.users||[]),d(0),u("")}catch(e){u(e.response?.data?.error||"Failed to load profiles")}finally{x(!1)}},F=async()=>{try{let e=await o.h.getDiscoverFeed(20,t.length,g.department,g.year,g.interests);s([...t,...e.users||[]])}catch(e){console.error("Failed to load more profiles:",e)}},Y=async()=>{t[n]&&!h&&(m(!0),D("right"),setTimeout(async()=>{try{await o.h.likeUser(t[n].id),$()}catch(e){console.error("Like error:",e),u(e.response?.data?.error||"Failed to like user"),m(!1),D(null)}},300))},A=async()=>{t[n]&&!h&&(m(!0),D("left"),setTimeout(async()=>{try{await o.h.passUser(t[n].id),$()}catch(e){console.error("Pass error:",e),u(e.response?.data?.error||"Failed to pass user"),m(!1),D(null)}},300))},$=()=>{let e=n+1;d(e),m(!1),D(null),k({x:0,y:0}),e>=t.length-5&&F()},T=(e,t)=>{h||N({x:e,y:t})},I=(e,t)=>{v&&!h&&k({x:e-v.x,y:t-v.y})},z=()=>{v&&!h&&(Math.abs(w.x)>100?w.x>0?Y():A():k({x:0,y:0}),N(null))},R=e=>{S(e),_(!0)};if(c)return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50",children:[r.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)(i(),{href:"/dashboard",className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl",children:"\uD83D\uDC96"}),r.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"JECRC Dating"})]}),r.jsx(i(),{href:"/dashboard",className:"text-gray-700 hover:text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition",children:"← Back"})]})})}),(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4 py-12",children:[r.jsx("h1",{className:"text-3xl font-bold text-center mb-8 bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Discover"}),r.jsx(y.aO,{})]})]});let U=t[n],G=t[n+1],L=U?.profile?.photos?.map(e=>e.url)||[],O=e=>{let t=.05*w.x;return 0===e?{transform:`translate(${w.x}px, ${w.y}px) rotate(${t}deg) scale(1)`,transition:v?"none":"transform 0.3s ease-out",zIndex:20,opacity:C?0:1}:{transform:`translateY(${10*e}px) scale(${1-.05*e})`,transition:"transform 0.3s ease-out",zIndex:20-e,opacity:1-.3*e}},X=()=>C?1:Math.min(Math.abs(w.x)/100,1);return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50",children:[r.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)(i(),{href:"/dashboard",className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl",children:"\uD83D\uDC96"}),r.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"JECRC Dating"})]}),r.jsx(i(),{href:"/dashboard",className:"text-gray-700 hover:text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition",children:"← Back"})]})})}),(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4 py-12",children:[r.jsx("h1",{className:"text-3xl font-bold text-center mb-8 bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Discover"}),r.jsx(b,{filters:g,onFiltersChange:j}),p&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700",children:p}),0===t.length?(0,r.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-12 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDE0A"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No More Profiles"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Check back later for more people to discover!"}),r.jsx("button",{onClick:E,className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition",children:"Refresh"})]}):n>=t.length?(0,r.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-12 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"You've Seen Everyone!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Great job exploring! Check back later for new profiles."}),r.jsx("button",{onClick:()=>d(0),className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition",children:"Start Over"})]}):(0,r.jsxs)("div",{className:"relative h-[600px]",children:[G&&r.jsx("div",{className:"absolute inset-0 bg-white rounded-3xl shadow-2xl overflow-hidden",style:O(1),children:r.jsx("div",{className:"h-96 bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white text-8xl overflow-hidden",children:G?.profile?.photos?.[0]?.url?r.jsx("img",{src:G.profile.photos[0].url,alt:G.displayName,className:"w-full h-full object-cover"}):r.jsx("span",{children:G?.displayName?.[0]||"\uD83D\uDC64"})})}),(0,r.jsxs)("div",{ref:M,className:"absolute inset-0 bg-white rounded-3xl shadow-2xl overflow-hidden cursor-grab active:cursor-grabbing select-none",style:O(0),onMouseDown:e=>T(e.clientX,e.clientY),onMouseMove:e=>I(e.clientX,e.clientY),onMouseUp:z,onMouseLeave:z,onTouchStart:e=>T(e.touches[0].clientX,e.touches[0].clientY),onTouchMove:e=>I(e.touches[0].clientX,e.touches[0].clientY),onTouchEnd:z,children:[r.jsx("div",{className:"absolute top-8 right-8 z-10 px-6 py-3 border-4 border-red-500 text-red-500 font-bold text-2xl rounded-xl rotate-12 pointer-events-none",style:{opacity:w.x<0||"left"===C?X():0,transition:"opacity 0.2s"},children:"NOPE"}),r.jsx("div",{className:"absolute top-8 left-8 z-10 px-6 py-3 border-4 border-green-500 text-green-500 font-bold text-2xl rounded-xl -rotate-12 pointer-events-none",style:{opacity:w.x>0||"right"===C?X():0,transition:"opacity 0.2s"},children:"LIKE"}),r.jsx("div",{className:"h-96 bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white text-8xl overflow-hidden relative",children:L.length>0?(0,r.jsxs)(r.Fragment,{children:[r.jsx("img",{src:L[0],alt:U.displayName,className:"w-full h-full object-cover",onClick:()=>R(0)}),L.length>1&&r.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-1",children:L.map((e,t)=>r.jsx("div",{className:`w-2 h-2 rounded-full ${0===t?"bg-white":"bg-white/50"}`},t))})]}):r.jsx("span",{children:U?.displayName?.[0]||"\uD83D\uDC64"})}),(0,r.jsxs)("div",{className:"p-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:U?.displayName}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:[U?.profile?.department||"Department not set"," • Year ",U?.profile?.year||"N/A"]}),r.jsx("p",{className:"text-gray-700 mb-4",children:U?.profile?.bio||"No bio yet"}),U?.profile?.interests&&U.profile.interests.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Interests:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:U.profile.interests.map((e,t)=>r.jsx("span",{className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm",children:e},t))})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:A,disabled:h,className:"flex-1 bg-gray-100 text-gray-700 py-4 rounded-2xl font-semibold hover:bg-gray-200 transition text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:"✕ Pass"}),r.jsx("button",{onClick:Y,disabled:h,className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-600 text-white py-4 rounded-2xl font-semibold hover:shadow-xl transition text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:"❤️ Like"})]})]})]})]}),q&&L.length>0&&r.jsx(f.Z,{photos:L,initialIndex:P,onClose:()=>_(!1)})]})]})}},9007:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`/Users/yogesh/Downloads/jecrc_dating/frontend/src/app/discover/page.tsx`),{__esModule:a,$$typeof:l}=r,n=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[460,476,934,360,690],()=>s(1256));module.exports=r})();