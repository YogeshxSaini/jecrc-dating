(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{4926:function(e,t,s){Promise.resolve().then(s.bind(s,1925))},1925:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(7437),n=s(2265),l=s(4033),a=s(4337);let c=(0,n.createContext)(null),i=()=>{let e=(0,n.useContext)(c);if(!e)throw Error("useMessaging must be used within MessagingProvider");return e},o=e=>{let{children:t}=e,[s,l]=(0,n.useState)(null),[i,o]=(0,n.useState)("disconnected"),[d,u]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[x,f]=(0,n.useState)({}),g=(0,n.useRef)(),p=(0,n.useRef)(0),j=(0,n.useRef)(new Set),b=(0,n.useRef)(new Set),v=(0,n.useRef)(new Set),N=e=>Math.min(1e3*Math.pow(2,e),3e4),y=(0,n.useCallback)(()=>{let e=localStorage.getItem("accessToken");if(!e){console.log("No access token, skipping socket connection");return}let t="localhost"===window.location.hostname?"http://localhost:3001":"https://jecrc-dating-backend.onrender.com";console.log("Initializing socket connection to:",t),o("connecting");let s=(0,a.io)(t,{auth:{token:e},transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:3e4,reconnectionAttempts:1/0,timeout:6e4});return s.on("connect",()=>{console.log("Socket connected:",s.id),o("connected"),p.current=0,g.current&&clearTimeout(g.current)}),s.on("disconnect",e=>{console.log("Socket disconnected:",e),o("disconnected")}),s.on("connect_error",e=>{console.error("Socket connection error:",e),o("reconnecting"),p.current++;let t=N(p.current);console.log("Reconnecting in ".concat(t,"ms (attempt ").concat(p.current,")")),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{s.disconnected&&(console.log("Attempting reconnection..."),s.connect())},t)}),s.on("new_message",e=>{console.log("Received new message:",e),u(t=>[...t,e]),j.current.forEach(t=>t(e))}),s.on("message_read",e=>{console.log("Message read:",e),u(t=>t.map(t=>t.matchId!==e.matchId||t.readAt?t:{...t,readAt:e.readAt})),v.current.forEach(t=>t(e))}),s.on("user_typing",e=>{console.log("User typing:",e),h(t=>t.find(t=>t.matchId===e.matchId&&t.userId===e.userId)?t:[...t,e]),b.current.forEach(t=>t(e))}),s.on("user_stopped_typing",e=>{console.log("User stopped typing:",e),h(t=>t.filter(t=>!(t.matchId===e.matchId&&t.userId===e.userId)))}),s.on("user_online",e=>{console.log("User online:",e),f(t=>({...t,[e.userId]:!0}))}),s.on("user_offline",e=>{console.log("User offline:",e),f(t=>({...t,[e.userId]:!1}))}),l(s),()=>{console.log("Cleaning up socket connection"),g.current&&clearTimeout(g.current),s.close()}},[]);(0,n.useEffect)(()=>y(),[y]);let w=(0,n.useCallback)((e,t)=>{if(!s||!s.connected){console.error("Socket not connected, cannot send message");return}s.emit("send_message",{matchId:e,content:t},e=>{(null==e?void 0:e.error)?console.error("Error sending message:",e.error):console.log("Message sent successfully:",e)})},[s]),k=(0,n.useCallback)(e=>{if(!s||!s.connected){console.error("Socket not connected, cannot mark as read");return}s.emit("mark_as_read",{matchId:e})},[s]),I=(0,n.useCallback)(e=>{s&&s.connected&&s.emit("typing",{matchId:e})},[s]),D=(0,n.useCallback)(e=>{s&&s.connected&&s.emit("stop_typing",{matchId:e})},[s]),C=(0,n.useCallback)(e=>(j.current.add(e),()=>{j.current.delete(e)}),[]),S=(0,n.useCallback)(e=>(b.current.add(e),()=>{b.current.delete(e)}),[]),M=(0,n.useCallback)(e=>(v.current.add(e),()=>{v.current.delete(e)}),[]);return(0,r.jsx)(c.Provider,{value:{socket:s,connectionStatus:i,messages:d,typingUsers:m,onlineStatus:x,sendMessage:w,markAsRead:k,startTyping:I,stopTyping:D,addMessageListener:C,addTypingListener:S,addReadReceiptListener:M},children:t})},d=e=>{let{onSelectChat:t,selectedMatchId:s}=e,[l,a]=(0,n.useState)([]),[c,o]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),{connectionStatus:m,onlineStatus:h,addMessageListener:x}=i();(0,n.useEffect)(()=>{f()},[]),(0,n.useEffect)(()=>x(e=>{a(t=>t.map(t=>{if(t.matchId===e.matchId){var s;return{...t,lastMessage:{id:e.id,content:e.content,senderId:e.senderId,createdAt:e.createdAt,sender:{displayName:(null===(s=e.sender)||void 0===s?void 0:s.name)||"User"}},unreadCount:e.senderId!==t.user.id?t.unreadCount+1:t.unreadCount}}return t}))}),[x]);let f=async()=>{try{o(!0);let e=localStorage.getItem("accessToken"),t=await fetch("".concat("https://jecrc-dating-backend.onrender.com","/api/messages/matches"),{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();s.success?a(s.matches):u(s.error||"Failed to fetch matches")}catch(e){console.error("Error fetching matches:",e),u("Failed to load conversations")}finally{o(!1)}},g=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),r=Math.floor(s/6e4),n=Math.floor(s/36e5),l=Math.floor(s/864e5);return r<1?"Just now":r<60?"".concat(r,"m"):n<24?"".concat(n,"h"):l<7?"".concat(l,"d"):t.toLocaleDateString()},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.length<=t?e:e.substring(0,t)+"..."};return c?(0,r.jsxs)("div",{className:"flex flex-col h-full bg-white border-r",children:[(0,r.jsxs)("div",{className:"p-4 border-b",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Messages"}),(0,r.jsxs)("div",{className:"text-xs mt-1 text-gray-500",children:["connected"===m&&"\uD83D\uDFE2 Connected","connecting"===m&&"\uD83D\uDFE1 Connecting...","reconnecting"===m&&"\uD83D\uDFE0 Reconnecting...","disconnected"===m&&"\uD83D\uDD34 Disconnected"]})]}),(0,r.jsx)("div",{className:"flex items-center justify-center flex-1",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500"})})]}):d?(0,r.jsxs)("div",{className:"flex flex-col h-full bg-white border-r",children:[(0,r.jsx)("div",{className:"p-4 border-b",children:(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Messages"})}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1 p-4",children:[(0,r.jsx)("p",{className:"text-red-500 text-center",children:d}),(0,r.jsx)("button",{onClick:f,className:"mt-4 px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600",children:"Retry"})]})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full bg-white border-r",children:[(0,r.jsxs)("div",{className:"p-4 border-b",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Messages"}),(0,r.jsxs)("div",{className:"text-xs mt-1 text-gray-500",children:["connected"===m&&"\uD83D\uDFE2 Connected","connecting"===m&&"\uD83D\uDFE1 Connecting...","reconnecting"===m&&"\uD83D\uDFE0 Reconnecting...","disconnected"===m&&"\uD83D\uDD34 Disconnected"]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===l.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center",children:[(0,r.jsx)("p",{className:"text-gray-500",children:"No matches yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Start swiping to find your match!"})]}):l.map(e=>{let n=h[e.user.id]||!1,l=s===e.matchId;return(0,r.jsx)("div",{onClick:()=>t(e.matchId,e.user),className:"p-4 border-b cursor-pointer transition-colors ".concat(l?"bg-pink-50":"hover:bg-gray-50"),children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,r.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold text-xl overflow-hidden",children:e.user.profileImage?(0,r.jsx)("img",{src:e.user.profileImage,alt:e.user.displayName,className:"w-full h-full object-cover"}):e.user.displayName.charAt(0).toUpperCase()}),n&&(0,r.jsx)("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.user.displayName}),e.lastMessage&&(0,r.jsx)("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:g(e.lastMessage.createdAt)})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.user.department&&e.user.year&&(0,r.jsxs)("span",{children:[e.user.department," • Year ",e.user.year]})}),e.lastMessage?(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 truncate",children:p(e.lastMessage.content)}),e.unreadCount>0&&(0,r.jsx)("span",{className:"flex-shrink-0 ml-2 bg-pink-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:e.unreadCount>9?"9+":e.unreadCount})]}):(0,r.jsx)("p",{className:"text-sm text-gray-400 italic mt-1",children:"Start a conversation..."})]})]})},e.matchId)})})]})},u=e=>{let{onSendMessage:t,matchId:s}=e,[l,a]=(0,n.useState)(""),[c,o]=(0,n.useState)(!1),d=(0,n.useRef)(null),u=(0,n.useRef)(),{startTyping:m,stopTyping:h,connectionStatus:x}=i();(0,n.useEffect)(()=>{d.current&&(d.current.style.height="auto",d.current.style.height=d.current.scrollHeight+"px")},[l]);let f=e=>{e.preventDefault();let r=l.trim();r&&(c&&(o(!1),h(s)),u.current&&clearTimeout(u.current),t(r),a(""),d.current&&(d.current.style.height="auto"))},g="connected"!==x;return(0,r.jsxs)("div",{className:"bg-white border-t p-4",children:[(0,r.jsxs)("form",{onSubmit:f,className:"flex items-end gap-2",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)("textarea",{ref:d,value:l,onChange:e=>{a(e.target.value),e.target.value.trim()&&!c&&(o(!0),m(s)),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c&&(o(!1),h(s))},2e3)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f(e))},placeholder:g?"Connecting...":"Type a message...",disabled:g,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-full resize-none focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed max-h-32 overflow-y-auto",rows:1,style:{minHeight:"48px"}}),(0,r.jsx)("button",{type:"button",className:"absolute right-3 bottom-3 text-gray-400 hover:text-gray-600 transition-colors",disabled:g,children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,r.jsx)("button",{type:"submit",disabled:!l.trim()||g,className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-pink-500 to-purple-500 text-white rounded-full flex items-center justify-center hover:from-pink-600 hover:to-purple-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-pink-500 disabled:hover:to-purple-500",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),g&&(0,r.jsxs)("div",{className:"mt-2 text-xs text-center text-orange-500",children:["connecting"===x&&"Connecting to server...","reconnecting"===x&&"Reconnecting...","disconnected"===x&&"Disconnected. Messages will be sent when reconnected."]})]})},m=e=>{let{matchId:t,user:s,currentUserId:l}=e,[a,c]=(0,n.useState)([]),[o,d]=(0,n.useState)(!0),[m,h]=(0,n.useState)(null),[x,f]=(0,n.useState)(!1),g=(0,n.useRef)(null),p=(0,n.useRef)(null),{sendMessage:j,markAsRead:b,addMessageListener:v,addTypingListener:N,typingUsers:y,onlineStatus:w}=i();(0,n.useEffect)(()=>{k(),b(t)},[t]),(0,n.useEffect)(()=>v(e=>{e.matchId===t&&(c(t=>{var s,r,n,l,a;return t.find(t=>t.id===e.id)?t:[...t,{id:e.id,matchId:e.matchId,senderId:e.senderId,content:e.content,readAt:e.readAt,createdAt:e.createdAt,sender:{id:(null===(s=e.sender)||void 0===s?void 0:s.id)||e.senderId,displayName:(null===(r=e.sender)||void 0===r?void 0:r.displayName)||(null===(n=e.sender)||void 0===n?void 0:n.name)||"User",profileImage:null!==(a=null===(l=e.sender)||void 0===l?void 0:l.profileImage)&&void 0!==a?a:null}}]}),setTimeout(()=>b(t),100))}),[t,v,b]),(0,n.useEffect)(()=>{I()},[a]);let k=async()=>{try{d(!0),h(null);let e=localStorage.getItem("accessToken"),s=await fetch("".concat("https://jecrc-dating-backend.onrender.com","/api/messages/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}}),r=await s.json();if(r.success){let e=r.messages.map(e=>{var t;return{id:e.id,matchId:e.matchId,senderId:e.senderId,content:e.content,readAt:e.readAt,createdAt:e.createdAt,sender:{id:e.sender.id,displayName:e.sender.displayName,profileImage:null!==(t=e.sender.profileImage)&&void 0!==t?t:null}}});c(e),f(r.hasMore)}else h(r.error||"Failed to fetch messages")}catch(e){console.error("Error fetching messages:",e),h("Failed to load messages")}finally{d(!1)}},I=()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},D=e=>{let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/864e5);return 0===s?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):1===s?"Yesterday "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s<7?t.toLocaleDateString([],{weekday:"short"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},C=w[s.id]||!1,S=y.some(e=>e.matchId===t&&e.userId===s.id);return o?(0,r.jsxs)("div",{className:"flex flex-col h-full bg-gray-50",children:[(0,r.jsxs)("div",{className:"bg-white border-b p-4 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold overflow-hidden",children:s.profileImage?(0,r.jsx)("img",{src:s.profileImage,alt:s.displayName,className:"w-full h-full object-cover"}):s.displayName.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-900",children:s.displayName}),s.department&&s.year&&(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[s.department," • Year ",s.year]})]})]}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500"})})]}):m?(0,r.jsxs)("div",{className:"flex flex-col h-full bg-gray-50",children:[(0,r.jsxs)("div",{className:"bg-white border-b p-4 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold overflow-hidden",children:s.profileImage?(0,r.jsx)("img",{src:s.profileImage,alt:s.displayName,className:"w-full h-full object-cover"}):s.displayName.charAt(0).toUpperCase()})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("h2",{className:"font-semibold text-gray-900",children:s.displayName})})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[(0,r.jsx)("p",{className:"text-red-500 text-center",children:m}),(0,r.jsx)("button",{onClick:k,className:"mt-4 px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600",children:"Retry"})]})]}):(0,r.jsxs)("div",{className:"flex flex-col h-full bg-gray-50",children:[(0,r.jsxs)("div",{className:"bg-white border-b p-4 flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold overflow-hidden",children:s.profileImage?(0,r.jsx)("img",{src:s.profileImage,alt:s.displayName,className:"w-full h-full object-cover"}):s.displayName.charAt(0).toUpperCase()}),C&&(0,r.jsx)("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-900",children:s.displayName}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[C?(0,r.jsx)("span",{className:"text-green-600",children:"Online"}):(0,r.jsx)("span",{children:"Offline"}),s.department&&s.year&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:[s.department," • Year ",s.year]})]})]})]})]}),(0,r.jsx)("div",{ref:p,className:"flex-1 overflow-y-auto p-4 space-y-4",children:0===a.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-3xl mb-4",children:"\uD83D\uDCAC"}),(0,r.jsx)("p",{className:"text-gray-500 font-medium",children:"No messages yet"}),(0,r.jsxs)("p",{className:"text-sm text-gray-400 mt-2",children:["Say hi to ",s.displayName," to start the conversation!"]})]}):(0,r.jsxs)(r.Fragment,{children:[a.map((e,t)=>{let s=e.senderId===l,n=0===t||a[t-1].senderId!==e.senderId;return(0,r.jsxs)("div",{className:"flex ".concat(s?"justify-end":"justify-start"," gap-2"),children:[!s&&n&&(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-sm font-bold overflow-hidden flex-shrink-0",children:e.sender.profileImage?(0,r.jsx)("img",{src:e.sender.profileImage,alt:e.sender.displayName,className:"w-full h-full object-cover"}):e.sender.displayName.charAt(0).toUpperCase()}),!s&&!n&&(0,r.jsx)("div",{className:"w-8"}),(0,r.jsxs)("div",{className:"max-w-[70%] ".concat(s?"items-end":"items-start"),children:[(0,r.jsx)("div",{className:"rounded-2xl px-4 py-2 ".concat(s?"bg-gradient-to-br from-pink-500 to-purple-500 text-white":"bg-white text-gray-900"),children:(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.content})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1 px-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:D(e.createdAt)}),s&&e.readAt&&(0,r.jsx)("span",{className:"text-xs text-blue-500",children:"✓✓"})]})]})]},e.id)}),S&&(0,r.jsxs)("div",{className:"flex justify-start gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-sm font-bold overflow-hidden flex-shrink-0",children:s.profileImage?(0,r.jsx)("img",{src:s.profileImage,alt:s.displayName,className:"w-full h-full object-cover"}):s.displayName.charAt(0).toUpperCase()}),(0,r.jsx)("div",{className:"bg-white rounded-2xl px-4 py-2",children:(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,r.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),(0,r.jsx)("div",{ref:g})]})}),(0,r.jsx)(u,{onSendMessage:e=>{j(t,e)},matchId:t})]})},h=()=>{let[e,t]=(0,n.useState)(null),[s,a]=(0,n.useState)(null),[c,i]=(0,n.useState)(null),o=(0,l.useRouter)();return(0,n.useEffect)(()=>{let e=localStorage.getItem("accessToken");if(!e){o.push("/login");return}try{let t=JSON.parse(atob(e.split(".")[1]));i(t.id)}catch(e){console.error("Error decoding token:",e)}},[o]),(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,r.jsx)("div",{className:"w-full md:w-96 flex-shrink-0",children:(0,r.jsx)(d,{onSelectChat:(e,s)=>{t(e),a(s)},selectedMatchId:e})}),(0,r.jsx)("div",{className:"flex-1 hidden md:flex",children:e&&s?(0,r.jsx)(m,{matchId:e,user:s,currentUserId:c||void 0}):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center w-full bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center max-w-md px-4",children:[(0,r.jsx)("div",{className:"w-32 h-32 mx-auto mb-6 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-6xl",children:"\uD83D\uDCAC"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select a conversation"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Choose a match from the list to start chatting"})]})})}),e&&s&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50 bg-white md:hidden",children:[(0,r.jsxs)("div",{className:"flex items-center p-4 border-b bg-white",children:[(0,r.jsx)("button",{onClick:()=>{t(null),a(null)},className:"mr-3 text-gray-600 hover:text-gray-900",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("h1",{className:"text-lg font-semibold",children:"Back to conversations"})]}),(0,r.jsx)("div",{className:"h-[calc(100vh-64px)]",children:(0,r.jsx)(m,{matchId:e,user:s,currentUserId:c||void 0})})]})]})};function x(){return(0,r.jsx)(o,{children:(0,r.jsx)(h,{})})}}},function(e){e.O(0,[532,971,458,744],function(){return e(e.s=4926)}),_N_E=e.O()}]);