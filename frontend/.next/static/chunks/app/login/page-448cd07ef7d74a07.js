(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{1617:function(e,r,t){Promise.resolve().then(t.bind(t,378))},378:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var a=t(7437),s=t(2265),n=t(1396),l=t.n(n),o=t(4033),i=t(8222);function d(){let e=(0,o.useRouter)(),r=(0,o.useSearchParams)(),[t,n]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[u,p]=(0,s.useState)(!1),[x,m]=(0,s.useState)(""),[g,f]=(0,s.useState)(!1),[h,b]=(0,s.useState)(!1),[y,v]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=r.get("error");e&&v(decodeURIComponent(e))},[r]);let j=async e=>{e.preventDefault(),b(!0),v("");try{await i.h.requestVerification(t,!0),f(!0),alert("OTP sent to your email! Check backend logs for the code.")}catch(e){var r,a;v((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to send OTP")}finally{b(!1)}},N=async r=>{r.preventDefault(),b(!0),v("");try{let r=await i.h.verifyOTP(t,x);localStorage.setItem("user",JSON.stringify(r.user)),e.push("/dashboard")}catch(e){var a,s;v((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Invalid OTP")}finally{b(!1)}},w=async r=>{r.preventDefault(),b(!0),v("");try{let r=await i.h.login(t,d);localStorage.setItem("user",JSON.stringify(r.user)),e.push("/dashboard")}catch(e){var a,s;v((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Invalid credentials")}finally{b(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full z-10",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)(l(),{href:"/",className:"inline-flex items-center space-x-2 text-3xl font-bold mb-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDC96"}),(0,a.jsx)("span",{className:"bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"JECRC Dating"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Welcome back! Log in to continue."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,a.jsx)("button",{onClick:()=>p(!1),className:"flex-1 py-2 px-4 rounded-lg transition ".concat(u?"text-gray-600 hover:bg-gray-100":"bg-purple-100 text-purple-700 font-semibold"),children:"Password"}),(0,a.jsx)("button",{onClick:()=>p(!0),className:"flex-1 py-2 px-4 rounded-lg transition ".concat(u?"bg-purple-100 text-purple-700 font-semibold":"text-gray-600 hover:bg-gray-100"),children:"OTP Login"})]}),y&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:y}),u?g?(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter OTP"}),(0,a.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"123456",maxLength:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-center text-2xl tracking-widest text-gray-900 placeholder:text-gray-400",required:!0}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Check backend logs for OTP code (console email provider)"})]}),(0,a.jsx)("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition disabled:opacity-50",children:h?"Verifying...":"Login"}),(0,a.jsx)("button",{type:"button",onClick:()=>f(!1),className:"w-full text-purple-600 hover:underline text-sm",children:"Resend OTP"})]}):(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"JECRC Email"}),(0,a.jsx)("input",{type:"email",value:t,onChange:e=>n(e.target.value),placeholder:"yourname@jecrcu.edu.in",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 placeholder:text-gray-400",required:!0})]}),(0,a.jsx)("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition disabled:opacity-50",children:h?"Sending...":"Send OTP"})]}):(0,a.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"JECRC Email"}),(0,a.jsx)("input",{type:"email",value:t,onChange:e=>n(e.target.value),placeholder:"yourname@jecrcu.edu.in",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 placeholder:text-gray-400",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,a.jsx)("input",{type:"password",value:d,onChange:e=>c(e.target.value),placeholder:"••••••••",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 placeholder:text-gray-400",required:!0})]}),(0,a.jsx)("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition disabled:opacity-50",children:h?"Logging in...":"Login"})]}),(0,a.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)(l(),{href:"/signup",className:"text-purple-600 hover:underline font-semibold",children:"Sign up"})]})]}),(0,a.jsxs)("p",{className:"text-center text-xs text-gray-500 mt-6",children:["By logging in, you agree to our"," ",(0,a.jsx)(l(),{href:"/terms",className:"underline hover:text-gray-700",children:"Terms of Service"})," ","and"," ",(0,a.jsx)(l(),{href:"/privacy",className:"underline hover:text-gray-700",children:"Privacy Policy"})]})]})})}},622:function(e,r,t){"use strict";var a=t(2265),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var a,n={},d=null,c=null;for(a in void 0!==t&&(d=""+t),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(c=r.ref),r)l.call(r,a)&&!i.hasOwnProperty(a)&&(n[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps)void 0===n[a]&&(n[a]=r[a]);return{$$typeof:s,type:e,key:d,ref:c,props:n,_owner:o.current}}r.Fragment=n,r.jsx=d,r.jsxs=d},7437:function(e,r,t){"use strict";e.exports=t(622)},1396:function(e,r,t){e.exports=t(5250)},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[829,250,222,971,458,744],function(){return e(e.s=1617)}),_N_E=e.O()}]);