"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/messages/page",{

/***/ "(app-pages-browser)/./src/components/messaging/ChatWindow.tsx":
/*!*************************************************!*\
  !*** ./src/components/messaging/ChatWindow.tsx ***!
  \*************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatWindow: function() { return /* binding */ ChatWindow; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/MessagingContext */ \"(app-pages-browser)/./src/contexts/MessagingContext.tsx\");\n/* harmony import */ var _MessageInput__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MessageInput */ \"(app-pages-browser)/./src/components/messaging/MessageInput.tsx\");\n/* __next_internal_client_entry_do_not_use__ ChatWindow auto */ \nvar _s = $RefreshSig$();\n\n\n\nconst ChatWindow = (param)=>{\n    let { matchId, user, currentUserId } = param;\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasMore, setHasMore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { sendMessage, markAsDelivered, markAsRead, addMessageListener, addTypingListener, typingUsers, onlineStatus } = (0,_contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_2__.useMessaging)();\n    // Fetch initial messages\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        fetchMessages();\n        markAsDelivered(matchId);\n        markAsRead(matchId);\n    }, [\n        matchId\n    ]);\n    // Listen for new messages\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const unsubscribe = addMessageListener((message)=>{\n            if (message.matchId === matchId) {\n                setMessages((prev)=>{\n                    var _message_sender, _message_sender1, _message_sender2, _message_sender3;\n                    // Avoid duplicates\n                    if (prev.find((m)=>m.id === message.id)) return prev;\n                    var _message_sender_profileImage;\n                    // Use the user prop for the other user's profile image\n                    const senderProfileImage = message.senderId === user.id ? user.profileImage : (_message_sender_profileImage = (_message_sender = message.sender) === null || _message_sender === void 0 ? void 0 : _message_sender.profileImage) !== null && _message_sender_profileImage !== void 0 ? _message_sender_profileImage : null;\n                    return [\n                        ...prev,\n                        {\n                            id: message.id,\n                            matchId: message.matchId,\n                            senderId: message.senderId,\n                            content: message.content,\n                            deliveredAt: message.deliveredAt,\n                            readAt: message.readAt,\n                            createdAt: message.createdAt,\n                            sender: {\n                                id: ((_message_sender1 = message.sender) === null || _message_sender1 === void 0 ? void 0 : _message_sender1.id) || message.senderId,\n                                displayName: ((_message_sender2 = message.sender) === null || _message_sender2 === void 0 ? void 0 : _message_sender2.displayName) || ((_message_sender3 = message.sender) === null || _message_sender3 === void 0 ? void 0 : _message_sender3.name) || user.displayName,\n                                profileImage: senderProfileImage\n                            }\n                        }\n                    ];\n                });\n                // Only mark as read if message is from the other user (not from current user)\n                if (message.senderId === user.id) {\n                    setTimeout(()=>markAsRead(matchId), 100);\n                }\n            }\n        });\n        return unsubscribe;\n    }, [\n        matchId,\n        addMessageListener,\n        markAsRead,\n        user,\n        currentUserId\n    ]);\n    const fetchMessages = async ()=>{\n        try {\n            setLoading(true);\n            setError(null);\n            const token = localStorage.getItem(\"accessToken\");\n            const isLocalHost =  true && [\n                \"localhost\",\n                \"127.0.0.1\",\n                \"[::1]\",\n                \"0.0.0.0\"\n            ].includes(window.location.hostname);\n            const apiBase = isLocalHost ? \"http://localhost:4000\" : \"http://localhost:4000\" || 0;\n            const authHeader = (token === null || token === void 0 ? void 0 : token.startsWith(\"Bearer \")) ? token : \"Bearer \".concat(token);\n            const response = await fetch(\"\".concat(apiBase, \"/api/messages/\").concat(matchId), {\n                headers: {\n                    Authorization: authHeader\n                }\n            });\n            const data = await response.json();\n            if (data.success) {\n                const mapped = data.messages.map((m)=>{\n                    var _m_sender_profileImage;\n                    return {\n                        id: m.id,\n                        matchId: m.matchId,\n                        senderId: m.senderId,\n                        content: m.content,\n                        deliveredAt: m.deliveredAt,\n                        readAt: m.readAt,\n                        createdAt: m.createdAt,\n                        sender: {\n                            id: m.sender.id,\n                            displayName: m.sender.displayName,\n                            profileImage: (_m_sender_profileImage = m.sender.profileImage) !== null && _m_sender_profileImage !== void 0 ? _m_sender_profileImage : null\n                        }\n                    };\n                });\n                setMessages(mapped);\n                setHasMore(data.hasMore);\n            } else {\n                setError(data.error || \"Failed to fetch messages\");\n            }\n        } catch (err) {\n            console.error(\"Error fetching messages:\", err);\n            setError(\"Failed to load messages\");\n        } finally{\n            setLoading(false);\n        }\n    };\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    const handleSendMessage = (content)=>{\n        sendMessage(matchId, content);\n    };\n    const formatMessageTime = (timestamp)=>{\n        const date = new Date(timestamp);\n        const now = new Date();\n        const diffDays = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60 * 24));\n        if (diffDays === 0) {\n            return date.toLocaleTimeString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\"\n            });\n        } else if (diffDays === 1) {\n            return \"Yesterday \" + date.toLocaleTimeString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\"\n            });\n        } else if (diffDays < 7) {\n            return date.toLocaleDateString([], {\n                weekday: \"short\"\n            }) + \" \" + date.toLocaleTimeString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\"\n            });\n        } else {\n            return date.toLocaleDateString([], {\n                month: \"short\",\n                day: \"numeric\"\n            }) + \" \" + date.toLocaleTimeString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\"\n            });\n        }\n    };\n    const isOnline = onlineStatus[user.id] || false;\n    const isTyping = typingUsers.some((t)=>t.matchId === matchId && t.userId === user.id);\n    // Scroll to bottom on new messages or typing indicator\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        scrollToBottom();\n    }, [\n        messages,\n        isTyping\n    ]);\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full w-full bg-gray-50\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white border-b p-4 flex items-center gap-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold overflow-hidden\",\n                                children: user.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: user.profileImage,\n                                    alt: user.displayName,\n                                    className: \"w-full h-full object-cover\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 201,\n                                    columnNumber: 17\n                                }, undefined) : user.displayName.charAt(0).toUpperCase()\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 199,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 198,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                    className: \"font-semibold text-gray-900\",\n                                    children: user.displayName\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 208,\n                                    columnNumber: 13\n                                }, undefined),\n                                user.department && user.year && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-sm text-gray-500\",\n                                    children: [\n                                        user.department,\n                                        \" • Year \",\n                                        user.year\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 210,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 207,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 197,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 flex items-center justify-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                        lineNumber: 219,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 218,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n            lineNumber: 195,\n            columnNumber: 7\n        }, undefined);\n    }\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full w-full bg-gray-50\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white border-b p-4 flex items-center gap-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold overflow-hidden\",\n                                children: user.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: user.profileImage,\n                                    alt: user.displayName,\n                                    className: \"w-full h-full object-cover\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 233,\n                                    columnNumber: 17\n                                }, undefined) : user.displayName.charAt(0).toUpperCase()\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 231,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 230,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"font-semibold text-gray-900\",\n                                children: user.displayName\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 240,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 239,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 229,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 flex flex-col items-center justify-center p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-red-500 text-center\",\n                            children: error\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 246,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: fetchMessages,\n                            className: \"mt-4 px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600\",\n                            children: \"Retry\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 247,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 245,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n            lineNumber: 227,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-full w-full bg-gray-50\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white border-b p-4 flex items-center gap-3\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"relative\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white font-bold overflow-hidden\",\n                                children: user.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: user.profileImage,\n                                    alt: user.displayName,\n                                    className: \"w-full h-full object-cover\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 265,\n                                    columnNumber: 15\n                                }, undefined) : user.displayName.charAt(0).toUpperCase()\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 263,\n                                columnNumber: 11\n                            }, undefined),\n                            isOnline && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full\"\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 271,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                        lineNumber: 262,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"font-semibold text-gray-900\",\n                                children: user.displayName\n                            }, void 0, false, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 275,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-2 text-sm text-gray-500\",\n                                children: [\n                                    isOnline ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-green-600\",\n                                        children: \"Online\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 278,\n                                        columnNumber: 15\n                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"Offline\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 280,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    user.department && user.year && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                children: \"•\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 284,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                children: [\n                                                    user.department,\n                                                    \" • Year \",\n                                                    user.year\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 285,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 276,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                        lineNumber: 274,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                lineNumber: 261,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: messagesContainerRef,\n                className: \"flex-1 overflow-y-auto p-4 space-y-1\",\n                children: messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col items-center justify-center h-full text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-20 h-20 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-3xl mb-4\",\n                            children: \"\\uD83D\\uDCAC\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 299,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-500 font-medium\",\n                            children: \"No messages yet\"\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 302,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-gray-400 mt-2\",\n                            children: [\n                                \"Say hi to \",\n                                user.displayName,\n                                \" to start the conversation!\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 303,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                    lineNumber: 298,\n                    columnNumber: 11\n                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        messages.map((message, index)=>{\n                            const isOwnMessage = message.senderId === currentUserId;\n                            const showAvatar = index === 0 || messages[index - 1].senderId !== message.senderId;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex \".concat(isOwnMessage ? \"justify-end\" : \"justify-start\", \" gap-2 \").concat(showAvatar ? \"mt-3\" : \"mt-0.5\"),\n                                children: [\n                                    !isOwnMessage && showAvatar && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-8 h-8 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-sm font-bold overflow-hidden flex-shrink-0\",\n                                        children: message.sender.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: message.sender.profileImage,\n                                            alt: message.sender.displayName,\n                                            className: \"w-full h-full object-cover\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                            lineNumber: 322,\n                                            columnNumber: 25\n                                        }, undefined) : message.sender.displayName.charAt(0).toUpperCase()\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 320,\n                                        columnNumber: 21\n                                    }, undefined),\n                                    !isOwnMessage && !showAvatar && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-8\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 332,\n                                        columnNumber: 52\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"max-w-[70%] \".concat(isOwnMessage ? \"items-end\" : \"items-start\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"rounded-2xl px-4 py-2 \".concat(isOwnMessage ? \"bg-gradient-to-br from-pink-500 to-purple-500 text-white\" : \"bg-white text-gray-900\"),\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm whitespace-pre-wrap break-words\",\n                                                    children: message.content\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                    lineNumber: 341,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 335,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2 mt-1 px-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-gray-500\",\n                                                        children: formatMessageTime(message.createdAt)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                        lineNumber: 346,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    isOwnMessage && message.readAt && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-blue-500\",\n                                                        children: \"✓✓\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                        lineNumber: 350,\n                                                        columnNumber: 25\n                                                    }, undefined)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 345,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 334,\n                                        columnNumber: 19\n                                    }, undefined)\n                                ]\n                            }, message.id, true, {\n                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                lineNumber: 315,\n                                columnNumber: 17\n                            }, undefined);\n                        }),\n                        isTyping && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-start gap-2 mt-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-8 h-8 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-sm font-bold overflow-hidden flex-shrink-0\",\n                                    children: user.profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: user.profileImage,\n                                        alt: user.displayName,\n                                        className: \"w-full h-full object-cover\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 363,\n                                        columnNumber: 21\n                                    }, undefined) : user.displayName.charAt(0).toUpperCase()\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 361,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"bg-white rounded-2xl px-4 py-2\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex gap-1\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 370,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                style: {\n                                                    animationDelay: \"0.1s\"\n                                                }\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 371,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                style: {\n                                                    animationDelay: \"0.2s\"\n                                                }\n                                            }, void 0, false, {\n                                                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                                lineNumber: 372,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                        lineNumber: 369,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                                    lineNumber: 368,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 360,\n                            columnNumber: 15\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            ref: messagesEndRef\n                        }, void 0, false, {\n                            fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                            lineNumber: 378,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true)\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                lineNumber: 293,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MessageInput__WEBPACK_IMPORTED_MODULE_3__.MessageInput, {\n                onSendMessage: handleSendMessage,\n                matchId: matchId\n            }, void 0, false, {\n                fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n                lineNumber: 384,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/yogesh/Downloads/jecrc_dating/frontend/src/components/messaging/ChatWindow.tsx\",\n        lineNumber: 259,\n        columnNumber: 5\n    }, undefined);\n};\n_s(ChatWindow, \"Oooc5kDUgZDK+i9RhN4nc9v8IDs=\", false, function() {\n    return [\n        _contexts_MessagingContext__WEBPACK_IMPORTED_MODULE_2__.useMessaging\n    ];\n});\n_c = ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL21lc3NhZ2luZy9DaGF0V2luZG93LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUUyRDtBQUNBO0FBQ2I7QUFnQ3ZDLE1BQU1NLGFBQXdDO1FBQUMsRUFBRUMsT0FBTyxFQUFFQyxJQUFJLEVBQUVDLGFBQWEsRUFBRTs7SUFDcEYsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdULCtDQUFRQSxDQUFnQixFQUFFO0lBQzFELE1BQU0sQ0FBQ1UsU0FBU0MsV0FBVyxHQUFHWCwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUNZLE9BQU9DLFNBQVMsR0FBR2IsK0NBQVFBLENBQWdCO0lBQ2xELE1BQU0sQ0FBQ2MsU0FBU0MsV0FBVyxHQUFHZiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNZ0IsaUJBQWlCZiw2Q0FBTUEsQ0FBaUI7SUFDOUMsTUFBTWdCLHVCQUF1QmhCLDZDQUFNQSxDQUFpQjtJQUVwRCxNQUFNLEVBQ0ppQixXQUFXLEVBQ1hDLGVBQWUsRUFDZkMsVUFBVSxFQUNWQyxrQkFBa0IsRUFDbEJDLGlCQUFpQixFQUNqQkMsV0FBVyxFQUNYQyxZQUFZLEVBQ2IsR0FBR3RCLHdFQUFZQTtJQUVoQix5QkFBeUI7SUFDekJILGdEQUFTQSxDQUFDO1FBQ1IwQjtRQUNBTixnQkFBZ0JkO1FBQ2hCZSxXQUFXZjtJQUNiLEdBQUc7UUFBQ0E7S0FBUTtJQUVaLDBCQUEwQjtJQUMxQk4sZ0RBQVNBLENBQUM7UUFDUixNQUFNMkIsY0FBY0wsbUJBQW1CLENBQUNNO1lBQ3RDLElBQUlBLFFBQVF0QixPQUFPLEtBQUtBLFNBQVM7Z0JBQy9CSSxZQUFZLENBQUNtQjt3QkFPUEQsaUJBYU1BLGtCQUNTLGtCQUF3QztvQkFwQjNELG1CQUFtQjtvQkFDbkIsSUFBSUMsS0FBS0MsSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLEVBQUUsS0FBS0osUUFBUUksRUFBRSxHQUFHLE9BQU9IO3dCQUs5Q0Q7b0JBSEos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Q2IsdURBQVlBO2dCQUFDZ0gsZUFBZTNDO2dCQUFtQm5FLFNBQVNBOzs7Ozs7Ozs7Ozs7QUFHL0QsRUFBRTtHQTlWV0Q7O1FBZ0JQRixvRUFBWUE7OztLQWhCTEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnaW5nL0NoYXRXaW5kb3cudHN4PzU2ZjciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlTWVzc2FnaW5nIH0gZnJvbSAnQC9jb250ZXh0cy9NZXNzYWdpbmdDb250ZXh0JztcbmltcG9ydCB7IE1lc3NhZ2VJbnB1dCB9IGZyb20gJy4vTWVzc2FnZUlucHV0JztcbmltcG9ydCB7IE1lc3NhZ2VTdGF0dXMgfSBmcm9tICcuL01lc3NhZ2VTdGF0dXMnO1xuXG5pbnRlcmZhY2UgQ2hhdE1lc3NhZ2Uge1xuICBpZDogc3RyaW5nO1xuICBtYXRjaElkOiBzdHJpbmc7XG4gIHNlbmRlcklkOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgZGVsaXZlcmVkQXQ6IHN0cmluZyB8IG51bGw7XG4gIHJlYWRBdDogc3RyaW5nIHwgbnVsbDtcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gIHNlbmRlcjoge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgICBwcm9maWxlSW1hZ2U6IHN0cmluZyB8IG51bGw7XG4gIH07XG59XG5cbmludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgZGVwYXJ0bWVudDogc3RyaW5nIHwgbnVsbDtcbiAgeWVhcjogbnVtYmVyIHwgbnVsbDtcbiAgcHJvZmlsZUltYWdlOiBzdHJpbmcgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgQ2hhdFdpbmRvd1Byb3BzIHtcbiAgbWF0Y2hJZDogc3RyaW5nO1xuICB1c2VyOiBVc2VyO1xuICBjdXJyZW50VXNlcklkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgQ2hhdFdpbmRvdzogUmVhY3QuRkM8Q2hhdFdpbmRvd1Byb3BzPiA9ICh7IG1hdGNoSWQsIHVzZXIsIGN1cnJlbnRVc2VySWQgfSkgPT4ge1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPENoYXRNZXNzYWdlW10+KFtdKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtoYXNNb3JlLCBzZXRIYXNNb3JlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBtZXNzYWdlc0NvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG5cbiAgY29uc3Qge1xuICAgIHNlbmRNZXNzYWdlLFxuICAgIG1hcmtBc0RlbGl2ZXJlZCxcbiAgICBtYXJrQXNSZWFkLFxuICAgIGFkZE1lc3NhZ2VMaXN0ZW5lcixcbiAgICBhZGRUeXBpbmdMaXN0ZW5lcixcbiAgICB0eXBpbmdVc2VycyxcbiAgICBvbmxpbmVTdGF0dXNcbiAgfSA9IHVzZU1lc3NhZ2luZygpO1xuXG4gIC8vIEZldGNoIGluaXRpYWwgbWVzc2FnZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaE1lc3NhZ2VzKCk7XG4gICAgbWFya0FzRGVsaXZlcmVkKG1hdGNoSWQpO1xuICAgIG1hcmtBc1JlYWQobWF0Y2hJZCk7XG4gIH0sIFttYXRjaElkXSk7XG5cbiAgLy8gTGlzdGVuIGZvciBuZXcgbWVzc2FnZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IGFkZE1lc3NhZ2VMaXN0ZW5lcigobWVzc2FnZSkgPT4ge1xuICAgICAgaWYgKG1lc3NhZ2UubWF0Y2hJZCA9PT0gbWF0Y2hJZCkge1xuICAgICAgICBzZXRNZXNzYWdlcygocHJldik6IENoYXRNZXNzYWdlW10gPT4ge1xuICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgICBpZiAocHJldi5maW5kKChtKSA9PiBtLmlkID09PSBtZXNzYWdlLmlkKSkgcmV0dXJuIHByZXY7XG5cbiAgICAgICAgICAvLyBVc2UgdGhlIHVzZXIgcHJvcCBmb3IgdGhlIG90aGVyIHVzZXIncyBwcm9maWxlIGltYWdlXG4gICAgICAgICAgY29uc3Qgc2VuZGVyUHJvZmlsZUltYWdlID0gbWVzc2FnZS5zZW5kZXJJZCA9PT0gdXNlci5pZFxuICAgICAgICAgICAgPyB1c2VyLnByb2ZpbGVJbWFnZVxuICAgICAgICAgICAgOiBtZXNzYWdlLnNlbmRlcj8ucHJvZmlsZUltYWdlID8/IG51bGw7XG5cbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6IG1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgIG1hdGNoSWQ6IG1lc3NhZ2UubWF0Y2hJZCxcbiAgICAgICAgICAgICAgc2VuZGVySWQ6IG1lc3NhZ2Uuc2VuZGVySWQsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICAgICAgZGVsaXZlcmVkQXQ6IG1lc3NhZ2UuZGVsaXZlcmVkQXQsXG4gICAgICAgICAgICAgIHJlYWRBdDogbWVzc2FnZS5yZWFkQXQsXG4gICAgICAgICAgICAgIGNyZWF0ZWRBdDogbWVzc2FnZS5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgIHNlbmRlcjoge1xuICAgICAgICAgICAgICAgIGlkOiBtZXNzYWdlLnNlbmRlcj8uaWQgfHwgbWVzc2FnZS5zZW5kZXJJZCxcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogKG1lc3NhZ2UgYXMgYW55KS5zZW5kZXI/LmRpc3BsYXlOYW1lIHx8IChtZXNzYWdlIGFzIGFueSkuc2VuZGVyPy5uYW1lIHx8IHVzZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgcHJvZmlsZUltYWdlOiBzZW5kZXJQcm9maWxlSW1hZ2UsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE9ubHkgbWFyayBhcyByZWFkIGlmIG1lc3NhZ2UgaXMgZnJvbSB0aGUgb3RoZXIgdXNlciAobm90IGZyb20gY3VycmVudCB1c2VyKVxuICAgICAgICBpZiAobWVzc2FnZS5zZW5kZXJJZCA9PT0gdXNlci5pZCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gbWFya0FzUmVhZChtYXRjaElkKSwgMTAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICB9LCBbbWF0Y2hJZCwgYWRkTWVzc2FnZUxpc3RlbmVyLCBtYXJrQXNSZWFkLCB1c2VyLCBjdXJyZW50VXNlcklkXSk7XG5cbiAgY29uc3QgZmV0Y2hNZXNzYWdlcyA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpO1xuICAgICAgY29uc3QgaXNMb2NhbEhvc3QgPSAoXG4gICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIFsnbG9jYWxob3N0JywgJzEyNy4wLjAuMScsICdbOjoxXScsICcwLjAuMC4wJ10uaW5jbHVkZXMod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGFwaUJhc2UgPSBpc0xvY2FsSG9zdFxuICAgICAgICA/ICdodHRwOi8vbG9jYWxob3N0OjQwMDAnXG4gICAgICAgIDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnaHR0cHM6Ly9qZWNyYy1kYXRpbmctYmFja2VuZC5vbnJlbmRlci5jb20nO1xuICAgICAgY29uc3QgYXV0aEhlYWRlciA9IHRva2VuPy5zdGFydHNXaXRoKCdCZWFyZXIgJylcbiAgICAgICAgPyB0b2tlblxuICAgICAgICA6IGBCZWFyZXIgJHt0b2tlbn1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlfS9hcGkvbWVzc2FnZXMvJHttYXRjaElkfWAsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGF1dGhIZWFkZXIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xuICAgICAgICBjb25zdCBtYXBwZWQ6IENoYXRNZXNzYWdlW10gPSBkYXRhLm1lc3NhZ2VzLm1hcCgobTogYW55KSA9PiAoe1xuICAgICAgICAgIGlkOiBtLmlkLFxuICAgICAgICAgIG1hdGNoSWQ6IG0ubWF0Y2hJZCxcbiAgICAgICAgICBzZW5kZXJJZDogbS5zZW5kZXJJZCxcbiAgICAgICAgICBjb250ZW50OiBtLmNvbnRlbnQsXG4gICAgICAgICAgZGVsaXZlcmVkQXQ6IG0uZGVsaXZlcmVkQXQsXG4gICAgICAgICAgcmVhZEF0OiBtLnJlYWRBdCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG0uY3JlYXRlZEF0LFxuICAgICAgICAgIHNlbmRlcjoge1xuICAgICAgICAgICAgaWQ6IG0uc2VuZGVyLmlkLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IG0uc2VuZGVyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcHJvZmlsZUltYWdlOiBtLnNlbmRlci5wcm9maWxlSW1hZ2UgPz8gbnVsbCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSk7XG5cbiAgICAgICAgc2V0TWVzc2FnZXMobWFwcGVkKTtcbiAgICAgICAgc2V0SGFzTW9yZShkYXRhLmhhc01vcmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RXJyb3IoZGF0YS5lcnJvciB8fCAnRmFpbGVkIHRvIGZldGNoIG1lc3NhZ2VzJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBtZXNzYWdlczonLCBlcnIpO1xuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBsb2FkIG1lc3NhZ2VzJyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzY3JvbGxUb0JvdHRvbSA9ICgpID0+IHtcbiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTZW5kTWVzc2FnZSA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICBzZW5kTWVzc2FnZShtYXRjaElkLCBjb250ZW50KTtcbiAgfTtcblxuICBjb25zdCBmb3JtYXRNZXNzYWdlVGltZSA9ICh0aW1lc3RhbXA6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKFxuICAgICAgKG5vdy5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNClcbiAgICApO1xuXG4gICAgaWYgKGRpZmZEYXlzID09PSAwKSB7XG4gICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTtcbiAgICB9IGVsc2UgaWYgKGRpZmZEYXlzID09PSAxKSB7XG4gICAgICByZXR1cm4gJ1llc3RlcmRheSAnICsgZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTtcbiAgICB9IGVsc2UgaWYgKGRpZmZEYXlzIDwgNykge1xuICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKFtdLCB7IHdlZWtkYXk6ICdzaG9ydCcgfSkgKyAnICcgK1xuICAgICAgICBkYXRlLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoW10sIHsgbW9udGg6ICdzaG9ydCcsIGRheTogJ251bWVyaWMnIH0pICsgJyAnICtcbiAgICAgICAgZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaXNPbmxpbmUgPSBvbmxpbmVTdGF0dXNbdXNlci5pZF0gfHwgZmFsc2U7XG4gIGNvbnN0IGlzVHlwaW5nID0gdHlwaW5nVXNlcnMuc29tZSgodCkgPT4gdC5tYXRjaElkID09PSBtYXRjaElkICYmIHQudXNlcklkID09PSB1c2VyLmlkKTtcblxuICAvLyBTY3JvbGwgdG8gYm90dG9tIG9uIG5ldyBtZXNzYWdlcyBvciB0eXBpbmcgaW5kaWNhdG9yXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfSwgW21lc3NhZ2VzLCBpc1R5cGluZ10pO1xuXG4gIGlmIChsb2FkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwgdy1mdWxsIGJnLWdyYXktNTBcIj5cbiAgICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXItYiBwLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTIgaC0xMiByb3VuZGVkLWZ1bGwgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1waW5rLTQwMCB0by1wdXJwbGUtNTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgZm9udC1ib2xkIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICB7dXNlci5wcm9maWxlSW1hZ2UgPyAoXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9e3VzZXIucHJvZmlsZUltYWdlfSBhbHQ9e3VzZXIuZGlzcGxheU5hbWV9IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCIgLz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICB1c2VyLmRpc3BsYXlOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMVwiPlxuICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMFwiPnt1c2VyLmRpc3BsYXlOYW1lfTwvaDI+XG4gICAgICAgICAgICB7dXNlci5kZXBhcnRtZW50ICYmIHVzZXIueWVhciAmJiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgIHt1c2VyLmRlcGFydG1lbnR9IOKAoiBZZWFyIHt1c2VyLnllYXJ9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBMb2FkaW5nICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLXBpbmstNTAwXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIHctZnVsbCBiZy1ncmF5LTUwXCI+XG4gICAgICAgIHsvKiBIZWFkZXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgYm9yZGVyLWIgcC00IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEyIGgtMTIgcm91bmRlZC1mdWxsIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tcGluay00MDAgdG8tcHVycGxlLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAge3VzZXIucHJvZmlsZUltYWdlID8gKFxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPXt1c2VyLnByb2ZpbGVJbWFnZX0gYWx0PXt1c2VyLmRpc3BsYXlOYW1lfSBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgdXNlci5kaXNwbGF5TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTFcIj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj57dXNlci5kaXNwbGF5TmFtZX08L2gyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogRXJyb3IgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNFwiPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtcmVkLTUwMCB0ZXh0LWNlbnRlclwiPntlcnJvcn08L3A+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17ZmV0Y2hNZXNzYWdlc31cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTQgcHgtNCBweS0yIGJnLXBpbmstNTAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyBob3ZlcjpiZy1waW5rLTYwMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgUmV0cnlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIHctZnVsbCBiZy1ncmF5LTUwXCI+XG4gICAgICB7LyogSGVhZGVyICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBib3JkZXItYiBwLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMiBoLTEyIHJvdW5kZWQtZnVsbCBiZy1ncmFkaWVudC10by1iciBmcm9tLXBpbmstNDAwIHRvLXB1cnBsZS01MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSBmb250LWJvbGQgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICB7dXNlci5wcm9maWxlSW1hZ2UgPyAoXG4gICAgICAgICAgICAgIDxpbWcgc3JjPXt1c2VyLnByb2ZpbGVJbWFnZX0gYWx0PXt1c2VyLmRpc3BsYXlOYW1lfSBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiIC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICB1c2VyLmRpc3BsYXlOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtpc09ubGluZSAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGJvdHRvbS0wIHJpZ2h0LTAgdy0zIGgtMyBiZy1ncmVlbi01MDAgYm9yZGVyLTIgYm9yZGVyLXdoaXRlIHJvdW5kZWQtZnVsbFwiPjwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMVwiPlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj57dXNlci5kaXNwbGF5TmFtZX08L2gyPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICB7aXNPbmxpbmUgPyAoXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JlZW4tNjAwXCI+T25saW5lPC9zcGFuPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPHNwYW4+T2ZmbGluZTwvc3Bhbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7dXNlci5kZXBhcnRtZW50ICYmIHVzZXIueWVhciAmJiAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPHNwYW4+4oCiPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuPnt1c2VyLmRlcGFydG1lbnR9IOKAoiBZZWFyIHt1c2VyLnllYXJ9PC9zcGFuPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBNZXNzYWdlcyAqL31cbiAgICAgIDxkaXZcbiAgICAgICAgcmVmPXttZXNzYWdlc0NvbnRhaW5lclJlZn1cbiAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS0xXCJcbiAgICAgID5cbiAgICAgICAge21lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGgtZnVsbCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIwIGgtMjAgcm91bmRlZC1mdWxsIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tcGluay00MDAgdG8tcHVycGxlLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIHRleHQtM3hsIG1iLTRcIj5cbiAgICAgICAgICAgICAg8J+SrFxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIGZvbnQtbWVkaXVtXCI+Tm8gbWVzc2FnZXMgeWV0PC9wPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNDAwIG10LTJcIj5cbiAgICAgICAgICAgICAgU2F5IGhpIHRvIHt1c2VyLmRpc3BsYXlOYW1lfSB0byBzdGFydCB0aGUgY29udmVyc2F0aW9uIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7bWVzc2FnZXMubWFwKChtZXNzYWdlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBpc093bk1lc3NhZ2UgPSBtZXNzYWdlLnNlbmRlcklkID09PSBjdXJyZW50VXNlcklkO1xuICAgICAgICAgICAgICBjb25zdCBzaG93QXZhdGFyID0gaW5kZXggPT09IDAgfHxcbiAgICAgICAgICAgICAgICBtZXNzYWdlc1tpbmRleCAtIDFdLnNlbmRlcklkICE9PSBtZXNzYWdlLnNlbmRlcklkO1xuXG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAga2V5PXttZXNzYWdlLmlkfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCAke2lzT3duTWVzc2FnZSA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCd9IGdhcC0yICR7c2hvd0F2YXRhciA/ICdtdC0zJyA6ICdtdC0wLjUnfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgeyFpc093bk1lc3NhZ2UgJiYgc2hvd0F2YXRhciAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04IGgtOCByb3VuZGVkLWZ1bGwgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1waW5rLTQwMCB0by1wdXJwbGUtNTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgdGV4dC1zbSBmb250LWJvbGQgb3ZlcmZsb3ctaGlkZGVuIGZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5zZW5kZXIucHJvZmlsZUltYWdlID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e21lc3NhZ2Uuc2VuZGVyLnByb2ZpbGVJbWFnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXttZXNzYWdlLnNlbmRlci5kaXNwbGF5TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZW5kZXIuZGlzcGxheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7IWlzT3duTWVzc2FnZSAmJiAhc2hvd0F2YXRhciAmJiA8ZGl2IGNsYXNzTmFtZT1cInctOFwiIC8+fVxuXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YG1heC13LVs3MCVdICR7aXNPd25NZXNzYWdlID8gJ2l0ZW1zLWVuZCcgOiAnaXRlbXMtc3RhcnQnfWB9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcm91bmRlZC0yeGwgcHgtNCBweS0yICR7aXNPd25NZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLWdyYWRpZW50LXRvLWJyIGZyb20tcGluay01MDAgdG8tcHVycGxlLTUwMCB0ZXh0LXdoaXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdiZy13aGl0ZSB0ZXh0LWdyYXktOTAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHdoaXRlc3BhY2UtcHJlLXdyYXAgYnJlYWstd29yZHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtdC0xIHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRNZXNzYWdlVGltZShtZXNzYWdlLmNyZWF0ZWRBdCl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIHtpc093bk1lc3NhZ2UgJiYgbWVzc2FnZS5yZWFkQXQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWJsdWUtNTAwXCI+4pyT4pyTPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KX1cblxuICAgICAgICAgICAgey8qIFR5cGluZyBpbmRpY2F0b3IgKi99XG4gICAgICAgICAgICB7aXNUeXBpbmcgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1zdGFydCBnYXAtMiBtdC0zXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTggaC04IHJvdW5kZWQtZnVsbCBiZy1ncmFkaWVudC10by1iciBmcm9tLXBpbmstNDAwIHRvLXB1cnBsZS01MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSB0ZXh0LXNtIGZvbnQtYm9sZCBvdmVyZmxvdy1oaWRkZW4gZmxleC1zaHJpbmstMFwiPlxuICAgICAgICAgICAgICAgICAge3VzZXIucHJvZmlsZUltYWdlID8gKFxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17dXNlci5wcm9maWxlSW1hZ2V9IGFsdD17dXNlci5kaXNwbGF5TmFtZX0gY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIiAvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgdXNlci5kaXNwbGF5TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtMnhsIHB4LTQgcHktMlwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInctMiBoLTIgYmctZ3JheS00MDAgcm91bmRlZC1mdWxsIGFuaW1hdGUtYm91bmNlXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyYXktNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMC4xcycgfX0+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyYXktNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMC4ycycgfX0+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPGRpdiByZWY9e21lc3NhZ2VzRW5kUmVmfSAvPlxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBNZXNzYWdlIElucHV0ICovfVxuICAgICAgPE1lc3NhZ2VJbnB1dCBvblNlbmRNZXNzYWdlPXtoYW5kbGVTZW5kTWVzc2FnZX0gbWF0Y2hJZD17bWF0Y2hJZH0gLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZU1lc3NhZ2luZyIsIk1lc3NhZ2VJbnB1dCIsIkNoYXRXaW5kb3ciLCJtYXRjaElkIiwidXNlciIsImN1cnJlbnRVc2VySWQiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiaGFzTW9yZSIsInNldEhhc01vcmUiLCJtZXNzYWdlc0VuZFJlZiIsIm1lc3NhZ2VzQ29udGFpbmVyUmVmIiwic2VuZE1lc3NhZ2UiLCJtYXJrQXNEZWxpdmVyZWQiLCJtYXJrQXNSZWFkIiwiYWRkTWVzc2FnZUxpc3RlbmVyIiwiYWRkVHlwaW5nTGlzdGVuZXIiLCJ0eXBpbmdVc2VycyIsIm9ubGluZVN0YXR1cyIsImZldGNoTWVzc2FnZXMiLCJ1bnN1YnNjcmliZSIsIm1lc3NhZ2UiLCJwcmV2IiwiZmluZCIsIm0iLCJpZCIsInNlbmRlclByb2ZpbGVJbWFnZSIsInNlbmRlcklkIiwicHJvZmlsZUltYWdlIiwic2VuZGVyIiwiY29udGVudCIsImRlbGl2ZXJlZEF0IiwicmVhZEF0IiwiY3JlYXRlZEF0IiwiZGlzcGxheU5hbWUiLCJuYW1lIiwic2V0VGltZW91dCIsInRva2VuIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImlzTG9jYWxIb3N0IiwiaW5jbHVkZXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwiYXBpQmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwiYXV0aEhlYWRlciIsInN0YXJ0c1dpdGgiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJkYXRhIiwianNvbiIsInN1Y2Nlc3MiLCJtYXBwZWQiLCJtYXAiLCJlcnIiLCJjb25zb2xlIiwic2Nyb2xsVG9Cb3R0b20iLCJjdXJyZW50Iiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImhhbmRsZVNlbmRNZXNzYWdlIiwiZm9ybWF0TWVzc2FnZVRpbWUiLCJ0aW1lc3RhbXAiLCJkYXRlIiwiRGF0ZSIsIm5vdyIsImRpZmZEYXlzIiwiTWF0aCIsImZsb29yIiwiZ2V0VGltZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ3ZWVrZGF5IiwibW9udGgiLCJkYXkiLCJpc09ubGluZSIsImlzVHlwaW5nIiwic29tZSIsInQiLCJ1c2VySWQiLCJkaXYiLCJjbGFzc05hbWUiLCJpbWciLCJzcmMiLCJhbHQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImgyIiwiZGVwYXJ0bWVudCIsInllYXIiLCJwIiwiYnV0dG9uIiwib25DbGljayIsInNwYW4iLCJyZWYiLCJsZW5ndGgiLCJpbmRleCIsImlzT3duTWVzc2FnZSIsInNob3dBdmF0YXIiLCJzdHlsZSIsImFuaW1hdGlvbkRlbGF5Iiwib25TZW5kTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/messaging/ChatWindow.tsx\n"));

/***/ })

});