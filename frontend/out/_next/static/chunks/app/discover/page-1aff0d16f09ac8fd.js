(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{5946:function(e,r,t){Promise.resolve().then(t.bind(t,5615))},5615:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var l=t(7437),s=t(2265),o=t(4033),a=t(1396),i=t.n(a),n=t(8222);function d(){var e,r,t,a,d,c,x,u;let p=(0,o.useRouter)(),[h,m]=(0,s.useState)([]),[f,v]=(0,s.useState)(0),[b,g]=(0,s.useState)(!0),[y,N]=(0,s.useState)(""),[j,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!localStorage.getItem("accessToken")){p.push("/login");return}k()},[p]);let k=async()=>{try{g(!0);let e=await n.h.getDiscoverFeed(20,0);m(e.users||[]),N("")}catch(t){var e,r;N((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.error)||"Failed to load profiles")}finally{g(!1)}},_=async()=>{try{let e=await n.h.getDiscoverFeed(20,h.length);m([...h,...e.users||[]])}catch(e){console.error("Failed to load more profiles:",e)}},D=async()=>{if(h[f]&&!j){w(!0);try{await n.h.likeUser(h[f].id),E()}catch(t){var e,r;console.error("Like error:",t),N((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.error)||"Failed to like user"),w(!1)}}},C=async()=>{if(h[f]&&!j){w(!0);try{await n.h.passUser(h[f].id),E()}catch(t){var e,r;console.error("Pass error:",t),N((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.error)||"Failed to pass user"),w(!1)}}},E=()=>{let e=f+1;v(e),w(!1),e>=h.length-5&&_()};if(b)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});let S=h[f];return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50",children:[(0,l.jsx)("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,l.jsxs)(i(),{href:"/dashboard",className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC96"}),(0,l.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"JECRC Dating"})]}),(0,l.jsx)(i(),{href:"/dashboard",className:"text-gray-700 hover:text-gray-900 px-4 py-2 rounded-lg hover:bg-gray-100 transition",children:"← Back"})]})})}),(0,l.jsxs)("div",{className:"max-w-md mx-auto px-4 py-12",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-center mb-8 bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Discover"}),y&&(0,l.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700",children:y}),0===h.length?(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-12 text-center",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDE0A"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No More Profiles"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Check back later for more people to discover!"}),(0,l.jsx)("button",{onClick:k,className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition",children:"Refresh"})]}):f>=h.length?(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-12 text-center",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"You've Seen Everyone!"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Great job exploring! Check back later for new profiles."}),(0,l.jsx)("button",{onClick:()=>v(0),className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition",children:"Start Over"})]}):(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:[(0,l.jsx)("div",{className:"h-96 bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white text-8xl overflow-hidden",children:(null==S?void 0:null===(t=S.profile)||void 0===t?void 0:null===(r=t.photos)||void 0===r?void 0:null===(e=r[0])||void 0===e?void 0:e.url)?(0,l.jsx)("img",{src:S.profile.photos[0].url,alt:S.displayName,className:"w-full h-full object-cover"}):(0,l.jsx)("span",{children:(null==S?void 0:null===(a=S.displayName)||void 0===a?void 0:a[0])||"\uD83D\uDC64"})}),(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:null==S?void 0:S.displayName}),(0,l.jsxs)("p",{className:"text-gray-600 mb-4",children:[(null==S?void 0:null===(d=S.profile)||void 0===d?void 0:d.department)||"Department not set"," • Year ",(null==S?void 0:null===(c=S.profile)||void 0===c?void 0:c.year)||"N/A"]}),(0,l.jsx)("p",{className:"text-gray-700 mb-4",children:(null==S?void 0:null===(x=S.profile)||void 0===x?void 0:x.bio)||"No bio yet"}),(null==S?void 0:null===(u=S.profile)||void 0===u?void 0:u.interests)&&S.profile.interests.length>0&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Interests:"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:S.profile.interests.map((e,r)=>(0,l.jsx)("span",{className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm",children:e},r))})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:C,disabled:j,className:"flex-1 bg-gray-100 text-gray-700 py-4 rounded-2xl font-semibold hover:bg-gray-200 transition text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:"✕ Pass"}),(0,l.jsx)("button",{onClick:D,disabled:j,className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-600 text-white py-4 rounded-2xl font-semibold hover:shadow-xl transition text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:"❤️ Like"})]})]})]})]})]})}},622:function(e,r,t){"use strict";var l=t(2265),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var l,o={},d=null,c=null;for(l in void 0!==t&&(d=""+t),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(c=r.ref),r)a.call(r,l)&&!n.hasOwnProperty(l)&&(o[l]=r[l]);if(e&&e.defaultProps)for(l in r=e.defaultProps)void 0===o[l]&&(o[l]=r[l]);return{$$typeof:s,type:e,key:d,ref:c,props:o,_owner:i.current}}r.Fragment=o,r.jsx=d,r.jsxs=d},7437:function(e,r,t){"use strict";e.exports=t(622)},1396:function(e,r,t){e.exports=t(5250)},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[829,250,222,971,458,744],function(){return e(e.s=5946)}),_N_E=e.O()}]);